(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function ut(n,t,e,r){return new(e||(e=Promise))((function(s,o){function i(l){try{c(r.next(l))}catch(u){o(u)}}function a(l){try{c(r.throw(l))}catch(u){o(u)}}function c(l){var u;l.done?s(l.value):(u=l.value,u instanceof e?u:new e((function(p){p(u)}))).then(i,a)}c((r=r.apply(n,t||[])).next())}))}let wn=class{constructor(){this.listeners={}}on(t,e,r){if(this.listeners[t]||(this.listeners[t]=new Set),r?.once){const s=(...o)=>{this.un(t,s),e(...o)};return this.listeners[t].add(s),()=>this.un(t,s)}return this.listeners[t].add(e),()=>this.un(t,e)}un(t,e){var r;(r=this.listeners[t])===null||r===void 0||r.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((r=>r(...e)))}};const Cn={decode:function(n,t){return ut(this,void 0,void 0,(function*(){const e=new AudioContext({sampleRate:t});try{return yield e.decodeAudioData(n)}finally{e.close()}}))},createBuffer:function(n,t){if(!n||n.length===0)throw new Error("channelData must be a non-empty array");if(t<=0)throw new Error("duration must be greater than 0");if(typeof n[0]=="number"&&(n=[n]),!n[0]||n[0].length===0)throw new Error("channelData must contain non-empty channel arrays");return(function(e){const r=e[0];if(r.some((s=>s>1||s<-1))){const s=r.length;let o=0;for(let i=0;i<s;i++){const a=Math.abs(r[i]);a>o&&(o=a)}for(const i of e)for(let a=0;a<s;a++)i[a]/=o}})(n),{duration:t,length:n[0].length,sampleRate:n[0].length/t,numberOfChannels:n.length,getChannelData:e=>n?.[e],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Ks(n,t){const e=t.xmlns?document.createElementNS(t.xmlns,n):document.createElement(n);for(const[r,s]of Object.entries(t))if(r==="children"&&s)for(const[o,i]of Object.entries(s))i instanceof Node?e.appendChild(i):typeof i=="string"?e.appendChild(document.createTextNode(i)):e.appendChild(Ks(o,i));else r==="style"?Object.assign(e.style,s):r==="textContent"?e.textContent=s:e.setAttribute(r,s.toString());return e}function as(n,t,e){const r=Ks(n,t||{});return e?.appendChild(r),r}var qa=Object.freeze({__proto__:null,createElement:as,default:as});const Ga={fetchBlob:function(n,t,e){return ut(this,void 0,void 0,(function*(){const r=yield fetch(n,e);if(r.status>=400)throw new Error(`Failed to fetch ${n}: ${r.status} (${r.statusText})`);return(function(s,o){ut(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const i=s.body.getReader(),a=Number(s.headers.get("Content-Length"))||0;let c=0,l=0;const u=b=>ut(this,void 0,void 0,(function*(){c+=b?.length||0;const g=Math.round(c/a*100);o(g)})),p=()=>ut(this,void 0,void 0,(function*(){if(l++>1e5)return void console.error("Fetcher: Maximum iterations reached, stopping read loop");let b;try{b=yield i.read()}catch{return}b.done||(u(b.value),yield p())}));p()}))})(r.clone(),t),r.blob()}))}};class Ka extends wn{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)}),{once:!0})}onMediaEvent(t,e,r){return this.media.addEventListener(t,e,r),()=>this.media.removeEventListener(t,e,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,e){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const s=e instanceof Blob&&(this.canPlayType(e.type)||!t)?URL.createObjectURL(e):t;if(r&&this.media.removeAttribute("src"),s||t)try{this.media.src=s}catch{this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(t){this.media=t}play(){return ut(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(t){if(t instanceof DOMException&&t.name==="AbortError")return;throw t}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,e){e!=null&&(this.media.preservesPitch=e),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class ke extends wn{constructor(t,e){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragUnsubscribe=null,this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[s,o]=this.initHtml();r.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),e&&o.appendChild(e),this.initEvents()}parentFromOptionsContainer(t){let e;if(typeof t=="string"?e=document.querySelector(t):t instanceof HTMLElement&&(e=t),!e)throw new Error("Container not found");return e}initEvents(){const t=e=>{const r=this.wrapper.getBoundingClientRect(),s=e.clientX-r.left,o=e.clientY-r.top;return[s/r.width,o/r.height]};if(this.wrapper.addEventListener("click",(e=>{const[r,s]=t(e);this.emit("click",r,s)})),this.wrapper.addEventListener("dblclick",(e=>{const[r,s]=t(e);this.emit("dblclick",r,s)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:e,scrollWidth:r,clientWidth:s}=this.scrollContainer,o=e/r,i=(e+s)/r;this.emit("scroll",o,i,e,e+s)})),typeof ResizeObserver=="function"){const e=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{e().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.dragUnsubscribe||(this.dragUnsubscribe=(function(t,e,r,s,o=3,i=0,a=100){if(!t)return()=>{};const c=matchMedia("(pointer: coarse)").matches;let l=()=>{};const u=p=>{if(p.button!==i)return;p.preventDefault(),p.stopPropagation();let b=p.clientX,g=p.clientY,v=!1;const R=Date.now(),I=m=>{if(m.preventDefault(),m.stopPropagation(),c&&Date.now()-R<a)return;const H=m.clientX,lt=m.clientY,pt=H-b,St=lt-g;if(v||Math.abs(pt)>o||Math.abs(St)>o){const bt=t.getBoundingClientRect(),{left:ye,top:Qe}=bt;v||(r?.(b-ye,g-Qe),v=!0),e(pt,St,H-ye,lt-Qe),b=H,g=lt}},N=m=>{if(v){const H=m.clientX,lt=m.clientY,pt=t.getBoundingClientRect(),{left:St,top:bt}=pt;s?.(H-St,lt-bt)}l()},W=m=>{m.relatedTarget&&m.relatedTarget!==document.documentElement||N(m)},j=m=>{v&&(m.stopPropagation(),m.preventDefault())},E=m=>{v&&m.preventDefault()};document.addEventListener("pointermove",I),document.addEventListener("pointerup",N),document.addEventListener("pointerout",W),document.addEventListener("pointercancel",W),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",j,{capture:!0}),l=()=>{document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",N),document.removeEventListener("pointerout",W),document.removeEventListener("pointercancel",W),document.removeEventListener("touchmove",E),setTimeout((()=>{document.removeEventListener("click",j,{capture:!0})}),10)}};return t.addEventListener("pointerdown",u),()=>{l(),t.removeEventListener("pointerdown",u)}})(this.wrapper,((t,e,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))}),(t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}),(t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))})),this.subscriptions.push(this.dragUnsubscribe))}getHeight(t,e){var r;const s=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const o=this.parent.clientHeight||128;return e?.every((i=>!i.overlay))?o/s:o}return 128}initHtml(){const t=document.createElement("div"),e=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return e.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,e]}setOptions(t){if(this.options.container!==t.container){const e=this.parentFromOptionsContainer(t.container);e.appendChild(this.container),this.parent=e}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:e}=this.scrollContainer,r=e*t;this.setScroll(r)}destroy(){var t;this.subscriptions.forEach((e=>e())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(t=this.unsubscribeOnScroll)===null||t===void 0||t.forEach((e=>e())),this.unsubscribeOnScroll=[]}createDelay(t=10){let e,r;const s=()=>{e&&(clearTimeout(e),e=void 0),r&&(r(),r=void 0)};return this.timeouts.push(s),()=>new Promise(((o,i)=>{s(),r=i,e=setTimeout((()=>{e=void 0,r=void 0,o()}),t)}))}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length===0)return"#999";if(t.length<2)return t[0]||"";const e=document.createElement("canvas"),r=e.getContext("2d"),s=e.height*(window.devicePixelRatio||1),o=r.createLinearGradient(0,0,0,s),i=1/(t.length-1);return t.forEach(((a,c)=>{const l=c*i;o.addColorStop(l,a)})),o}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,e,r,s){const o=t[0],i=t[1]||t[0],a=o.length,{width:c,height:l}=r.canvas,u=l/2,p=this.getPixelRatio(),b=e.barWidth?e.barWidth*p:1,g=e.barGap?e.barGap*p:e.barWidth?b/2:0,v=e.barRadius||0,R=c/(b+g)/a,I=v&&"roundRect"in r?"roundRect":"rect";r.beginPath();let N=0,W=0,j=0;for(let E=0;E<=a;E++){const m=Math.round(E*R);if(m>N){const pt=Math.round(W*u*s),St=pt+Math.round(j*u*s)||1;let bt=u-pt;e.barAlign==="top"?bt=0:e.barAlign==="bottom"&&(bt=l-St),r[I](N*(b+g),bt,b,St,v),N=m,W=0,j=0}const H=Math.abs(o[E]||0),lt=Math.abs(i[E]||0);H>W&&(W=H),lt>j&&(j=lt)}r.fill(),r.closePath()}renderLineWaveform(t,e,r,s){const o=i=>{const a=t[i]||t[0],c=a.length,{height:l}=r.canvas,u=l/2,p=r.canvas.width/c;r.moveTo(0,u);let b=0,g=0;for(let v=0;v<=c;v++){const R=Math.round(v*p);if(R>b){const N=u+(Math.round(g*u*s)||1)*(i===0?-1:1);r.lineTo(b,N),b=R,g=0}const I=Math.abs(a[v]||0);I>g&&(g=I)}r.lineTo(b,u)};r.beginPath(),o(0),o(1),r.fill(),r.closePath()}renderWaveform(t,e,r){if(r.fillStyle=this.convertColorValues(e.waveColor),e.renderFunction)return void e.renderFunction(t,r);let s=e.barHeight||1;if(e.normalize){const o=Array.from(t[0]).reduce(((i,a)=>Math.max(i,Math.abs(a))),0);s=o?s/o:s}e.barWidth||e.barGap||e.barAlign?this.renderBarWaveform(t,e,r,s):this.renderLineWaveform(t,e,r,s)}renderSingleCanvas(t,e,r,s,o,i,a){const c=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*c),l.height=Math.round(s*c),l.style.width=`${r}px`,l.style.height=`${s}px`,l.style.left=`${Math.round(o)}px`,i.appendChild(l);const u=l.getContext("2d");if(this.renderWaveform(t,e,u),l.width>0&&l.height>0){const p=l.cloneNode(),b=p.getContext("2d");b.drawImage(l,0,0),b.globalCompositeOperation="source-in",b.fillStyle=this.convertColorValues(e.progressColor),b.fillRect(0,0,l.width,l.height),a.appendChild(p)}}renderMultiCanvas(t,e,r,s,o,i){const a=this.getPixelRatio(),{clientWidth:c}=this.scrollContainer,l=r/a;let u=Math.min(ke.MAX_CANVAS_WIDTH,c,l),p={};if(e.barWidth||e.barGap){const I=e.barWidth||.5,N=I+(e.barGap||I/2);u%N!=0&&(u=Math.floor(u/N)*N)}if(u===0)return;const b=I=>{if(I<0||I>=g||p[I])return;p[I]=!0;const N=I*u;let W=Math.min(l-N,u);if(e.barWidth||e.barGap){const E=e.barWidth||.5,m=E+(e.barGap||E/2);W=Math.floor(W/m)*m}if(W<=0)return;const j=t.map((E=>{const m=Math.floor(N/l*E.length),H=Math.floor((N+W)/l*E.length);return E.slice(m,H)}));this.renderSingleCanvas(j,e,W,s,N,o,i)},g=Math.ceil(l/u);if(!this.isScrollable){for(let I=0;I<g;I++)b(I);return}const v=this.scrollContainer.scrollLeft/l,R=Math.floor(v*g);if(b(R-1),b(R),b(R+1),g>1){const I=this.on("scroll",(()=>{const{scrollLeft:N}=this.scrollContainer,W=Math.floor(N/l*g);Object.keys(p).length>ke.MAX_NODES&&(o.innerHTML="",i.innerHTML="",p={}),b(W-1),b(W),b(W+1)}));this.unsubscribeOnScroll.push(I)}}renderChannel(t,e,r,s){var{overlay:o}=e,i=(function(u,p){var b={};for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&p.indexOf(g)<0&&(b[g]=u[g]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var v=0;for(g=Object.getOwnPropertySymbols(u);v<g.length;v++)p.indexOf(g[v])<0&&Object.prototype.propertyIsEnumerable.call(u,g[v])&&(b[g[v]]=u[g[v]])}return b})(e,["overlay"]);const a=document.createElement("div"),c=this.getHeight(i.height,i.splitChannels);a.style.height=`${c}px`,o&&s>0&&(a.style.marginTop=`-${c}px`),this.canvasWrapper.style.minHeight=`${c}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,i,r,c,a,l)}render(t){return ut(this,void 0,void 0,(function*(){var e;this.timeouts.forEach((c=>c())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),s=this.scrollContainer.clientWidth,o=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=o>s;const i=this.options.fillParent&&!this.isScrollable,a=(i?s:o)*r;if(this.wrapper.style.width=i?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let c=0;c<t.numberOfChannels;c++){const l=Object.assign(Object.assign({},this.options),(e=this.options.splitChannels)===null||e===void 0?void 0:e[c]);this.renderChannel([t.getChannelData(c)],l,a,c)}else{const c=[t.getChannelData(0)];t.numberOfChannels>1&&c.push(t.getChannelData(1)),this.renderChannel(c,this.options,a,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((r=>r())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:e}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let s=r-e;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,e=!1){const{scrollLeft:r,scrollWidth:s,clientWidth:o}=this.scrollContainer,i=t*s,a=r,c=r+o,l=o/2;if(this.isDragging)i+30>c?this.scrollContainer.scrollLeft+=30:i-30<a&&(this.scrollContainer.scrollLeft-=30);else{(i<a||i>c)&&(this.scrollContainer.scrollLeft=i-(this.options.autoCenter?l:0));const u=i-r-l;e&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,p=u/s,b=(u+o)/s;this.emit("scroll",p,b,u,u+o)}}renderProgress(t,e){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0%, 100% 0%, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${t*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,e)}exportImage(t,e,r){return ut(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(r==="dataURL"){const o=Array.from(s).map((i=>i.toDataURL(t,e)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((i,a)=>{o.toBlob((c=>{c?i(c):a(new Error("Could not export image"))}),t,e)})))))}))}}ke.MAX_CANVAS_WIDTH=8e3,ke.MAX_NODES=10;class Ja extends wn{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const t=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(t))};t()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class Er extends wn{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ut(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then((e=>{if(e.status>=400)throw new Error(`Failed to fetch ${t}: ${e.status} (${e.statusText})`);return e.arrayBuffer()})).then((e=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(e))).then((e=>{this.currentSrc===t&&(this.buffer=e,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ut(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const e=t-this.currentTime,r=this.bufferNode;r?.stop(this.audioContext.currentTime+e),r?.addEventListener("ended",(()=>{r===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(t){return ut(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const e=!this.paused;e&&this._pause(),this.playedDuration=t/this._playbackRate,e&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,e;return(t=this._duration)!==null&&t!==void 0?t:((e=this.buffer)===null||e===void 0?void 0:e.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const e=this.buffer.numberOfChannels;for(let r=0;r<e;r++)t.push(this.buffer.getChannelData(r));return t}removeAttribute(t){switch(t){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const Za={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class hn extends Ka{static create(t){return new hn(t)}constructor(t){const e=t.media||(t.backend==="WebAudio"?new Er:void 0);super({media:e,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Za,t),this.timer=new Ja;const r=e?void 0:this.getMediaElement();this.renderer=new ke(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:o,duration:i}=this.options;(s||o&&i)&&this.load(s,o,i).catch((a=>{console.error("WaveSurfer initial load error:",a)}))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const t=this.updateProgress();this.emit("timeupdate",t)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((t,e)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,e))})),this.renderer.on("dblclick",((t,e)=>{this.emit("dblclick",t,e)})),this.renderer.on("scroll",((t,e,r,s)=>{const o=this.getDuration();this.emit("scroll",t*o,e*o,r,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(t=>{this.emit("dragstart",t)})),this.renderer.on("dragend",(t=>{this.emit("dragend",t)})));{let t;const e=this.renderer.on("drag",(r=>{if(!this.options.interact)return;let s;this.renderer.renderProgress(r),clearTimeout(t),this.isPlaying()?s=0:this.options.dragToSeek===!0?s=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(s=this.options.dragToSeek.debounceTime),t=setTimeout((()=>{this.seekTo(r)}),s),this.emit("interaction",r*this.getDuration()),this.emit("drag",r)}));this.subscriptions.push((()=>{clearTimeout(t),e()}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach((e=>{this.registerPlugin(e)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=Cn.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=Cn.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const e=t.once("destroy",(()=>{this.plugins=this.plugins.filter((r=>r!==t)),this.subscriptions=this.subscriptions.filter((r=>r!==e))}));return this.subscriptions.push(e),t}unregisterPlugin(t){this.plugins=this.plugins.filter((e=>e!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const e=t/this.getDuration();this.renderer.setScrollPercentage(e)}getActivePlugins(){return this.plugins}loadAudio(t,e,r,s){return ut(this,void 0,void 0,(function*(){var o;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!e&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=this.abortController.signal);const c=u=>this.emit("loading",u);e=yield Ga.fetchBlob(t,c,a);const l=this.options.blobMimeType;l&&(e=new Blob([e],{type:l}))}this.setSrc(t,e);const i=yield new Promise((a=>{const c=s||this.getDuration();c?a(c):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>a(this.getDuration())),{once:!0}))}));if(!t&&!e){const a=this.getMediaElement();a instanceof Er&&(a.duration=i)}if(r)this.decodedData=Cn.createBuffer(r,i||0);else if(e){const a=yield e.arrayBuffer();this.decodedData=yield Cn.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(t,e,r){return ut(this,void 0,void 0,(function*(){try{return yield this.loadAudio(t,void 0,e,r)}catch(s){throw this.emit("error",s),s}}))}loadBlob(t,e,r){return ut(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",t,e,r)}catch(s){throw this.emit("error",s),s}}))}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:e=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(t,this.decodedData.numberOfChannels),o=[];for(let i=0;i<s;i++){const a=this.decodedData.getChannelData(i),c=[],l=a.length/e;for(let u=0;u<e;u++){const p=a.slice(Math.floor(u*l),Math.ceil((u+1)*l));let b=0;for(let g=0;g<p.length;g++){const v=p[g];Math.abs(v)>Math.abs(b)&&(b=v)}c.push(Math.round(b*r)/r)}o.push(c)}return o}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const e=this.getDuration()*t;this.setTime(e)}play(t,e){const r=Object.create(null,{play:{get:()=>super.play}});return ut(this,void 0,void 0,(function*(){t!=null&&this.setTime(t);const s=yield r.play.call(this);return e!=null&&(this.media instanceof Er?this.media.stopAt(e):this.stopAtPosition=e),s}))}playPause(){return ut(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return ut(this,arguments,void 0,(function*(t="image/png",e=1,r="dataURL"){return this.renderer.exportImage(t,e,r)}))}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach((e=>e.destroy())),this.subscriptions.forEach((e=>e())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}hn.BasePlugin=class extends wn{constructor(n){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=n}onInit(){}_init(n){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=n,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((n=>n())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},hn.dom=qa;class Js{constructor(){this.listeners={}}on(t,e,r){if(this.listeners[t]||(this.listeners[t]=new Set),r?.once){const s=(...o)=>{this.un(t,s),e(...o)};return this.listeners[t].add(s),()=>this.un(t,s)}return this.listeners[t].add(e),()=>this.un(t,e)}un(t,e){var r;(r=this.listeners[t])===null||r===void 0||r.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((r=>r(...e)))}}class Xa extends Js{constructor(t){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=t}onInit(){}_init(t){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((t=>t())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}}function zn(n,t,e,r,s=3,o=0,i=100){if(!n)return()=>{};const a=matchMedia("(pointer: coarse)").matches;let c=()=>{};const l=u=>{if(u.button!==o)return;u.preventDefault(),u.stopPropagation();let p=u.clientX,b=u.clientY,g=!1;const v=Date.now(),R=E=>{if(E.preventDefault(),E.stopPropagation(),a&&Date.now()-v<i)return;const m=E.clientX,H=E.clientY,lt=m-p,pt=H-b;if(g||Math.abs(lt)>s||Math.abs(pt)>s){const St=n.getBoundingClientRect(),{left:bt,top:ye}=St;g||(e?.(p-bt,b-ye),g=!0),t(lt,pt,m-bt,H-ye),p=m,b=H}},I=E=>{if(g){const m=E.clientX,H=E.clientY,lt=n.getBoundingClientRect(),{left:pt,top:St}=lt;r?.(m-pt,H-St)}c()},N=E=>{E.relatedTarget&&E.relatedTarget!==document.documentElement||I(E)},W=E=>{g&&(E.stopPropagation(),E.preventDefault())},j=E=>{g&&E.preventDefault()};document.addEventListener("pointermove",R),document.addEventListener("pointerup",I),document.addEventListener("pointerout",N),document.addEventListener("pointercancel",N),document.addEventListener("touchmove",j,{passive:!1}),document.addEventListener("click",W,{capture:!0}),c=()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",I),document.removeEventListener("pointerout",N),document.removeEventListener("pointercancel",N),document.removeEventListener("touchmove",j),setTimeout((()=>{document.removeEventListener("click",W,{capture:!0})}),10)}};return n.addEventListener("pointerdown",l),()=>{c(),n.removeEventListener("pointerdown",l)}}function Zs(n,t){const e=t.xmlns?document.createElementNS(t.xmlns,n):document.createElement(n);for(const[r,s]of Object.entries(t))if(r==="children"&&s)for(const[o,i]of Object.entries(s))i instanceof Node?e.appendChild(i):typeof i=="string"?e.appendChild(document.createTextNode(i)):e.appendChild(Zs(o,i));else r==="style"?Object.assign(e.style,s):r==="textContent"?e.textContent=s:e.setAttribute(r,s.toString());return e}function sn(n,t,e){const r=Zs(n,t||{});return e?.appendChild(r),r}class cs extends Js{constructor(t,e,r=0){var s,o,i,a,c,l,u,p,b,g;super(),this.totalDuration=e,this.numberOfChannels=r,this.element=null,this.minLength=0,this.maxLength=1/0,this.contentEditable=!1,this.subscriptions=[],this.updatingSide=void 0,this.isRemoved=!1,this.subscriptions=[],this.id=t.id||`region-${Math.random().toString(32).slice(2)}`,this.start=this.clampPosition(t.start),this.end=this.clampPosition((s=t.end)!==null&&s!==void 0?s:t.start),this.drag=(o=t.drag)===null||o===void 0||o,this.resize=(i=t.resize)===null||i===void 0||i,this.resizeStart=(a=t.resizeStart)===null||a===void 0||a,this.resizeEnd=(c=t.resizeEnd)===null||c===void 0||c,this.color=(l=t.color)!==null&&l!==void 0?l:"rgba(0, 0, 0, 0.1)",this.minLength=(u=t.minLength)!==null&&u!==void 0?u:this.minLength,this.maxLength=(p=t.maxLength)!==null&&p!==void 0?p:this.maxLength,this.channelIdx=(b=t.channelIdx)!==null&&b!==void 0?b:-1,this.contentEditable=(g=t.contentEditable)!==null&&g!==void 0?g:this.contentEditable,this.element=this.initElement(),this.setContent(t.content),this.setPart(),this.renderPosition(),this.initMouseEvents()}clampPosition(t){return Math.max(0,Math.min(this.totalDuration,t))}setPart(){var t;const e=this.start===this.end;(t=this.element)===null||t===void 0||t.setAttribute("part",`${e?"marker":"region"} ${this.id}`)}addResizeHandles(t){const e={position:"absolute",zIndex:"2",width:"6px",height:"100%",top:"0",cursor:"ew-resize",wordBreak:"keep-all"},r=sn("div",{part:"region-handle region-handle-left",style:Object.assign(Object.assign({},e),{left:"0",borderLeft:"2px solid rgba(0, 0, 0, 0.5)",borderRadius:"2px 0 0 2px"})},t),s=sn("div",{part:"region-handle region-handle-right",style:Object.assign(Object.assign({},e),{right:"0",borderRight:"2px solid rgba(0, 0, 0, 0.5)",borderRadius:"0 2px 2px 0"})},t);this.subscriptions.push(zn(r,(o=>this.onResize(o,"start")),(()=>null),(()=>this.onEndResizing("start")),1),zn(s,(o=>this.onResize(o,"end")),(()=>null),(()=>this.onEndResizing("end")),1))}removeResizeHandles(t){const e=t.querySelector('[part*="region-handle-left"]'),r=t.querySelector('[part*="region-handle-right"]');e&&t.removeChild(e),r&&t.removeChild(r)}initElement(){if(this.isRemoved)return null;const t=this.start===this.end;let e=0,r=100;this.channelIdx>=0&&this.numberOfChannels>0&&this.channelIdx<this.numberOfChannels&&(r=100/this.numberOfChannels,e=r*this.channelIdx);const s=sn("div",{style:{position:"absolute",top:`${e}%`,height:`${r}%`,backgroundColor:t?"none":this.color,borderLeft:t?"2px solid "+this.color:"none",borderRadius:"2px",boxSizing:"border-box",transition:"background-color 0.2s ease",cursor:this.drag?"grab":"default",pointerEvents:"all"}});return!t&&this.resize&&this.addResizeHandles(s),s}renderPosition(){if(!this.element)return;const t=this.start/this.totalDuration,e=(this.totalDuration-this.end)/this.totalDuration;this.element.style.left=100*t+"%",this.element.style.right=100*e+"%"}toggleCursor(t){var e;this.drag&&(!((e=this.element)===null||e===void 0)&&e.style)&&(this.element.style.cursor=t?"grabbing":"grab")}initMouseEvents(){const{element:t}=this;t&&(t.addEventListener("click",(e=>this.emit("click",e))),t.addEventListener("mouseenter",(e=>this.emit("over",e))),t.addEventListener("mouseleave",(e=>this.emit("leave",e))),t.addEventListener("dblclick",(e=>this.emit("dblclick",e))),t.addEventListener("pointerdown",(()=>this.toggleCursor(!0))),t.addEventListener("pointerup",(()=>this.toggleCursor(!1))),this.subscriptions.push(zn(t,(e=>this.onMove(e)),(()=>this.toggleCursor(!0)),(()=>{this.toggleCursor(!1),this.drag&&this.emit("update-end")}))),this.contentEditable&&this.content&&(this.contentClickListener=e=>this.onContentClick(e),this.contentBlurListener=()=>this.onContentBlur(),this.content.addEventListener("click",this.contentClickListener),this.content.addEventListener("blur",this.contentBlurListener)))}_onUpdate(t,e,r){var s;if(!(!((s=this.element)===null||s===void 0)&&s.parentElement))return;const{width:o}=this.element.parentElement.getBoundingClientRect(),i=t/o*this.totalDuration;let a=e&&e!=="start"?this.start:this.start+i,c=e&&e!=="end"?this.end:this.end+i;const l=r!==void 0;l&&this.updatingSide&&this.updatingSide!==e&&(this.updatingSide==="start"?a=r:c=r),a=Math.max(0,a),c=Math.min(this.totalDuration,c);const u=c-a;this.updatingSide=e;const p=u>=this.minLength&&u<=this.maxLength;a<=c&&(p||l)&&(this.start=a,this.end=c,this.renderPosition(),this.emit("update",e))}onMove(t){this.drag&&this._onUpdate(t)}onResize(t,e){this.resize&&(this.resizeStart||e!=="start")&&(this.resizeEnd||e!=="end")&&this._onUpdate(t,e)}onEndResizing(t){this.resize&&(this.emit("update-end",t),this.updatingSide=void 0)}onContentClick(t){t.stopPropagation(),t.target.focus(),this.emit("click",t)}onContentBlur(){this.emit("update-end")}_setTotalDuration(t){this.totalDuration=t,this.renderPosition()}play(t){this.emit("play",t&&this.end!==this.start?this.end:void 0)}getContent(t=!1){var e;return t?this.content||void 0:this.element instanceof HTMLElement?((e=this.content)===null||e===void 0?void 0:e.innerHTML)||void 0:""}setContent(t){var e;if(this.element)if(this.content&&this.contentEditable&&(this.contentClickListener&&this.content.removeEventListener("click",this.contentClickListener),this.contentBlurListener&&this.content.removeEventListener("blur",this.contentBlurListener)),(e=this.content)===null||e===void 0||e.remove(),t){if(typeof t=="string"){const r=this.start===this.end;this.content=sn("div",{style:{padding:`0.2em ${r?.2:.4}em`,display:"inline-block"},textContent:t})}else this.content=t;this.contentEditable&&(this.content.contentEditable="true",this.contentClickListener=r=>this.onContentClick(r),this.contentBlurListener=()=>this.onContentBlur(),this.content.addEventListener("click",this.contentClickListener),this.content.addEventListener("blur",this.contentBlurListener)),this.content.setAttribute("part","region-content"),this.element.appendChild(this.content),this.emit("content-changed")}else this.content=void 0}setOptions(t){var e,r;if(this.element){if(t.color&&(this.color=t.color,this.element.style.backgroundColor=this.color),t.drag!==void 0&&(this.drag=t.drag,this.element.style.cursor=this.drag?"grab":"default"),t.start!==void 0||t.end!==void 0){const s=this.start===this.end;this.start=this.clampPosition((e=t.start)!==null&&e!==void 0?e:this.start),this.end=this.clampPosition((r=t.end)!==null&&r!==void 0?r:s?this.start:this.end),this.renderPosition(),this.setPart()}if(t.content&&this.setContent(t.content),t.id&&(this.id=t.id,this.setPart()),t.resize!==void 0&&t.resize!==this.resize){const s=this.start===this.end;this.resize=t.resize,this.resize&&!s?this.addResizeHandles(this.element):this.removeResizeHandles(this.element)}t.resizeStart!==void 0&&(this.resizeStart=t.resizeStart),t.resizeEnd!==void 0&&(this.resizeEnd=t.resizeEnd)}}remove(){this.isRemoved=!0,this.emit("remove"),this.subscriptions.forEach((t=>t())),this.element&&(this.element.remove(),this.element=null)}}class li extends Xa{constructor(t){super(t),this.regions=[],this.regionsContainer=this.initRegionsContainer()}static create(t){return new li(t)}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.wavesurfer.getWrapper().appendChild(this.regionsContainer),this.subscriptions.push(this.wavesurfer.on("ready",(e=>{this.regions.forEach((r=>r._setTotalDuration(e)))})));let t=[];this.subscriptions.push(this.wavesurfer.on("timeupdate",(e=>{const r=this.regions.filter((s=>s.start<=e&&(s.end===s.start?s.start+.05:s.end)>=e));r.forEach((s=>{t.includes(s)||this.emit("region-in",s)})),t.forEach((s=>{r.includes(s)||this.emit("region-out",s)})),t=r})))}initRegionsContainer(){return sn("div",{part:"regions-container",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"5",pointerEvents:"none"}})}getRegions(){return this.regions}avoidOverlapping(t){t.content&&setTimeout((()=>{const e=t.content,r=e.getBoundingClientRect(),s=this.regions.map((o=>{if(o===t||!o.content)return 0;const i=o.content.getBoundingClientRect();return r.left<i.left+i.width&&i.left<r.left+r.width?i.height:0})).reduce(((o,i)=>o+i),0);e.style.marginTop=`${s}px`}),10)}adjustScroll(t){var e,r;if(!t.element)return;const s=(r=(e=this.wavesurfer)===null||e===void 0?void 0:e.getWrapper())===null||r===void 0?void 0:r.parentElement;if(!s)return;const{clientWidth:o,scrollWidth:i}=s;if(i<=o)return;const a=s.getBoundingClientRect(),c=t.element.getBoundingClientRect(),l=c.left-a.left,u=c.right-a.left;l<0?s.scrollLeft+=l:u>o&&(s.scrollLeft+=u-o)}virtualAppend(t,e,r){const s=()=>{if(!this.wavesurfer)return;const o=this.wavesurfer.getWidth(),i=this.wavesurfer.getScroll(),a=e.clientWidth,c=this.wavesurfer.getDuration(),l=Math.round(t.start/c*a),u=l+(Math.round((t.end-t.start)/c*a)||1)>i&&l<i+o;u&&!r.parentElement?e.appendChild(r):!u&&r.parentElement&&r.remove()};setTimeout((()=>{if(!this.wavesurfer||!t.element)return;s();const o=this.wavesurfer.on("scroll",s),i=this.wavesurfer.on("zoom",s);this.subscriptions.push(o,i),t.once("remove",(()=>{o(),i()}))}),0)}saveRegion(t){if(!t.element)return;this.virtualAppend(t,this.regionsContainer,t.element),this.avoidOverlapping(t),this.regions.push(t);const e=[t.on("update",(r=>{r||this.adjustScroll(t),this.emit("region-update",t,r)})),t.on("update-end",(r=>{this.avoidOverlapping(t),this.emit("region-updated",t,r)})),t.on("play",(r=>{var s;(s=this.wavesurfer)===null||s===void 0||s.play(t.start,r)})),t.on("click",(r=>{this.emit("region-clicked",t,r)})),t.on("dblclick",(r=>{this.emit("region-double-clicked",t,r)})),t.on("content-changed",(()=>{this.emit("region-content-changed",t)})),t.once("remove",(()=>{e.forEach((r=>r())),this.regions=this.regions.filter((r=>r!==t)),this.emit("region-removed",t)}))];this.subscriptions.push(...e),this.emit("region-created",t)}addRegion(t){var e,r;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");const s=this.wavesurfer.getDuration(),o=(r=(e=this.wavesurfer)===null||e===void 0?void 0:e.getDecodedData())===null||r===void 0?void 0:r.numberOfChannels,i=new cs(t,s,o);return this.emit("region-initialized",i),s?this.saveRegion(i):this.subscriptions.push(this.wavesurfer.once("ready",(a=>{i._setTotalDuration(a),this.saveRegion(i)}))),i}enableDragSelection(t,e=3){var r;const s=(r=this.wavesurfer)===null||r===void 0?void 0:r.getWrapper();if(!(s&&s instanceof HTMLElement))return()=>{};let o=null,i=0,a=0;return zn(s,((c,l,u)=>{o&&o._onUpdate(c,u>i?"end":"start",a)}),(c=>{var l,u;if(i=c,!this.wavesurfer)return;const p=this.wavesurfer.getDuration(),b=(u=(l=this.wavesurfer)===null||l===void 0?void 0:l.getDecodedData())===null||u===void 0?void 0:u.numberOfChannels,{width:g}=this.wavesurfer.getWrapper().getBoundingClientRect();a=i/g*p;const v=c/g*p,R=(c+5)/g*p;o=new cs(Object.assign(Object.assign({},t),{start:v,end:R}),p,b),this.emit("region-initialized",o),o.element&&this.regionsContainer.appendChild(o.element)}),(()=>{o&&(this.saveRegion(o),o.updatingSide=void 0,o=null)}),e)}clearRegions(){this.regions.slice().forEach((t=>t.remove())),this.regions=[]}destroy(){this.clearRegions(),super.destroy(),this.regionsContainer.remove()}}function Qa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mr={exports:{}},q={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls;function tc(){if(ls)return q;ls=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,e=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,i=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,l=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,b=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,I=n?Symbol.for("react.fundamental"):60117,N=n?Symbol.for("react.responder"):60118,W=n?Symbol.for("react.scope"):60119;function j(m){if(typeof m=="object"&&m!==null){var H=m.$$typeof;switch(H){case t:switch(m=m.type,m){case c:case l:case r:case o:case s:case p:return m;default:switch(m=m&&m.$$typeof,m){case a:case u:case v:case g:case i:return m;default:return H}}case e:return H}}}function E(m){return j(m)===l}return q.AsyncMode=c,q.ConcurrentMode=l,q.ContextConsumer=a,q.ContextProvider=i,q.Element=t,q.ForwardRef=u,q.Fragment=r,q.Lazy=v,q.Memo=g,q.Portal=e,q.Profiler=o,q.StrictMode=s,q.Suspense=p,q.isAsyncMode=function(m){return E(m)||j(m)===c},q.isConcurrentMode=E,q.isContextConsumer=function(m){return j(m)===a},q.isContextProvider=function(m){return j(m)===i},q.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===t},q.isForwardRef=function(m){return j(m)===u},q.isFragment=function(m){return j(m)===r},q.isLazy=function(m){return j(m)===v},q.isMemo=function(m){return j(m)===g},q.isPortal=function(m){return j(m)===e},q.isProfiler=function(m){return j(m)===o},q.isStrictMode=function(m){return j(m)===s},q.isSuspense=function(m){return j(m)===p},q.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===r||m===l||m===o||m===s||m===p||m===b||typeof m=="object"&&m!==null&&(m.$$typeof===v||m.$$typeof===g||m.$$typeof===i||m.$$typeof===a||m.$$typeof===u||m.$$typeof===I||m.$$typeof===N||m.$$typeof===W||m.$$typeof===R)},q.typeOf=j,q}var us;function ec(){return us||(us=1,Mr.exports=tc()),Mr.exports}var Cr,hs;function nc(){if(hs)return Cr;hs=1;var n=ec(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[n.ForwardRef]=r,o[n.Memo]=s;function i(v){return n.isMemo(v)?s:o[v.$$typeof]||t}var a=Object.defineProperty,c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,b=Object.prototype;function g(v,R,I){if(typeof R!="string"){if(b){var N=p(R);N&&N!==b&&g(v,N,I)}var W=c(R);l&&(W=W.concat(l(R)));for(var j=i(v),E=i(R),m=0;m<W.length;++m){var H=W[m];if(!e[H]&&!(I&&I[H])&&!(E&&E[H])&&!(j&&j[H])){var lt=u(R,H);try{a(v,H,lt)}catch{}}}}return v}return Cr=g,Cr}nc();var Nr={exports:{}},G={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ur,ds;function rc(){if(ds)return Ur;ds=1;var n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function r(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function s(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var i={},a=0;a<10;a++)i["_"+String.fromCharCode(a)]=a;var c=Object.getOwnPropertyNames(i).map(function(u){return i[u]});if(c.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(u){l[u]=u}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ur=s()?Object.assign:function(o,i){for(var a,c=r(o),l,u=1;u<arguments.length;u++){a=Object(arguments[u]);for(var p in a)t.call(a,p)&&(c[p]=a[p]);if(n){l=n(a);for(var b=0;b<l.length;b++)e.call(a,l[b])&&(c[l[b]]=a[l[b]])}}return c},Ur}/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs;function ic(){if(fs)return G;fs=1;var n=rc(),t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,g=typeof Symbol=="function"&&Symbol.iterator;function v(d){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+d,M=1;M<arguments.length;M++)w+="&args[]="+encodeURIComponent(arguments[M]);return"Minified React error #"+d+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I={};function N(d,w,M){this.props=d,this.context=w,this.refs=I,this.updater=M||R}N.prototype.isReactComponent={},N.prototype.setState=function(d,w){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error(v(85));this.updater.enqueueSetState(this,d,w,"setState")},N.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function W(){}W.prototype=N.prototype;function j(d,w,M){this.props=d,this.context=w,this.refs=I,this.updater=M||R}var E=j.prototype=new W;E.constructor=j,n(E,N.prototype),E.isPureReactComponent=!0;var m={current:null},H=Object.prototype.hasOwnProperty,lt={key:!0,ref:!0,__self:!0,__source:!0};function pt(d,w,M){var J,$={},at=null,Ft=null;if(w!=null)for(J in w.ref!==void 0&&(Ft=w.ref),w.key!==void 0&&(at=""+w.key),w)H.call(w,J)&&!lt.hasOwnProperty(J)&&($[J]=w[J]);var rt=arguments.length-2;if(rt===1)$.children=M;else if(1<rt){for(var mt=Array(rt),Zt=0;Zt<rt;Zt++)mt[Zt]=arguments[Zt+2];$.children=mt}if(d&&d.defaultProps)for(J in rt=d.defaultProps,rt)$[J]===void 0&&($[J]=rt[J]);return{$$typeof:e,type:d,key:at,ref:Ft,props:$,_owner:m.current}}function St(d,w){return{$$typeof:e,type:d.type,key:w,ref:d.ref,props:d.props,_owner:d._owner}}function bt(d){return typeof d=="object"&&d!==null&&d.$$typeof===e}function ye(d){var w={"=":"=0",":":"=2"};return"$"+(""+d).replace(/[=:]/g,function(M){return w[M]})}var Qe=/\/+/g,Mn=[];function is(d,w,M,J){if(Mn.length){var $=Mn.pop();return $.result=d,$.keyPrefix=w,$.func=M,$.context=J,$.count=0,$}return{result:d,keyPrefix:w,func:M,context:J,count:0}}function ss(d){d.result=null,d.keyPrefix=null,d.func=null,d.context=null,d.count=0,10>Mn.length&&Mn.push(d)}function Or(d,w,M,J){var $=typeof d;($==="undefined"||$==="boolean")&&(d=null);var at=!1;if(d===null)at=!0;else switch($){case"string":case"number":at=!0;break;case"object":switch(d.$$typeof){case e:case r:at=!0}}if(at)return M(J,d,w===""?"."+xr(d,0):w),1;if(at=0,w=w===""?".":w+":",Array.isArray(d))for(var Ft=0;Ft<d.length;Ft++){$=d[Ft];var rt=w+xr($,Ft);at+=Or($,rt,M,J)}else if(d===null||typeof d!="object"?rt=null:(rt=g&&d[g]||d["@@iterator"],rt=typeof rt=="function"?rt:null),typeof rt=="function")for(d=rt.call(d),Ft=0;!($=d.next()).done;)$=$.value,rt=w+xr($,Ft++),at+=Or($,rt,M,J);else if($==="object")throw M=""+d,Error(v(31,M==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":M,""));return at}function Fr(d,w,M){return d==null?0:Or(d,"",w,M)}function xr(d,w){return typeof d=="object"&&d!==null&&d.key!=null?ye(d.key):w.toString(36)}function Wa(d,w){d.func.call(d.context,w,d.count++)}function Ya(d,w,M){var J=d.result,$=d.keyPrefix;d=d.func.call(d.context,w,d.count++),Array.isArray(d)?Lr(d,J,M,function(at){return at}):d!=null&&(bt(d)&&(d=St(d,$+(!d.key||w&&w.key===d.key?"":(""+d.key).replace(Qe,"$&/")+"/")+M)),J.push(d))}function Lr(d,w,M,J,$){var at="";M!=null&&(at=(""+M).replace(Qe,"$&/")+"/"),w=is(w,at,J,$),Fr(d,Ya,w),ss(w)}var os={current:null};function Jt(){var d=os.current;if(d===null)throw Error(v(321));return d}var Ha={ReactCurrentDispatcher:os,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:m,IsSomeRendererActing:{current:!1},assign:n};return G.Children={map:function(d,w,M){if(d==null)return d;var J=[];return Lr(d,J,null,w,M),J},forEach:function(d,w,M){if(d==null)return d;w=is(null,null,w,M),Fr(d,Wa,w),ss(w)},count:function(d){return Fr(d,function(){return null},null)},toArray:function(d){var w=[];return Lr(d,w,null,function(M){return M}),w},only:function(d){if(!bt(d))throw Error(v(143));return d}},G.Component=N,G.Fragment=s,G.Profiler=i,G.PureComponent=j,G.StrictMode=o,G.Suspense=u,G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ha,G.cloneElement=function(d,w,M){if(d==null)throw Error(v(267,d));var J=n({},d.props),$=d.key,at=d.ref,Ft=d._owner;if(w!=null){if(w.ref!==void 0&&(at=w.ref,Ft=m.current),w.key!==void 0&&($=""+w.key),d.type&&d.type.defaultProps)var rt=d.type.defaultProps;for(mt in w)H.call(w,mt)&&!lt.hasOwnProperty(mt)&&(J[mt]=w[mt]===void 0&&rt!==void 0?rt[mt]:w[mt])}var mt=arguments.length-2;if(mt===1)J.children=M;else if(1<mt){rt=Array(mt);for(var Zt=0;Zt<mt;Zt++)rt[Zt]=arguments[Zt+2];J.children=rt}return{$$typeof:e,type:d.type,key:$,ref:at,props:J,_owner:Ft}},G.createContext=function(d,w){return w===void 0&&(w=null),d={$$typeof:c,_calculateChangedBits:w,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null},d.Provider={$$typeof:a,_context:d},d.Consumer=d},G.createElement=pt,G.createFactory=function(d){var w=pt.bind(null,d);return w.type=d,w},G.createRef=function(){return{current:null}},G.forwardRef=function(d){return{$$typeof:l,render:d}},G.isValidElement=bt,G.lazy=function(d){return{$$typeof:b,_ctor:d,_status:-1,_result:null}},G.memo=function(d,w){return{$$typeof:p,type:d,compare:w===void 0?null:w}},G.useCallback=function(d,w){return Jt().useCallback(d,w)},G.useContext=function(d,w){return Jt().useContext(d,w)},G.useDebugValue=function(){},G.useEffect=function(d,w){return Jt().useEffect(d,w)},G.useImperativeHandle=function(d,w,M){return Jt().useImperativeHandle(d,w,M)},G.useLayoutEffect=function(d,w){return Jt().useLayoutEffect(d,w)},G.useMemo=function(d,w){return Jt().useMemo(d,w)},G.useReducer=function(d,w,M){return Jt().useReducer(d,w,M)},G.useRef=function(d){return Jt().useRef(d)},G.useState=function(d){return Jt().useState(d)},G.version="16.14.0",G}var ps;function sc(){return ps||(ps=1,Nr.exports=ic()),Nr.exports}var oc=sc();const ac=Qa(oc),Xs=new WeakMap,Qr=new WeakMap;function nt(n){const t=Xs.get(n);return console.assert(t!=null,"'this' is expected an Event object, but got",n),t}function ys(n){if(n.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",n.passiveListener);return}n.event.cancelable&&(n.canceled=!0,typeof n.event.preventDefault=="function"&&n.event.preventDefault())}function Ve(n,t){Xs.set(this,{eventTarget:n,event:t,eventPhase:2,currentTarget:n,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const e=Object.keys(t);for(let r=0;r<e.length;++r){const s=e[r];s in this||Object.defineProperty(this,s,Qs(s))}}Ve.prototype={get type(){return nt(this).event.type},get target(){return nt(this).eventTarget},get currentTarget(){return nt(this).currentTarget},composedPath(){const n=nt(this).currentTarget;return n==null?[]:[n]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return nt(this).eventPhase},stopPropagation(){const n=nt(this);n.stopped=!0,typeof n.event.stopPropagation=="function"&&n.event.stopPropagation()},stopImmediatePropagation(){const n=nt(this);n.stopped=!0,n.immediateStopped=!0,typeof n.event.stopImmediatePropagation=="function"&&n.event.stopImmediatePropagation()},get bubbles(){return!!nt(this).event.bubbles},get cancelable(){return!!nt(this).event.cancelable},preventDefault(){ys(nt(this))},get defaultPrevented(){return nt(this).canceled},get composed(){return!!nt(this).event.composed},get timeStamp(){return nt(this).timeStamp},get srcElement(){return nt(this).eventTarget},get cancelBubble(){return nt(this).stopped},set cancelBubble(n){if(!n)return;const t=nt(this);t.stopped=!0,typeof t.event.cancelBubble=="boolean"&&(t.event.cancelBubble=!0)},get returnValue(){return!nt(this).canceled},set returnValue(n){n||ys(nt(this))},initEvent(){}};Object.defineProperty(Ve.prototype,"constructor",{value:Ve,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(Ve.prototype,window.Event.prototype),Qr.set(window.Event.prototype,Ve));function Qs(n){return{get(){return nt(this).event[n]},set(t){nt(this).event[n]=t},configurable:!0,enumerable:!0}}function cc(n){return{value(){const t=nt(this).event;return t[n].apply(t,arguments)},configurable:!0,enumerable:!0}}function lc(n,t){const e=Object.keys(t);if(e.length===0)return n;function r(s,o){n.call(this,s,o)}r.prototype=Object.create(n.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let s=0;s<e.length;++s){const o=e[s];if(!(o in n.prototype)){const a=typeof Object.getOwnPropertyDescriptor(t,o).value=="function";Object.defineProperty(r.prototype,o,a?cc(o):Qs(o))}}return r}function to(n){if(n==null||n===Object.prototype)return Ve;let t=Qr.get(n);return t==null&&(t=lc(to(Object.getPrototypeOf(n)),n),Qr.set(n,t)),t}function uc(n,t){const e=to(Object.getPrototypeOf(t));return new e(n,t)}function hc(n){return nt(n).immediateStopped}function dc(n,t){nt(n).eventPhase=t}function fc(n,t){nt(n).currentTarget=t}function bs(n,t){nt(n).passiveListener=t}const eo=new WeakMap,ms=1,gs=2,jn=3;function $n(n){return n!==null&&typeof n=="object"}function on(n){const t=eo.get(n);if(t==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function pc(n){return{get(){let e=on(this).get(n);for(;e!=null;){if(e.listenerType===jn)return e.listener;e=e.next}return null},set(t){typeof t!="function"&&!$n(t)&&(t=null);const e=on(this);let r=null,s=e.get(n);for(;s!=null;)s.listenerType===jn?r!==null?r.next=s.next:s.next!==null?e.set(n,s.next):e.delete(n):r=s,s=s.next;if(t!==null){const o={listener:t,listenerType:jn,passive:!1,once:!1,next:null};r===null?e.set(n,o):r.next=o}},configurable:!0,enumerable:!0}}function yc(n,t){Object.defineProperty(n,`on${t}`,pc(t))}function vs(n){function t(){le.call(this)}t.prototype=Object.create(le.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let e=0;e<n.length;++e)yc(t.prototype,n[e]);return t}function le(){if(this instanceof le){eo.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return vs(arguments[0]);if(arguments.length>0){const n=new Array(arguments.length);for(let t=0;t<arguments.length;++t)n[t]=arguments[t];return vs(n)}throw new TypeError("Cannot call a class as a function")}le.prototype={addEventListener(n,t,e){if(t==null)return;if(typeof t!="function"&&!$n(t))throw new TypeError("'listener' should be a function or an object.");const r=on(this),s=$n(e),i=(s?!!e.capture:!!e)?ms:gs,a={listener:t,listenerType:i,passive:s&&!!e.passive,once:s&&!!e.once,next:null};let c=r.get(n);if(c===void 0){r.set(n,a);return}let l=null;for(;c!=null;){if(c.listener===t&&c.listenerType===i)return;l=c,c=c.next}l.next=a},removeEventListener(n,t,e){if(t==null)return;const r=on(this),o=($n(e)?!!e.capture:!!e)?ms:gs;let i=null,a=r.get(n);for(;a!=null;){if(a.listener===t&&a.listenerType===o){i!==null?i.next=a.next:a.next!==null?r.set(n,a.next):r.delete(n);return}i=a,a=a.next}},dispatchEvent(n){if(n==null||typeof n.type!="string")throw new TypeError('"event.type" should be a string.');const t=on(this),e=n.type;let r=t.get(e);if(r==null)return!0;const s=uc(this,n);let o=null;for(;r!=null;){if(r.once?o!==null?o.next=r.next:r.next!==null?t.set(e,r.next):t.delete(e):o=r,bs(s,r.passive?r.listener:null),typeof r.listener=="function")try{r.listener.call(this,s)}catch(i){typeof console<"u"&&typeof console.error=="function"&&console.error(i)}else r.listenerType!==jn&&typeof r.listener.handleEvent=="function"&&r.listener.handleEvent(s);if(hc(s))break;r=r.next}return bs(s,null),dc(s,0),fc(s,null),!s.defaultPrevented}};Object.defineProperty(le.prototype,"constructor",{value:le,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(le.prototype,window.EventTarget.prototype);var f={};f.SIZEOF_SHORT=2;f.SIZEOF_INT=4;f.FILE_IDENTIFIER_LENGTH=4;f.Encoding={UTF8_BYTES:1,UTF16_STRING:2};f.int32=new Int32Array(2);f.float32=new Float32Array(f.int32.buffer);f.float64=new Float64Array(f.int32.buffer);f.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;f.Long=function(n,t){this.low=n|0,this.high=t|0};f.Long.create=function(n,t){return n==0&&t==0?f.Long.ZERO:new f.Long(n,t)};f.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296};f.Long.prototype.equals=function(n){return this.low==n.low&&this.high==n.high};f.Long.ZERO=new f.Long(0,0);f.Builder=function(n){if(n)var t=n;else var t=1024;this.bb=f.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};f.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};f.Builder.prototype.forceDefaults=function(n){this.force_defaults=n};f.Builder.prototype.dataBuffer=function(){return this.bb};f.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())};f.Builder.prototype.prep=function(n,t){n>this.minalign&&(this.minalign=n);for(var e=~(this.bb.capacity()-this.space+t)+1&n-1;this.space<e+n+t;){var r=this.bb.capacity();this.bb=f.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(e)};f.Builder.prototype.pad=function(n){for(var t=0;t<n;t++)this.bb.writeInt8(--this.space,0)};f.Builder.prototype.writeInt8=function(n){this.bb.writeInt8(this.space-=1,n)};f.Builder.prototype.writeInt16=function(n){this.bb.writeInt16(this.space-=2,n)};f.Builder.prototype.writeInt32=function(n){this.bb.writeInt32(this.space-=4,n)};f.Builder.prototype.writeInt64=function(n){this.bb.writeInt64(this.space-=8,n)};f.Builder.prototype.writeFloat32=function(n){this.bb.writeFloat32(this.space-=4,n)};f.Builder.prototype.writeFloat64=function(n){this.bb.writeFloat64(this.space-=8,n)};f.Builder.prototype.addInt8=function(n){this.prep(1,0),this.writeInt8(n)};f.Builder.prototype.addInt16=function(n){this.prep(2,0),this.writeInt16(n)};f.Builder.prototype.addInt32=function(n){this.prep(4,0),this.writeInt32(n)};f.Builder.prototype.addInt64=function(n){this.prep(8,0),this.writeInt64(n)};f.Builder.prototype.addFloat32=function(n){this.prep(4,0),this.writeFloat32(n)};f.Builder.prototype.addFloat64=function(n){this.prep(8,0),this.writeFloat64(n)};f.Builder.prototype.addFieldInt8=function(n,t,e){(this.force_defaults||t!=e)&&(this.addInt8(t),this.slot(n))};f.Builder.prototype.addFieldInt16=function(n,t,e){(this.force_defaults||t!=e)&&(this.addInt16(t),this.slot(n))};f.Builder.prototype.addFieldInt32=function(n,t,e){(this.force_defaults||t!=e)&&(this.addInt32(t),this.slot(n))};f.Builder.prototype.addFieldInt64=function(n,t,e){(this.force_defaults||!t.equals(e))&&(this.addInt64(t),this.slot(n))};f.Builder.prototype.addFieldFloat32=function(n,t,e){(this.force_defaults||t!=e)&&(this.addFloat32(t),this.slot(n))};f.Builder.prototype.addFieldFloat64=function(n,t,e){(this.force_defaults||t!=e)&&(this.addFloat64(t),this.slot(n))};f.Builder.prototype.addFieldOffset=function(n,t,e){(this.force_defaults||t!=e)&&(this.addOffset(t),this.slot(n))};f.Builder.prototype.addFieldStruct=function(n,t,e){t!=e&&(this.nested(t),this.slot(n))};f.Builder.prototype.nested=function(n){if(n!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")};f.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")};f.Builder.prototype.slot=function(n){this.vtable[n]=this.offset()};f.Builder.prototype.offset=function(){return this.bb.capacity()-this.space};f.Builder.growByteBuffer=function(n){var t=n.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var e=t<<1,r=f.ByteBuffer.allocate(e);return r.setPosition(e-t),r.bytes().set(n.bytes(),e-t),r};f.Builder.prototype.addOffset=function(n){this.prep(f.SIZEOF_INT,0),this.writeInt32(this.offset()-n+f.SIZEOF_INT)};f.Builder.prototype.startObject=function(n){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=n;for(var t=0;t<n;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()};f.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var n=this.offset(),t=this.vtable_in_use-1;t>=0&&this.vtable[t]==0;t--);for(var e=t+1;t>=0;t--)this.addInt16(this.vtable[t]!=0?n-this.vtable[t]:0);var r=2;this.addInt16(n-this.object_start);var s=(e+r)*f.SIZEOF_SHORT;this.addInt16(s);var o=0,i=this.space;t:for(t=0;t<this.vtables.length;t++){var a=this.bb.capacity()-this.vtables[t];if(s==this.bb.readInt16(a)){for(var c=f.SIZEOF_SHORT;c<s;c+=f.SIZEOF_SHORT)if(this.bb.readInt16(i+c)!=this.bb.readInt16(a+c))continue t;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-n,this.bb.writeInt32(this.space,o-n)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-n,this.offset()-n)),this.isNested=!1,n};f.Builder.prototype.finish=function(n,t){if(t){var e=t;if(this.prep(this.minalign,f.SIZEOF_INT+f.FILE_IDENTIFIER_LENGTH),e.length!=f.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+f.FILE_IDENTIFIER_LENGTH);for(var r=f.FILE_IDENTIFIER_LENGTH-1;r>=0;r--)this.writeInt8(e.charCodeAt(r))}this.prep(this.minalign,f.SIZEOF_INT),this.addOffset(n),this.bb.setPosition(this.space)};f.Builder.prototype.requiredField=function(n,t){var e=this.bb.capacity()-n,r=e-this.bb.readInt32(e),s=this.bb.readInt16(r+t)!=0;if(!s)throw new Error("FlatBuffers: field "+t+" must be set")};f.Builder.prototype.startVector=function(n,t,e){this.notNested(),this.vector_num_elems=t,this.prep(f.SIZEOF_INT,n*t),this.prep(e,n*t)};f.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()};f.Builder.prototype.createString=function(n){if(n instanceof Uint8Array)var t=n;else for(var t=[],e=0;e<n.length;){var r,s=n.charCodeAt(e++);if(s<55296||s>=56320)r=s;else{var o=n.charCodeAt(e++);r=(s<<10)+o+-56613888}r<128?t.push(r):(r<2048?t.push(r>>6&31|192):(r<65536?t.push(r>>12&15|224):t.push(r>>18&7|240,r>>12&63|128),t.push(r>>6&63|128)),t.push(r&63|128))}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var e=0,i=this.space,a=this.bb.bytes();e<t.length;e++)a[i++]=t[e];return this.endVector()};f.Builder.prototype.createLong=function(n,t){return f.Long.create(n,t)};f.ByteBuffer=function(n){this.bytes_=n,this.position_=0};f.ByteBuffer.allocate=function(n){return new f.ByteBuffer(new Uint8Array(n))};f.ByteBuffer.prototype.clear=function(){this.position_=0};f.ByteBuffer.prototype.bytes=function(){return this.bytes_};f.ByteBuffer.prototype.position=function(){return this.position_};f.ByteBuffer.prototype.setPosition=function(n){this.position_=n};f.ByteBuffer.prototype.capacity=function(){return this.bytes_.length};f.ByteBuffer.prototype.readInt8=function(n){return this.readUint8(n)<<24>>24};f.ByteBuffer.prototype.readUint8=function(n){return this.bytes_[n]};f.ByteBuffer.prototype.readInt16=function(n){return this.readUint16(n)<<16>>16};f.ByteBuffer.prototype.readUint16=function(n){return this.bytes_[n]|this.bytes_[n+1]<<8};f.ByteBuffer.prototype.readInt32=function(n){return this.bytes_[n]|this.bytes_[n+1]<<8|this.bytes_[n+2]<<16|this.bytes_[n+3]<<24};f.ByteBuffer.prototype.readUint32=function(n){return this.readInt32(n)>>>0};f.ByteBuffer.prototype.readInt64=function(n){return new f.Long(this.readInt32(n),this.readInt32(n+4))};f.ByteBuffer.prototype.readUint64=function(n){return new f.Long(this.readUint32(n),this.readUint32(n+4))};f.ByteBuffer.prototype.readFloat32=function(n){return f.int32[0]=this.readInt32(n),f.float32[0]};f.ByteBuffer.prototype.readFloat64=function(n){return f.int32[f.isLittleEndian?0:1]=this.readInt32(n),f.int32[f.isLittleEndian?1:0]=this.readInt32(n+4),f.float64[0]};f.ByteBuffer.prototype.writeInt8=function(n,t){this.bytes_[n]=t};f.ByteBuffer.prototype.writeUint8=function(n,t){this.bytes_[n]=t};f.ByteBuffer.prototype.writeInt16=function(n,t){this.bytes_[n]=t,this.bytes_[n+1]=t>>8};f.ByteBuffer.prototype.writeUint16=function(n,t){this.bytes_[n]=t,this.bytes_[n+1]=t>>8};f.ByteBuffer.prototype.writeInt32=function(n,t){this.bytes_[n]=t,this.bytes_[n+1]=t>>8,this.bytes_[n+2]=t>>16,this.bytes_[n+3]=t>>24};f.ByteBuffer.prototype.writeUint32=function(n,t){this.bytes_[n]=t,this.bytes_[n+1]=t>>8,this.bytes_[n+2]=t>>16,this.bytes_[n+3]=t>>24};f.ByteBuffer.prototype.writeInt64=function(n,t){this.writeInt32(n,t.low),this.writeInt32(n+4,t.high)};f.ByteBuffer.prototype.writeUint64=function(n,t){this.writeUint32(n,t.low),this.writeUint32(n+4,t.high)};f.ByteBuffer.prototype.writeFloat32=function(n,t){f.float32[0]=t,this.writeInt32(n,f.int32[0])};f.ByteBuffer.prototype.writeFloat64=function(n,t){f.float64[0]=t,this.writeInt32(n,f.int32[f.isLittleEndian?0:1]),this.writeInt32(n+4,f.int32[f.isLittleEndian?1:0])};f.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+f.SIZEOF_INT+f.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var n="",t=0;t<f.FILE_IDENTIFIER_LENGTH;t++)n+=String.fromCharCode(this.readInt8(this.position_+f.SIZEOF_INT+t));return n};f.ByteBuffer.prototype.__offset=function(n,t){var e=n-this.readInt32(n);return t<this.readInt16(e)?this.readInt16(e+t):0};f.ByteBuffer.prototype.__union=function(n,t){return n.bb_pos=t+this.readInt32(t),n.bb=this,n};f.ByteBuffer.prototype.__string=function(n,t){n+=this.readInt32(n);var e=this.readInt32(n),r="",s=0;if(n+=f.SIZEOF_INT,t===f.Encoding.UTF8_BYTES)return this.bytes_.subarray(n,n+e);for(;s<e;){var o,i=this.readUint8(n+s++);if(i<192)o=i;else{var a=this.readUint8(n+s++);if(i<224)o=(i&31)<<6|a&63;else{var c=this.readUint8(n+s++);if(i<240)o=(i&15)<<12|(a&63)<<6|c&63;else{var l=this.readUint8(n+s++);o=(i&7)<<18|(a&63)<<12|(c&63)<<6|l&63}}}o<65536?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return r};f.ByteBuffer.prototype.__indirect=function(n){return n+this.readInt32(n)};f.ByteBuffer.prototype.__vector=function(n){return n+this.readInt32(n)+f.SIZEOF_INT};f.ByteBuffer.prototype.__vector_len=function(n){return this.readInt32(n+this.readInt32(n))};f.ByteBuffer.prototype.__has_identifier=function(n){if(n.length!=f.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+f.FILE_IDENTIFIER_LENGTH);for(var t=0;t<f.FILE_IDENTIFIER_LENGTH;t++)if(n.charCodeAt(t)!=this.readInt8(this.position_+f.SIZEOF_INT+t))return!1;return!0};f.ByteBuffer.prototype.createLong=function(n,t){return f.Long.create(n,t)};function te(n,t,e){return t<=n&&n<=e}function fr(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function bc(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var o=t.charCodeAt(r);if(o<55296||o>57343)s.push(o);else if(56320<=o&&o<=57343)s.push(65533);else if(55296<=o&&o<=56319)if(r===e-1)s.push(65533);else{var i=n.charCodeAt(r+1);if(56320<=i&&i<=57343){var a=o&1023,c=i&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function mc(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var qn=-1;function ui(n){this.tokens=[].slice.call(n)}ui.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():qn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Pe=-1;function Rr(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Gn="utf-8";function Kn(n,t){if(!(this instanceof Kn))return new Kn(n,t);if(n=n!==void 0?String(n).toLowerCase():Gn,n!==Gn)throw new Error("Encoding not supported. Only utf-8 is supported");t=fr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Kn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=fr(e),this._streaming||(this._decoder=new gc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ui(r),o=[],i;!s.endOfStream()&&(i=this._decoder.handler(s,s.read()),i!==Pe);)i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));if(!this._streaming){do{if(i=this._decoder.handler(s,s.read()),i===Pe)break;i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i))}while(!s.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),mc(o)}};function Jn(n,t){if(!(this instanceof Jn))return new Jn(n,t);if(n=n!==void 0?String(n).toLowerCase():Gn,n!==Gn)throw new Error("Encoding not supported. Only utf-8 is supported");t=fr(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Jn.prototype={encode:function(t,e){t=t?String(t):"",e=fr(e),this._streaming||(this._encoder=new vc(this._options)),this._streaming=!!e.stream;for(var r=[],s=new ui(bc(t)),o;!s.endOfStream()&&(o=this._encoder.handler(s,s.read()),o!==Pe);)Array.isArray(o)?r.push.apply(r,o):r.push(o);if(!this._streaming){for(;o=this._encoder.handler(s,s.read()),o!==Pe;)Array.isArray(o)?r.push.apply(r,o):r.push(o);this._encoder=null}return new Uint8Array(r)}};function gc(n){var t=n.fatal,e=0,r=0,s=0,o=128,i=191;this.handler=function(a,c){if(c===qn&&s!==0)return s=0,Rr(t);if(c===qn)return Pe;if(s===0){if(te(c,0,127))return c;if(te(c,194,223))s=1,e=c-192;else if(te(c,224,239))c===224&&(o=160),c===237&&(i=159),s=2,e=c-224;else if(te(c,240,244))c===240&&(o=144),c===244&&(i=143),s=3,e=c-240;else return Rr(t);return e=e<<6*s,null}if(!te(c,o,i))return e=s=r=0,o=128,i=191,a.prepend(c),Rr(t);if(o=128,i=191,r+=1,e+=c-128<<6*(s-r),r!==s)return null;var l=e;return e=s=r=0,l}}function vc(n){n.fatal,this.handler=function(t,e){if(e===qn)return Pe;if(te(e,0,127))return e;var r,s;te(e,128,2047)?(r=1,s=192):te(e,2048,65535)?(r=2,s=224):te(e,65536,1114111)&&(r=3,s=240);for(var o=[(e>>6*r)+s];r>0;){var i=e>>6*(r-1);o.push(128|i&63),r-=1}return o}}const Zn=typeof Buffer=="function"?Buffer:null,no=typeof TextDecoder=="function"&&typeof TextEncoder=="function",ti=(n=>{if(no||!Zn){const t=new n("utf-8");return e=>t.decode(e)}return t=>{const{buffer:e,byteOffset:r,length:s}=V(t);return Zn.from(e,r,s).toString()}})(typeof TextDecoder<"u"?TextDecoder:Kn),pr=(n=>{if(no||!Zn){const t=new n;return e=>t.encode(e)}return(t="")=>V(Zn.from(t,"utf8"))})(typeof TextEncoder<"u"?TextEncoder:Jn),it=Object.freeze({done:!0,value:void 0});class ws{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Ae{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class wc extends Ae{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}async cancel(t){await this.return(t)}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(it);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Tt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Tt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}async throw(t){return await this.abort(t),it}async return(t){return await this.close(),it}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,r)=>{this.resolvers.push({resolve:e,reject:r})}):Promise.resolve(it)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(`${this} is closed`)}}const[_c,yr]=(()=>{const n=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw n()}return t.asIntN=()=>{throw n()},t.asUintN=()=>{throw n()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Je]=(()=>{const n=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw n()}static from(){throw n()}constructor(){throw n()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[_n]=(()=>{const n=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw n()}static from(){throw n()}constructor(){throw n()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),Sc=n=>typeof n=="number",ro=n=>typeof n=="boolean",Lt=n=>typeof n=="function",Dt=n=>n!=null&&Object(n)===n,ue=n=>Dt(n)&&Lt(n.then),Rt=n=>Dt(n)&&Lt(n[Symbol.iterator]),re=n=>Dt(n)&&Lt(n[Symbol.asyncIterator]),ei=n=>Dt(n)&&Dt(n.schema),io=n=>Dt(n)&&"done"in n&&"value"in n,so=n=>Dt(n)&&Lt(n.stat)&&Sc(n.fd),oo=n=>Dt(n)&&hi(n.body),Ic=n=>Dt(n)&&Lt(n.abort)&&Lt(n.getWriter)&&!(n instanceof Ae),hi=n=>Dt(n)&&Lt(n.cancel)&&Lt(n.getReader)&&!(n instanceof Ae),Bc=n=>Dt(n)&&Lt(n.end)&&Lt(n.write)&&ro(n.writable)&&!(n instanceof Ae),ao=n=>Dt(n)&&Lt(n.read)&&Lt(n.pipe)&&ro(n.readable)&&!(n instanceof Ae);var Tc=f.ByteBuffer;const di=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Ac(n){let t=n[0]?[n[0]]:[],e,r,s,o;for(let i,a,c=0,l=0,u=n.length;++c<u;){if(i=t[l],a=n[c],!i||!a||i.buffer!==a.buffer||a.byteOffset<i.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:e,byteLength:s}=i,{byteOffset:r,byteLength:o}=a,e+s<r||r+o<e){a&&(t[++l]=a);continue}t[l]=new Uint8Array(i.buffer,e,r-e+o)}return t}function Xn(n,t,e=0,r=t.byteLength){const s=n.byteLength,o=new Uint8Array(n.buffer,n.byteOffset,s),i=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,s));return o.set(i,e),n}function Yt(n,t){let e=Ac(n),r=e.reduce((u,p)=>u+p.byteLength,0),s,o,i,a=0,c=-1,l=Math.min(t||1/0,r);for(let u=e.length;++c<u;){if(s=e[c],o=s.subarray(0,Math.min(s.length,l-a)),l<=a+o.length){o.length<s.length?e[c]=s.subarray(o.length):o.length===s.length&&c++,i?Xn(i,o,a):i=o;break}Xn(i||(i=new Uint8Array(l)),o,a),a+=o.length}return[i||new Uint8Array(0),e.slice(c),r-(i?i.byteLength:0)]}function K(n,t){let e=io(t)?t.value:t;return e instanceof n?n===Uint8Array?new n(e.buffer,e.byteOffset,e.byteLength):e:e?(typeof e=="string"&&(e=pr(e)),e instanceof ArrayBuffer?new n(e):e instanceof di?new n(e):e instanceof Tc?K(n,e.bytes()):ArrayBuffer.isView(e)?e.byteLength<=0?new n(0):new n(e.buffer,e.byteOffset,e.byteLength/n.BYTES_PER_ELEMENT):n.from(e)):new n(0)}const tn=n=>K(Int32Array,n),Dc=n=>K(Je,n),V=n=>K(Uint8Array,n),Oc=n=>K(_n,n),ni=n=>(n.next(),n);function*Fc(n,t){const e=function*(s){yield s},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof di?e(t):Rt(t)?t:e(t);yield*ni((function*(s){let o=null;do o=s.next(yield K(n,o));while(!o.done)})(r[Symbol.iterator]()))}const xc=n=>Fc(Uint8Array,n);async function*co(n,t){if(ue(t))return yield*co(n,await t);const e=async function*(o){yield await o},r=async function*(o){yield*ni((function*(i){let a=null;do a=i.next(yield a&&a.value);while(!a.done)})(o[Symbol.iterator]()))},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof di?e(t):Rt(t)?r(t):re(t)?t:e(t);yield*ni((async function*(o){let i=null;do i=await o.next(yield K(n,i));while(!i.done)})(s[Symbol.asyncIterator]()))}const Lc=n=>co(Uint8Array,n);function fi(n,t,e){if(n!==0){e=e.slice(0,t+1);for(let r=-1;++r<=t;)e[r]+=n}return e}function Ec(n,t){let e=0,r=n.length;if(r!==t.length)return!1;if(r>0)do if(n[e]!==t[e])return!1;while(++e<r);return!0}const Tt={fromIterable(n){return Nn(Mc(n))},fromAsyncIterable(n){return Nn(Cc(n))},fromDOMStream(n){return Nn(Nc(n))},fromNodeStream(n){return Nn(Rc(n))},toDOMStream(n,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(n,t){throw new Error('"toNodeStream" not available in this environment')}},Nn=n=>(n.next(),n);function*Mc(n){let t,e=!1,r=[],s,o,i,a=0;function c(){return o==="peek"?Yt(r,i)[0]:([s,r,a]=Yt(r,i),s)}({cmd:o,size:i}=yield null);let l=xc(n)[Symbol.iterator]();try{do if({done:t,value:s}=isNaN(i-a)?l.next(void 0):l.next(i-a),!t&&s.byteLength>0&&(r.push(s),a+=s.byteLength),t||i<=a)do({cmd:o,size:i}=yield c());while(i<a);while(!t)}catch(u){(e=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{e===!1&&typeof l.return=="function"&&l.return()}}async function*Cc(n){let t,e=!1,r=[],s,o,i,a=0;function c(){return o==="peek"?Yt(r,i)[0]:([s,r,a]=Yt(r,i),s)}({cmd:o,size:i}=yield null);let l=Lc(n)[Symbol.asyncIterator]();try{do if({done:t,value:s}=isNaN(i-a)?await l.next(void 0):await l.next(i-a),!t&&s.byteLength>0&&(r.push(s),a+=s.byteLength),t||i<=a)do({cmd:o,size:i}=yield c());while(i<a);while(!t)}catch(u){(e=!0)&&typeof l.throw=="function"&&await l.throw(u)}finally{e===!1&&typeof l.return=="function"&&await l.return()}}async function*Nc(n){let t=!1,e=!1,r=[],s,o,i,a=0;function c(){return o==="peek"?Yt(r,i)[0]:([s,r,a]=Yt(r,i),s)}({cmd:o,size:i}=yield null);let l=new Uc(n);try{do if({done:t,value:s}=isNaN(i-a)?await l.read(void 0):await l.read(i-a),!t&&s.byteLength>0&&(r.push(V(s)),a+=s.byteLength),t||i<=a)do({cmd:o,size:i}=yield c());while(i<a);while(!t)}catch(u){(e=!0)&&await l.cancel(u)}finally{e===!1?await l.cancel():n.locked&&l.releaseLock()}}class Uc{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch{this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(t){const{reader:e,source:r}=this;e&&await e.cancel(t).catch(()=>{}),r&&r.locked&&this.releaseLock()}async read(t){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const e=!this.supportsBYOB||typeof t!="number"?await this.getDefaultReader().read():await this.readFromBYOBReader(t);return!e.done&&(e.value=V(e)),e}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch(()=>{})),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch(()=>{})),this.reader=this.byobReader}async readFromBYOBReader(t){return await lo(this.getBYOBReader(),new ArrayBuffer(t),0,t)}}async function lo(n,t,e,r){if(e>=r)return{done:!1,value:new Uint8Array(t,0,r)};const{done:s,value:o}=await n.read(new Uint8Array(t,e,r-e));return(e+=o.byteLength)<r&&!s?await lo(n,o.buffer,e,r):{done:s,value:new Uint8Array(o.buffer,0,e)}}const kr=(n,t)=>{let e=s=>r([t,s]),r;return[t,e,new Promise(s=>(r=s)&&n.once(t,e))]};async function*Rc(n){let t=[],e="error",r=!1,s=null,o,i,a=0,c=[],l;function u(){return o==="peek"?Yt(c,i)[0]:([l,c,a]=Yt(c,i),l)}if({cmd:o,size:i}=yield null,n.isTTY)return yield new Uint8Array(0);try{t[0]=kr(n,"end"),t[1]=kr(n,"error");do{if(t[2]=kr(n,"readable"),[e,s]=await Promise.race(t.map(b=>b[2])),e==="error")break;if((r=e==="end")||(isFinite(i-a)?(l=V(n.read(i-a)),l.byteLength<i-a&&(l=V(n.read(void 0)))):l=V(n.read(void 0)),l.byteLength>0&&(c.push(l),a+=l.byteLength)),r||i<=a)do({cmd:o,size:i}=yield u());while(i<a)}while(!r)}finally{await p(t,e==="error"?s:null)}function p(b,g){return l=c=null,new Promise(async(v,R)=>{for(const[I,N]of b)n.off(I,N);try{const I=n.destroy;I&&I.call(n,g),g=void 0}catch(I){g=I||g}finally{g!=null?R(g):v()}})}}class P{}var y;(function(n){(function(t){(function(e){(function(r){(function(s){s[s.V1=0]="V1",s[s.V2=1]="V2",s[s.V3=2]="V3",s[s.V4=3]="V4"})(r.MetadataVersion||(r.MetadataVersion={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.Sparse=0]="Sparse",s[s.Dense=1]="Dense"})(r.UnionMode||(r.UnionMode={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.HALF=0]="HALF",s[s.SINGLE=1]="SINGLE",s[s.DOUBLE=2]="DOUBLE"})(r.Precision||(r.Precision={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.DAY=0]="DAY",s[s.MILLISECOND=1]="MILLISECOND"})(r.DateUnit||(r.DateUnit={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.SECOND=0]="SECOND",s[s.MILLISECOND=1]="MILLISECOND",s[s.MICROSECOND=2]="MICROSECOND",s[s.NANOSECOND=3]="NANOSECOND"})(r.TimeUnit||(r.TimeUnit={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.YEAR_MONTH=0]="YEAR_MONTH",s[s.DAY_TIME=1]="DAY_TIME"})(r.IntervalUnit||(r.IntervalUnit={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.NONE=0]="NONE",s[s.Null=1]="Null",s[s.Int=2]="Int",s[s.FloatingPoint=3]="FloatingPoint",s[s.Binary=4]="Binary",s[s.Utf8=5]="Utf8",s[s.Bool=6]="Bool",s[s.Decimal=7]="Decimal",s[s.Date=8]="Date",s[s.Time=9]="Time",s[s.Timestamp=10]="Timestamp",s[s.Interval=11]="Interval",s[s.List=12]="List",s[s.Struct_=13]="Struct_",s[s.Union=14]="Union",s[s.FixedSizeBinary=15]="FixedSizeBinary",s[s.FixedSizeList=16]="FixedSizeList",s[s.Map=17]="Map",s[s.Duration=18]="Duration",s[s.LargeBinary=19]="LargeBinary",s[s.LargeUtf8=20]="LargeUtf8",s[s.LargeList=21]="LargeList"})(r.Type||(r.Type={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.Little=0]="Little",s[s.Big=1]="Big"})(r.Endianness||(r.Endianness={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsNull(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startNull(i){i.startObject(0)}static endNull(i){return i.endObject()}static createNull(i){return s.startNull(i),s.endNull(i)}}r.Null=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsStruct_(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startStruct_(i){i.startObject(0)}static endStruct_(i){return i.endObject()}static createStruct_(i){return s.startStruct_(i),s.endStruct_(i)}}r.Struct_=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsList(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startList(i){i.startObject(0)}static endList(i){return i.endObject()}static createList(i){return s.startList(i),s.endList(i)}}r.List=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsLargeList(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startLargeList(i){i.startObject(0)}static endLargeList(i){return i.endObject()}static createLargeList(i){return s.startLargeList(i),s.endLargeList(i)}}r.LargeList=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsFixedSizeList(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}listSize(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}static startFixedSizeList(i){i.startObject(1)}static addListSize(i,a){i.addFieldInt32(0,a,0)}static endFixedSizeList(i){return i.endObject()}static createFixedSizeList(i,a){return s.startFixedSizeList(i),s.addListSize(i,a),s.endFixedSizeList(i)}}r.FixedSizeList=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsMap(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}keysSorted(){let i=this.bb.__offset(this.bb_pos,4);return i?!!this.bb.readInt8(this.bb_pos+i):!1}static startMap(i){i.startObject(1)}static addKeysSorted(i,a){i.addFieldInt8(0,+a,0)}static endMap(i){return i.endObject()}static createMap(i,a){return s.startMap(i),s.addKeysSorted(i,a),s.endMap(i)}}r.Map=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsUnion(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}mode(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(i){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt32(this.bb.__vector(this.bb_pos+a)+i*4):0}typeIdsLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}typeIdsArray(){let i=this.bb.__offset(this.bb_pos,6);return i?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}static startUnion(i){i.startObject(2)}static addMode(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(i,a){i.addFieldOffset(1,a,0)}static createTypeIdsVector(i,a){i.startVector(4,a.length,4);for(let c=a.length-1;c>=0;c--)i.addInt32(a[c]);return i.endVector()}static startTypeIdsVector(i,a){i.startVector(4,a,4)}static endUnion(i){return i.endObject()}static createUnion(i,a,c){return s.startUnion(i),s.addMode(i,a),s.addTypeIds(i,c),s.endUnion(i)}}r.Union=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsInt(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}bitWidth(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}isSigned(){let i=this.bb.__offset(this.bb_pos,6);return i?!!this.bb.readInt8(this.bb_pos+i):!1}static startInt(i){i.startObject(2)}static addBitWidth(i,a){i.addFieldInt32(0,a,0)}static addIsSigned(i,a){i.addFieldInt8(1,+a,0)}static endInt(i){return i.endObject()}static createInt(i,a,c){return s.startInt(i),s.addBitWidth(i,a),s.addIsSigned(i,c),s.endInt(i)}}r.Int=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsFloatingPoint(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}precision(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(i){i.startObject(1)}static addPrecision(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(i){return i.endObject()}static createFloatingPoint(i,a){return s.startFloatingPoint(i),s.addPrecision(i,a),s.endFloatingPoint(i)}}r.FloatingPoint=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsUtf8(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startUtf8(i){i.startObject(0)}static endUtf8(i){return i.endObject()}static createUtf8(i){return s.startUtf8(i),s.endUtf8(i)}}r.Utf8=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsBinary(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startBinary(i){i.startObject(0)}static endBinary(i){return i.endObject()}static createBinary(i){return s.startBinary(i),s.endBinary(i)}}r.Binary=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsLargeUtf8(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startLargeUtf8(i){i.startObject(0)}static endLargeUtf8(i){return i.endObject()}static createLargeUtf8(i){return s.startLargeUtf8(i),s.endLargeUtf8(i)}}r.LargeUtf8=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsLargeBinary(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startLargeBinary(i){i.startObject(0)}static endLargeBinary(i){return i.endObject()}static createLargeBinary(i){return s.startLargeBinary(i),s.endLargeBinary(i)}}r.LargeBinary=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsFixedSizeBinary(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}byteWidth(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}static startFixedSizeBinary(i){i.startObject(1)}static addByteWidth(i,a){i.addFieldInt32(0,a,0)}static endFixedSizeBinary(i){return i.endObject()}static createFixedSizeBinary(i,a){return s.startFixedSizeBinary(i),s.addByteWidth(i,a),s.endFixedSizeBinary(i)}}r.FixedSizeBinary=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsBool(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}static startBool(i){i.startObject(0)}static endBool(i){return i.endObject()}static createBool(i){return s.startBool(i),s.endBool(i)}}r.Bool=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsDecimal(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}precision(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}scale(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb_pos+i):0}static startDecimal(i){i.startObject(2)}static addPrecision(i,a){i.addFieldInt32(0,a,0)}static addScale(i,a){i.addFieldInt32(1,a,0)}static endDecimal(i){return i.endObject()}static createDecimal(i,a,c){return s.startDecimal(i),s.addPrecision(i,a),s.addScale(i,c),s.endDecimal(i)}}r.Decimal=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsDate(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}unit(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(i){i.startObject(1)}static addUnit(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(i){return i.endObject()}static createDate(i,a){return s.startDate(i),s.addUnit(i,a),s.endDate(i)}}r.Date=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsTime(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}unit(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb_pos+i):32}static startTime(i){i.startObject(2)}static addUnit(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(i,a){i.addFieldInt32(1,a,32)}static endTime(i){return i.endObject()}static createTime(i,a,c){return s.startTime(i),s.addUnit(i,a),s.addBitWidth(i,c),s.endTime(i)}}r.Time=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsTimestamp(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}unit(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(i){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,i):null}static startTimestamp(i){i.startObject(2)}static addUnit(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(i,a){i.addFieldOffset(1,a,0)}static endTimestamp(i){return i.endObject()}static createTimestamp(i,a,c){return s.startTimestamp(i),s.addUnit(i,a),s.addTimezone(i,c),s.endTimestamp(i)}}r.Timestamp=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsInterval(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}unit(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(i){i.startObject(1)}static addUnit(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(i){return i.endObject()}static createInterval(i,a){return s.startInterval(i),s.addUnit(i,a),s.endInterval(i)}}r.Interval=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsDuration(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}unit(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(i){i.startObject(1)}static addUnit(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(i){return i.endObject()}static createDuration(i,a){return s.startDuration(i),s.addUnit(i,a),s.endDuration(i)}}r.Duration=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsKeyValue(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}key(i){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,i):null}value(i){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,i):null}static startKeyValue(i){i.startObject(2)}static addKey(i,a){i.addFieldOffset(0,a,0)}static addValue(i,a){i.addFieldOffset(1,a,0)}static endKeyValue(i){return i.endObject()}static createKeyValue(i,a,c){return s.startKeyValue(i),s.addKey(i,a),s.addValue(i,c),s.endKeyValue(i)}}r.KeyValue=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsDictionaryEncoding(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}id(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}indexType(i){let a=this.bb.__offset(this.bb_pos,6);return a?(i||new n.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}isOrdered(){let i=this.bb.__offset(this.bb_pos,8);return i?!!this.bb.readInt8(this.bb_pos+i):!1}static startDictionaryEncoding(i){i.startObject(3)}static addId(i,a){i.addFieldInt64(0,a,i.createLong(0,0))}static addIndexType(i,a){i.addFieldOffset(1,a,0)}static addIsOrdered(i,a){i.addFieldInt8(2,+a,0)}static endDictionaryEncoding(i){return i.endObject()}static createDictionaryEncoding(i,a,c,l){return s.startDictionaryEncoding(i),s.addId(i,a),s.addIndexType(i,c),s.addIsOrdered(i,l),s.endDictionaryEncoding(i)}}r.DictionaryEncoding=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsField(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}name(i){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,i):null}nullable(){let i=this.bb.__offset(this.bb_pos,6);return i?!!this.bb.readInt8(this.bb_pos+i):!1}typeType(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.readUint8(this.bb_pos+i):n.apache.arrow.flatbuf.Type.NONE}type(i){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__union(i,this.bb_pos+a):null}dictionary(i){let a=this.bb.__offset(this.bb_pos,12);return a?(i||new n.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}children(i,a){let c=this.bb.__offset(this.bb_pos,14);return c?(a||new n.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+i*4),this.bb):null}childrenLength(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__vector_len(this.bb_pos+i):0}customMetadata(i,a){let c=this.bb.__offset(this.bb_pos,16);return c?(a||new n.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+i*4),this.bb):null}customMetadataLength(){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__vector_len(this.bb_pos+i):0}static startField(i){i.startObject(7)}static addName(i,a){i.addFieldOffset(0,a,0)}static addNullable(i,a){i.addFieldInt8(1,+a,0)}static addTypeType(i,a){i.addFieldInt8(2,a,n.apache.arrow.flatbuf.Type.NONE)}static addType(i,a){i.addFieldOffset(3,a,0)}static addDictionary(i,a){i.addFieldOffset(4,a,0)}static addChildren(i,a){i.addFieldOffset(5,a,0)}static createChildrenVector(i,a){i.startVector(4,a.length,4);for(let c=a.length-1;c>=0;c--)i.addOffset(a[c]);return i.endVector()}static startChildrenVector(i,a){i.startVector(4,a,4)}static addCustomMetadata(i,a){i.addFieldOffset(6,a,0)}static createCustomMetadataVector(i,a){i.startVector(4,a.length,4);for(let c=a.length-1;c>=0;c--)i.addOffset(a[c]);return i.endVector()}static startCustomMetadataVector(i,a){i.startVector(4,a,4)}static endField(i){return i.endObject()}static createField(i,a,c,l,u,p,b,g){return s.startField(i),s.addName(i,a),s.addNullable(i,c),s.addTypeType(i,l),s.addType(i,u),s.addDictionary(i,p),s.addChildren(i,b),s.addCustomMetadata(i,g),s.endField(i)}}r.Field=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(i,a,c){return i.prep(8,16),i.writeInt64(c),i.writeInt64(a),i.offset()}}r.Buffer=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsSchema(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}endianness(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):n.apache.arrow.flatbuf.Endianness.Little}fields(i,a){let c=this.bb.__offset(this.bb_pos,6);return c?(a||new n.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+i*4),this.bb):null}fieldsLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}customMetadata(i,a){let c=this.bb.__offset(this.bb_pos,8);return c?(a||new n.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+i*4),this.bb):null}customMetadataLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startSchema(i){i.startObject(3)}static addEndianness(i,a){i.addFieldInt16(0,a,n.apache.arrow.flatbuf.Endianness.Little)}static addFields(i,a){i.addFieldOffset(1,a,0)}static createFieldsVector(i,a){i.startVector(4,a.length,4);for(let c=a.length-1;c>=0;c--)i.addOffset(a[c]);return i.endVector()}static startFieldsVector(i,a){i.startVector(4,a,4)}static addCustomMetadata(i,a){i.addFieldOffset(2,a,0)}static createCustomMetadataVector(i,a){i.startVector(4,a.length,4);for(let c=a.length-1;c>=0;c--)i.addOffset(a[c]);return i.endVector()}static startCustomMetadataVector(i,a){i.startVector(4,a,4)}static endSchema(i){return i.endObject()}static finishSchemaBuffer(i,a){i.finish(a)}static createSchema(i,a,c,l){return s.startSchema(i),s.addEndianness(i,a),s.addFields(i,c),s.addCustomMetadata(i,l),s.endSchema(i)}}r.Schema=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(y||(y={}));var ft;(function(n){(function(t){(function(e){(function(r){r.Schema=y.apache.arrow.flatbuf.Schema})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(ft||(ft={}));(function(n){(function(t){(function(e){(function(r){(function(s){s[s.NONE=0]="NONE",s[s.Schema=1]="Schema",s[s.DictionaryBatch=2]="DictionaryBatch",s[s.RecordBatch=3]="RecordBatch",s[s.Tensor=4]="Tensor",s[s.SparseTensor=5]="SparseTensor"})(r.MessageHeader||(r.MessageHeader={}))})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(ft||(ft={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(i,a,c){return i.prep(8,16),i.writeInt64(c),i.writeInt64(a),i.offset()}}r.FieldNode=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(ft||(ft={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsRecordBatch(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}length(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}nodes(i,a){let c=this.bb.__offset(this.bb_pos,6);return c?(a||new n.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+c)+i*16,this.bb):null}nodesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}buffers(i,a){let c=this.bb.__offset(this.bb_pos,8);return c?(a||new y.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+c)+i*16,this.bb):null}buffersLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startRecordBatch(i){i.startObject(3)}static addLength(i,a){i.addFieldInt64(0,a,i.createLong(0,0))}static addNodes(i,a){i.addFieldOffset(1,a,0)}static startNodesVector(i,a){i.startVector(16,a,8)}static addBuffers(i,a){i.addFieldOffset(2,a,0)}static startBuffersVector(i,a){i.startVector(16,a,8)}static endRecordBatch(i){return i.endObject()}static createRecordBatch(i,a,c,l){return s.startRecordBatch(i),s.addLength(i,a),s.addNodes(i,c),s.addBuffers(i,l),s.endRecordBatch(i)}}r.RecordBatch=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(ft||(ft={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsDictionaryBatch(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}id(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}data(i){let a=this.bb.__offset(this.bb_pos,6);return a?(i||new n.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}isDelta(){let i=this.bb.__offset(this.bb_pos,8);return i?!!this.bb.readInt8(this.bb_pos+i):!1}static startDictionaryBatch(i){i.startObject(3)}static addId(i,a){i.addFieldInt64(0,a,i.createLong(0,0))}static addData(i,a){i.addFieldOffset(1,a,0)}static addIsDelta(i,a){i.addFieldInt8(2,+a,0)}static endDictionaryBatch(i){return i.endObject()}static createDictionaryBatch(i,a,c,l){return s.startDictionaryBatch(i),s.addId(i,a),s.addData(i,c),s.addIsDelta(i,l),s.endDictionaryBatch(i)}}r.DictionaryBatch=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(ft||(ft={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsMessage(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}version(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):y.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readUint8(this.bb_pos+i):n.apache.arrow.flatbuf.MessageHeader.NONE}header(i){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__union(i,this.bb_pos+a):null}bodyLength(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}customMetadata(i,a){let c=this.bb.__offset(this.bb_pos,12);return c?(a||new y.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+i*4),this.bb):null}customMetadataLength(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__vector_len(this.bb_pos+i):0}static startMessage(i){i.startObject(5)}static addVersion(i,a){i.addFieldInt16(0,a,y.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(i,a){i.addFieldInt8(1,a,n.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(i,a){i.addFieldOffset(2,a,0)}static addBodyLength(i,a){i.addFieldInt64(3,a,i.createLong(0,0))}static addCustomMetadata(i,a){i.addFieldOffset(4,a,0)}static createCustomMetadataVector(i,a){i.startVector(4,a.length,4);for(let c=a.length-1;c>=0;c--)i.addOffset(a[c]);return i.endVector()}static startCustomMetadataVector(i,a){i.startVector(4,a,4)}static endMessage(i){return i.endObject()}static finishMessageBuffer(i,a){i.finish(a)}static createMessage(i,a,c,l,u,p){return s.startMessage(i),s.addVersion(i,a),s.addHeaderType(i,c),s.addHeader(i,l),s.addBodyLength(i,u),s.addCustomMetadata(i,p),s.endMessage(i)}}r.Message=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(ft||(ft={}));y.apache.arrow.flatbuf.Type;var Ht=y.apache.arrow.flatbuf.DateUnit,X=y.apache.arrow.flatbuf.TimeUnit,xt=y.apache.arrow.flatbuf.Precision,ne=y.apache.arrow.flatbuf.UnionMode,ze=y.apache.arrow.flatbuf.IntervalUnit,tt=ft.apache.arrow.flatbuf.MessageHeader,Mt=y.apache.arrow.flatbuf.MetadataVersion,h;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"})(h||(h={}));var S;(function(n){n[n.OFFSET=0]="OFFSET",n[n.DATA=1]="DATA",n[n.VALIDITY=2]="VALIDITY",n[n.TYPE=3]="TYPE"})(S||(S={}));function uo(n,t,e,r){return(e&1<<r)!==0}function kc(n,t,e,r){return(e&1<<r)>>r}function Vc(n,t,e){return e?!!(n[t>>3]|=1<<t%8)||!0:!(n[t>>3]&=~(1<<t%8))&&!1}function pi(n,t,e){const r=e.byteLength+7&-8;if(n>0||e.byteLength<r){const s=new Uint8Array(r);return s.set(n%8===0?e.subarray(n>>3):Qn(br(e,n,t,null,uo)).subarray(0,r)),s}return e}function Qn(n){let t=[],e=0,r=0,s=0;for(const i of n)i&&(s|=1<<r),++r===8&&(t[e++]=s,s=r=0);(e===0||r>0)&&(t[e++]=s);let o=new Uint8Array(t.length+7&-8);return o.set(t),o}function*br(n,t,e,r,s){let o=t%8,i=t>>3,a=0,c=e;for(;c>0;o=0){let l=n[i++];do yield s(r,a++,l,o);while(--c>0&&++o<8)}}function ri(n,t,e){if(e-t<=0)return 0;if(e-t<8){let o=0;for(const i of br(n,t,e-t,n,kc))o+=i;return o}const r=e>>3<<3,s=t+(t%8===0?0:8-t%8);return ri(n,t,s)+ri(n,r,e)+Pc(n,s>>3,r-s>>3)}function Pc(n,t,e){let r=0,s=t|0;const o=new DataView(n.buffer,n.byteOffset,n.byteLength),i=e===void 0?n.byteLength:s+e;for(;i-s>=4;)r+=Vr(o.getUint32(s)),s+=4;for(;i-s>=2;)r+=Vr(o.getUint16(s)),s+=2;for(;i-s>=1;)r+=Vr(o.getUint8(s)),s+=1;return r}function Vr(n){let t=n|0;return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}class k{visitMany(t,...e){return t.map((r,s)=>this.visit(r,...e.map(o=>o[s])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return zc(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function zc(n,t,e=!0){let r=null,s=h.NONE;switch(t instanceof _||t instanceof P?s=Pr(t.type):t instanceof C?s=Pr(t):typeof(s=t)!="number"&&(s=h[t]),s){case h.Null:r=n.visitNull;break;case h.Bool:r=n.visitBool;break;case h.Int:r=n.visitInt;break;case h.Int8:r=n.visitInt8||n.visitInt;break;case h.Int16:r=n.visitInt16||n.visitInt;break;case h.Int32:r=n.visitInt32||n.visitInt;break;case h.Int64:r=n.visitInt64||n.visitInt;break;case h.Uint8:r=n.visitUint8||n.visitInt;break;case h.Uint16:r=n.visitUint16||n.visitInt;break;case h.Uint32:r=n.visitUint32||n.visitInt;break;case h.Uint64:r=n.visitUint64||n.visitInt;break;case h.Float:r=n.visitFloat;break;case h.Float16:r=n.visitFloat16||n.visitFloat;break;case h.Float32:r=n.visitFloat32||n.visitFloat;break;case h.Float64:r=n.visitFloat64||n.visitFloat;break;case h.Utf8:r=n.visitUtf8;break;case h.Binary:r=n.visitBinary;break;case h.FixedSizeBinary:r=n.visitFixedSizeBinary;break;case h.Date:r=n.visitDate;break;case h.DateDay:r=n.visitDateDay||n.visitDate;break;case h.DateMillisecond:r=n.visitDateMillisecond||n.visitDate;break;case h.Timestamp:r=n.visitTimestamp;break;case h.TimestampSecond:r=n.visitTimestampSecond||n.visitTimestamp;break;case h.TimestampMillisecond:r=n.visitTimestampMillisecond||n.visitTimestamp;break;case h.TimestampMicrosecond:r=n.visitTimestampMicrosecond||n.visitTimestamp;break;case h.TimestampNanosecond:r=n.visitTimestampNanosecond||n.visitTimestamp;break;case h.Time:r=n.visitTime;break;case h.TimeSecond:r=n.visitTimeSecond||n.visitTime;break;case h.TimeMillisecond:r=n.visitTimeMillisecond||n.visitTime;break;case h.TimeMicrosecond:r=n.visitTimeMicrosecond||n.visitTime;break;case h.TimeNanosecond:r=n.visitTimeNanosecond||n.visitTime;break;case h.Decimal:r=n.visitDecimal;break;case h.List:r=n.visitList;break;case h.Struct:r=n.visitStruct;break;case h.Union:r=n.visitUnion;break;case h.DenseUnion:r=n.visitDenseUnion||n.visitUnion;break;case h.SparseUnion:r=n.visitSparseUnion||n.visitUnion;break;case h.Dictionary:r=n.visitDictionary;break;case h.Interval:r=n.visitInterval;break;case h.IntervalDayTime:r=n.visitIntervalDayTime||n.visitInterval;break;case h.IntervalYearMonth:r=n.visitIntervalYearMonth||n.visitInterval;break;case h.FixedSizeList:r=n.visitFixedSizeList;break;case h.Map:r=n.visitMap;break}if(typeof r=="function")return r;if(!e)return()=>null;throw new Error(`Unrecognized type '${h[s]}'`)}function Pr(n){switch(n.typeId){case h.Null:return h.Null;case h.Int:const{bitWidth:t,isSigned:e}=n;switch(t){case 8:return e?h.Int8:h.Uint8;case 16:return e?h.Int16:h.Uint16;case 32:return e?h.Int32:h.Uint32;case 64:return e?h.Int64:h.Uint64}return h.Int;case h.Float:switch(n.precision){case xt.HALF:return h.Float16;case xt.SINGLE:return h.Float32;case xt.DOUBLE:return h.Float64}return h.Float;case h.Binary:return h.Binary;case h.Utf8:return h.Utf8;case h.Bool:return h.Bool;case h.Decimal:return h.Decimal;case h.Time:switch(n.unit){case X.SECOND:return h.TimeSecond;case X.MILLISECOND:return h.TimeMillisecond;case X.MICROSECOND:return h.TimeMicrosecond;case X.NANOSECOND:return h.TimeNanosecond}return h.Time;case h.Timestamp:switch(n.unit){case X.SECOND:return h.TimestampSecond;case X.MILLISECOND:return h.TimestampMillisecond;case X.MICROSECOND:return h.TimestampMicrosecond;case X.NANOSECOND:return h.TimestampNanosecond}return h.Timestamp;case h.Date:switch(n.unit){case Ht.DAY:return h.DateDay;case Ht.MILLISECOND:return h.DateMillisecond}return h.Date;case h.Interval:switch(n.unit){case ze.DAY_TIME:return h.IntervalDayTime;case ze.YEAR_MONTH:return h.IntervalYearMonth}return h.Interval;case h.Map:return h.Map;case h.List:return h.List;case h.Struct:return h.Struct;case h.Union:switch(n.mode){case ne.Dense:return h.DenseUnion;case ne.Sparse:return h.SparseUnion}return h.Union;case h.FixedSizeBinary:return h.FixedSizeBinary;case h.FixedSizeList:return h.FixedSizeList;case h.Dictionary:return h.Dictionary}throw new Error(`Unrecognized type '${h[n.typeId]}'`)}k.prototype.visitInt8=null;k.prototype.visitInt16=null;k.prototype.visitInt32=null;k.prototype.visitInt64=null;k.prototype.visitUint8=null;k.prototype.visitUint16=null;k.prototype.visitUint32=null;k.prototype.visitUint64=null;k.prototype.visitFloat16=null;k.prototype.visitFloat32=null;k.prototype.visitFloat64=null;k.prototype.visitDateDay=null;k.prototype.visitDateMillisecond=null;k.prototype.visitTimestampSecond=null;k.prototype.visitTimestampMillisecond=null;k.prototype.visitTimestampMicrosecond=null;k.prototype.visitTimestampNanosecond=null;k.prototype.visitTimeSecond=null;k.prototype.visitTimeMillisecond=null;k.prototype.visitTimeMicrosecond=null;k.prototype.visitTimeNanosecond=null;k.prototype.visitDenseUnion=null;k.prototype.visitSparseUnion=null;k.prototype.visitIntervalDayTime=null;k.prototype.visitIntervalYearMonth=null;class B extends k{compareSchemas(t,e){return t===e||e instanceof t.constructor&&At.compareFields(t.fields,e.fields)}compareFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((r,s)=>At.compareField(r,e[s]))}compareField(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&At.visit(t.type,e.type)}}function _t(n,t){return t instanceof n.constructor}function Sn(n,t){return n===t||_t(n,t)}function ie(n,t){return n===t||_t(n,t)&&n.bitWidth===t.bitWidth&&n.isSigned===t.isSigned}function mr(n,t){return n===t||_t(n,t)&&n.precision===t.precision}function jc(n,t){return n===t||_t(n,t)&&n.byteWidth===t.byteWidth}function yi(n,t){return n===t||_t(n,t)&&n.unit===t.unit}function In(n,t){return n===t||_t(n,t)&&n.unit===t.unit&&n.timezone===t.timezone}function Bn(n,t){return n===t||_t(n,t)&&n.unit===t.unit&&n.bitWidth===t.bitWidth}function $c(n,t){return n===t||_t(n,t)&&n.children.length===t.children.length&&At.compareFields(n.children,t.children)}function Wc(n,t){return n===t||_t(n,t)&&n.children.length===t.children.length&&At.compareFields(n.children,t.children)}function bi(n,t){return n===t||_t(n,t)&&n.mode===t.mode&&n.typeIds.every((e,r)=>e===t.typeIds[r])&&At.compareFields(n.children,t.children)}function Yc(n,t){return n===t||_t(n,t)&&n.id===t.id&&n.isOrdered===t.isOrdered&&At.visit(n.indices,t.indices)&&At.visit(n.dictionary,t.dictionary)}function mi(n,t){return n===t||_t(n,t)&&n.unit===t.unit}function Hc(n,t){return n===t||_t(n,t)&&n.listSize===t.listSize&&n.children.length===t.children.length&&At.compareFields(n.children,t.children)}function qc(n,t){return n===t||_t(n,t)&&n.keysSorted===t.keysSorted&&n.children.length===t.children.length&&At.compareFields(n.children,t.children)}B.prototype.visitNull=Sn;B.prototype.visitBool=Sn;B.prototype.visitInt=ie;B.prototype.visitInt8=ie;B.prototype.visitInt16=ie;B.prototype.visitInt32=ie;B.prototype.visitInt64=ie;B.prototype.visitUint8=ie;B.prototype.visitUint16=ie;B.prototype.visitUint32=ie;B.prototype.visitUint64=ie;B.prototype.visitFloat=mr;B.prototype.visitFloat16=mr;B.prototype.visitFloat32=mr;B.prototype.visitFloat64=mr;B.prototype.visitUtf8=Sn;B.prototype.visitBinary=Sn;B.prototype.visitFixedSizeBinary=jc;B.prototype.visitDate=yi;B.prototype.visitDateDay=yi;B.prototype.visitDateMillisecond=yi;B.prototype.visitTimestamp=In;B.prototype.visitTimestampSecond=In;B.prototype.visitTimestampMillisecond=In;B.prototype.visitTimestampMicrosecond=In;B.prototype.visitTimestampNanosecond=In;B.prototype.visitTime=Bn;B.prototype.visitTimeSecond=Bn;B.prototype.visitTimeMillisecond=Bn;B.prototype.visitTimeMicrosecond=Bn;B.prototype.visitTimeNanosecond=Bn;B.prototype.visitDecimal=Sn;B.prototype.visitList=$c;B.prototype.visitStruct=Wc;B.prototype.visitUnion=bi;B.prototype.visitDenseUnion=bi;B.prototype.visitSparseUnion=bi;B.prototype.visitDictionary=Yc;B.prototype.visitInterval=mi;B.prototype.visitIntervalDayTime=mi;B.prototype.visitIntervalYearMonth=mi;B.prototype.visitFixedSizeList=Hc;B.prototype.visitMap=qc;const At=new B;class C{static isNull(t){return t&&t.typeId===h.Null}static isInt(t){return t&&t.typeId===h.Int}static isFloat(t){return t&&t.typeId===h.Float}static isBinary(t){return t&&t.typeId===h.Binary}static isUtf8(t){return t&&t.typeId===h.Utf8}static isBool(t){return t&&t.typeId===h.Bool}static isDecimal(t){return t&&t.typeId===h.Decimal}static isDate(t){return t&&t.typeId===h.Date}static isTime(t){return t&&t.typeId===h.Time}static isTimestamp(t){return t&&t.typeId===h.Timestamp}static isInterval(t){return t&&t.typeId===h.Interval}static isList(t){return t&&t.typeId===h.List}static isStruct(t){return t&&t.typeId===h.Struct}static isUnion(t){return t&&t.typeId===h.Union}static isFixedSizeBinary(t){return t&&t.typeId===h.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===h.FixedSizeList}static isMap(t){return t&&t.typeId===h.Map}static isDictionary(t){return t&&t.typeId===h.Dictionary}get typeId(){return h.NONE}compareTo(t){return At.visit(this,t)}}C[Symbol.toStringTag]=(n=>(n.children=null,n.ArrayType=Array,n[Symbol.toStringTag]="DataType"))(C.prototype);let je=class extends C{toString(){return"Null"}get typeId(){return h.Null}};je[Symbol.toStringTag]=(n=>n[Symbol.toStringTag]="Null")(je.prototype);class wt extends C{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return h.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}wt[Symbol.toStringTag]=(n=>(n.isSigned=null,n.bitWidth=null,n[Symbol.toStringTag]="Int"))(wt.prototype);class gi extends wt{constructor(){super(!0,8)}}class vi extends wt{constructor(){super(!0,16)}}class we extends wt{constructor(){super(!0,32)}}let $e=class extends wt{constructor(){super(!0,64)}};class wi extends wt{constructor(){super(!1,8)}}class _i extends wt{constructor(){super(!1,16)}}class Si extends wt{constructor(){super(!1,32)}}let We=class extends wt{constructor(){super(!1,64)}};Object.defineProperty(gi.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(vi.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(we.prototype,"ArrayType",{value:Int32Array});Object.defineProperty($e.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(wi.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(_i.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Si.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(We.prototype,"ArrayType",{value:Uint32Array});class _e extends C{constructor(t){super(),this.precision=t}get typeId(){return h.Float}get ArrayType(){switch(this.precision){case xt.HALF:return Uint16Array;case xt.SINGLE:return Float32Array;case xt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}_e[Symbol.toStringTag]=(n=>(n.precision=null,n[Symbol.toStringTag]="Float"))(_e.prototype);class gr extends _e{constructor(){super(xt.HALF)}}class Ii extends _e{constructor(){super(xt.SINGLE)}}class Bi extends _e{constructor(){super(xt.DOUBLE)}}Object.defineProperty(gr.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Ii.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Bi.prototype,"ArrayType",{value:Float64Array});let dn=class extends C{constructor(){super()}get typeId(){return h.Binary}toString(){return"Binary"}};dn[Symbol.toStringTag]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Binary"))(dn.prototype);let Ye=class extends C{constructor(){super()}get typeId(){return h.Utf8}toString(){return"Utf8"}};Ye[Symbol.toStringTag]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Utf8"))(Ye.prototype);let fn=class extends C{constructor(){super()}get typeId(){return h.Bool}toString(){return"Bool"}};fn[Symbol.toStringTag]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Bool"))(fn.prototype);let tr=class extends C{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return h.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};tr[Symbol.toStringTag]=(n=>(n.scale=null,n.precision=null,n.ArrayType=Uint32Array,n[Symbol.toStringTag]="Decimal"))(tr.prototype);class He extends C{constructor(t){super(),this.unit=t}get typeId(){return h.Date}toString(){return`Date${(this.unit+1)*32}<${Ht[this.unit]}>`}}He[Symbol.toStringTag]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Date"))(He.prototype);class Gc extends He{constructor(){super(Ht.DAY)}}class _s extends He{constructor(){super(Ht.MILLISECOND)}}class er extends C{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return h.Time}toString(){return`Time${this.bitWidth}<${X[this.unit]}>`}}er[Symbol.toStringTag]=(n=>(n.unit=null,n.bitWidth=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Time"))(er.prototype);class nr extends C{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return h.Timestamp}toString(){return`Timestamp<${X[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}nr[Symbol.toStringTag]=(n=>(n.unit=null,n.timezone=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Timestamp"))(nr.prototype);class rr extends C{constructor(t){super(),this.unit=t}get typeId(){return h.Interval}toString(){return`Interval<${ze[this.unit]}>`}}rr[Symbol.toStringTag]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Interval"))(rr.prototype);let qe=class extends C{constructor(t){super(),this.children=[t]}get typeId(){return h.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};qe[Symbol.toStringTag]=(n=>(n.children=null,n[Symbol.toStringTag]="List"))(qe.prototype);let kt=class extends C{constructor(t){super(),this.children=t}get typeId(){return h.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};kt[Symbol.toStringTag]=(n=>(n.children=null,n[Symbol.toStringTag]="Struct"))(kt.prototype);class pn extends C{constructor(t,e,r){super(),this.mode=t,this.children=r,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((s,o,i)=>(s[o]=i)&&s||s,Object.create(null))}get typeId(){return h.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}pn[Symbol.toStringTag]=(n=>(n.mode=null,n.typeIds=null,n.children=null,n.typeIdToChildIndex=null,n.ArrayType=Int8Array,n[Symbol.toStringTag]="Union"))(pn.prototype);let ir=class extends C{constructor(t){super(),this.byteWidth=t}get typeId(){return h.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};ir[Symbol.toStringTag]=(n=>(n.byteWidth=null,n.ArrayType=Uint8Array,n[Symbol.toStringTag]="FixedSizeBinary"))(ir.prototype);let yn=class extends C{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return h.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};yn[Symbol.toStringTag]=(n=>(n.children=null,n.listSize=null,n[Symbol.toStringTag]="FixedSizeList"))(yn.prototype);let bn=class extends C{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return h.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};bn[Symbol.toStringTag]=(n=>(n.children=null,n.keysSorted=null,n[Symbol.toStringTag]="Map_"))(bn.prototype);const Kc=(n=>()=>++n)(-1);class he extends C{constructor(t,e,r,s){super(),this.indices=e,this.dictionary=t,this.isOrdered=s||!1,this.id=r==null?Kc():typeof r=="number"?r:r.low}get typeId(){return h.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}he[Symbol.toStringTag]=(n=>(n.id=null,n.indices=null,n.isOrdered=null,n.dictionary=null,n[Symbol.toStringTag]="Dictionary"))(he.prototype);function ho(n){let t=n;switch(n.typeId){case h.Decimal:return 4;case h.Timestamp:return 2;case h.Date:return 1+t.unit;case h.Interval:return 1+t.unit;case h.Int:return 1+ +(t.bitWidth>32);case h.Time:return 1+ +(t.bitWidth>32);case h.FixedSizeList:return t.listSize;case h.FixedSizeBinary:return t.byteWidth;default:return 1}}const Jc=-1;class _{constructor(t,e,r,s,o,i,a){this.type=t,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1)),this.childData=(i||[]).map(l=>l instanceof _?l:l.data);let c;o instanceof _?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=ho(t),o&&((c=o[0])&&(this.valueOffsets=c),(c=o[1])&&(this.values=c),(c=o[2])&&(this.nullBitmap=c),(c=o[3])&&(this.typeIds=c)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:r,nullBitmap:s,typeIds:o}=this;return e&&(t+=e.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),o&&(t+=o.byteLength),this.childData.reduce((i,a)=>i+a.byteLength,t)}get nullCount(){let t=this._nullCount,e;return t<=Jc&&(e=this.nullBitmap)&&(this._nullCount=t=this.length-ri(e,this.offset,this.offset+this.length)),t}clone(t,e=this.offset,r=this.length,s=this._nullCount,o=this,i=this.childData){return new _(t,e,r,s,o,i,this.dictionary)}slice(t,e){const{stride:r,typeId:s,childData:o}=this,i=+(this._nullCount===0)-1,a=s===16?r:1,c=this._sliceBuffers(t,e,r,s);return this.clone(this.type,this.offset+t,e,i,c,!o.length||this.valueOffsets?o:this._sliceChildren(o,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===h.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:r}=this,s=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);s[e>>3]=(1<<e-(e&-8))-1,r>0&&s.set(pi(this.offset,e,this.nullBitmap),0);const o=this.buffers;return o[S.VALIDITY]=s,this.clone(this.type,0,t,r+(t-e),o)}_sliceBuffers(t,e,r,s){let o,{buffers:i}=this;return(o=i[S.TYPE])&&(i[S.TYPE]=o.subarray(t,t+e)),(o=i[S.OFFSET])&&(i[S.OFFSET]=o.subarray(t,t+e+1))||(o=i[S.DATA])&&(i[S.DATA]=s===6?o:o.subarray(r*t,r*(t+e))),i}_sliceChildren(t,e,r){return t.map(s=>s.slice(e,r))}static new(t,e,r,s,o,i,a){switch(o instanceof _?o=o.buffers:o||(o=[]),t.typeId){case h.Null:return _.Null(t,e,r);case h.Int:return _.Int(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Dictionary:return _.Dictionary(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[],a);case h.Float:return _.Float(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Bool:return _.Bool(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Decimal:return _.Decimal(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Date:return _.Date(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Time:return _.Time(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Timestamp:return _.Timestamp(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Interval:return _.Interval(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.FixedSizeBinary:return _.FixedSizeBinary(t,e,r,s||0,o[S.VALIDITY],o[S.DATA]||[]);case h.Binary:return _.Binary(t,e,r,s||0,o[S.VALIDITY],o[S.OFFSET]||[],o[S.DATA]||[]);case h.Utf8:return _.Utf8(t,e,r,s||0,o[S.VALIDITY],o[S.OFFSET]||[],o[S.DATA]||[]);case h.List:return _.List(t,e,r,s||0,o[S.VALIDITY],o[S.OFFSET]||[],(i||[])[0]);case h.FixedSizeList:return _.FixedSizeList(t,e,r,s||0,o[S.VALIDITY],(i||[])[0]);case h.Struct:return _.Struct(t,e,r,s||0,o[S.VALIDITY],i||[]);case h.Map:return _.Map(t,e,r,s||0,o[S.VALIDITY],o[S.OFFSET]||[],(i||[])[0]);case h.Union:return _.Union(t,e,r,s||0,o[S.VALIDITY],o[S.TYPE]||[],o[S.OFFSET]||i,i)}throw new Error(`Unrecognized typeId ${t.typeId}`)}static Null(t,e,r){return new _(t,e,r,0)}static Int(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Dictionary(t,e,r,s,o,i,a){return new _(t,e,r,s,[void 0,K(t.indices.ArrayType,i),V(o)],[],a)}static Float(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Bool(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Decimal(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Date(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Time(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Timestamp(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Interval(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static FixedSizeBinary(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,K(t.ArrayType,i),V(o)])}static Binary(t,e,r,s,o,i,a){return new _(t,e,r,s,[tn(i),V(a),V(o)])}static Utf8(t,e,r,s,o,i,a){return new _(t,e,r,s,[tn(i),V(a),V(o)])}static List(t,e,r,s,o,i,a){return new _(t,e,r,s,[tn(i),void 0,V(o)],[a])}static FixedSizeList(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,void 0,V(o)],[i])}static Struct(t,e,r,s,o,i){return new _(t,e,r,s,[void 0,void 0,V(o)],i)}static Map(t,e,r,s,o,i,a){return new _(t,e,r,s,[tn(i),void 0,V(o)],[a])}static Union(t,e,r,s,o,i,a,c){const l=[void 0,void 0,V(o),K(t.ArrayType,i)];return t.mode===ne.Sparse?new _(t,e,r,s,l,a):(l[S.OFFSET]=tn(a),new _(t,e,r,s,l,c))}}_.prototype.childData=Object.freeze([]);const Zc=void 0;function an(n){if(n===null)return"null";if(n===Zc)return"undefined";switch(typeof n){case"number":return`${n}`;case"bigint":return`${n}`;case"string":return`"${n}"`}return typeof n[Symbol.toPrimitive]=="function"?n[Symbol.toPrimitive]("string"):ArrayBuffer.isView(n)?`[${n}]`:JSON.stringify(n)}function Xc(n){if(!n||n.length<=0)return function(s){return!0};let t="",e=n.filter(r=>r===r);return e.length>0&&(t=`
    switch (x) {${e.map(r=>`
        case ${Qc(r)}:`).join("")}
            return false;
    }`),n.length!==e.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Qc(n){return typeof n!="bigint"?an(n):yr?`${an(n)}n`:`"${an(n)}"`}const zr=(n,t)=>(n*t+63&-64||64)/t,tl=(n,t=0)=>n.length>=t?n.subarray(0,t):Xn(new n.constructor(t),n,0);class Tn{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,r=this.length*e,s=this.buffer.length;r>=s&&this._resize(s===0?zr(r*1,this.BYTES_PER_ELEMENT):zr(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=zr(t*this.stride,this.BYTES_PER_ELEMENT);const e=tl(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Xn(new this.ArrayType(t),this.buffer)}}Tn.prototype.offset=0;class An extends Tn{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class fo extends An{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:r}=this.reserve(t-this.length+1),s=t>>3,o=t%8,i=r[s]>>o&1;return e?i===0&&(r[s]|=1<<o,++this.numValid):i===1&&(r[s]&=~(1<<o),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class po extends An{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const r=this.length-1,s=this.reserve(t-r+1).buffer;return r<t++&&s.fill(s[r],r,t),s[t]=s[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class yo extends Tn{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?Je:_n)}set(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this}_resize(t){const e=super._resize(t),r=e.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return yr&&(this.buffer64=new this.ArrayType64(e.buffer,e.byteOffset,r)),e}}let st=class{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=ho(t),this._nulls=new fo,e&&e.length>0&&(this._isValid=Xc(e))}static new(t){}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}static throughIterable(t){return el(t)}static throughAsyncIterable(t){return nl(t)}toVector(){return P.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce((e,r)=>e+r.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((e,r)=>e+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){const t=[],e=this._values,r=this._offsets,s=this._typeIds,{length:o,nullCount:i}=this;s?(t[S.TYPE]=s.flush(o),r&&(t[S.OFFSET]=r.flush(o))):r?(e&&(t[S.DATA]=e.flush(r.last())),t[S.OFFSET]=r.flush(o)):e&&(t[S.DATA]=e.flush(o)),i>0&&(t[S.VALIDITY]=this._nulls.flush(o));const a=_.new(this.type,0,o,i,t,this.children.map(c=>c.flush()));return this.clear(),a}finish(){return this.finished=!0,this.children.forEach(t=>t.finish()),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach(t=>t.clear()),this}};st.prototype.length=1;st.prototype.stride=1;st.prototype.children=null;st.prototype.finished=!1;st.prototype.nullValues=null;st.prototype._isValid=()=>!0;class fe extends st{constructor(t){super(t),this._values=new An(new this.ArrayType(0),this.stride)}setValue(t,e){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,e)}}class vr extends st{constructor(t){super(t),this._pendingLength=0,this._offsets=new po}setValue(t,e){const r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.length),this._pendingLength+=e.length,r.set(t,e)}setValid(t,e){return super.setValid(t,e)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}function el(n){const{["queueingStrategy"]:t="count"}=n,{["highWaterMark"]:e=t!=="bytes"?1e3:2**14}=n,r=t!=="bytes"?"length":"byteLength";return function*(s){let o=0,i=st.new(n);for(const a of s)i.append(a)[r]>=e&&++o&&(yield i.toVector());(i.finish().length>0||o===0)&&(yield i.toVector())}}function nl(n){const{["queueingStrategy"]:t="count"}=n,{["highWaterMark"]:e=t!=="bytes"?1e3:2**14}=n,r=t!=="bytes"?"length":"byteLength";return async function*(s){let o=0,i=st.new(n);for await(const a of s)i.append(a)[r]>=e&&++o&&(yield i.toVector());(i.finish().length>0||o===0)&&(yield i.toVector())}}class rl extends st{constructor(t){super(t),this._values=new fo}setValue(t,e){this._values.set(t,+e)}}class il extends st{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class Ti extends fe{}class sl extends Ti{}class ol extends Ti{}class al extends fe{}class cl extends st{constructor({type:t,nullValues:e,dictionaryHashFunction:r}){super({type:new he(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=st.new({type:this.type.indices,nullValues:e}),this.dictionary=st.new({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const r=this.indices;return e=r.setValid(t,e),this.length=r.length,e}setValue(t,e){let r=this._keysToIndices,s=this.valueToKey(e),o=r[s];return o===void 0&&(r[s]=o=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,o)}flush(){const t=this.type,e=this._dictionary,r=this.dictionary.toVector(),s=this.indices.flush().clone(t);return s.dictionary=e?e.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=s.dictionary,this.clear(),s}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class ll extends fe{}const bo=new Float64Array(1),Oe=new Uint32Array(bo.buffer);function ul(n){let t=(n&31744)>>10,e=(n&1023)/1024,r=(-1)**((n&32768)>>15);switch(t){case 31:return r*(e?NaN:1/0);case 0:return r*(e?6103515625e-14*e:0)}return r*2**(t-15)*(1+e)}function mo(n){if(n!==n)return 32256;bo[0]=n;let t=(Oe[1]&2147483648)>>16&65535,e=Oe[1]&2146435072,r=0;return e>=1089470464?Oe[0]>0?e=31744:(e=(e&2080374784)>>16,r=(Oe[1]&1048575)>>10):e<=1056964608?(r=1048576+(Oe[1]&1048575),r=1048576+(r<<(e>>20)-998)>>21,e=0):(e=e-1056964608>>10,r=(Oe[1]&1048575)+512>>10),t|e|r&65535}class wr extends fe{}class hl extends wr{setValue(t,e){this._values.set(t,mo(e))}}class dl extends wr{setValue(t,e){this._values.set(t,e)}}class fl extends wr{setValue(t,e){this._values.set(t,e)}}const pl=Symbol.for("isArrowBigNum");function Vt(n,...t){return t.length===0?Object.setPrototypeOf(K(this.TypedArray,n),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(n,...t),this.constructor.prototype)}Vt.prototype[pl]=!0;Vt.prototype.toJSON=function(){return`"${ve(this)}"`};Vt.prototype.valueOf=function(){return go(this)};Vt.prototype.toString=function(){return ve(this)};Vt.prototype[Symbol.toPrimitive]=function(n="default"){switch(n){case"number":return go(this);case"string":return ve(this);case"default":return sr(this)}return ve(this)};function Me(...n){return Vt.apply(this,n)}function Ce(...n){return Vt.apply(this,n)}function mn(...n){return Vt.apply(this,n)}Object.setPrototypeOf(Me.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Ce.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(mn.prototype,Object.create(Uint32Array.prototype));Object.assign(Me.prototype,Vt.prototype,{constructor:Me,signed:!0,TypedArray:Int32Array,BigIntArray:Je});Object.assign(Ce.prototype,Vt.prototype,{constructor:Ce,signed:!1,TypedArray:Uint32Array,BigIntArray:_n});Object.assign(mn.prototype,Vt.prototype,{constructor:mn,signed:!0,TypedArray:Uint32Array,BigIntArray:_n});function go(n){let{buffer:t,byteOffset:e,length:r,signed:s}=n,o=new Int32Array(t,e,r),i=0,a=0,c=o.length,l,u;for(;a<c;)u=o[a++],l=o[a++],s||(l=l>>>0),i+=(u>>>0)+l*a**32;return i}let ve,sr;yr?(sr=(n=>n.byteLength===8?new n.BigIntArray(n.buffer,n.byteOffset,1)[0]:jr(n)),ve=(n=>n.byteLength===8?`${new n.BigIntArray(n.buffer,n.byteOffset,1)[0]}`:jr(n))):(ve=jr,sr=ve);function jr(n){let t="",e=new Uint32Array(2),r=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),s=new Uint32Array((r=new Uint16Array(r).reverse()).buffer),o=-1,i=r.length-1;do{for(e[0]=r[o=0];o<i;)r[o++]=e[1]=e[0]/10,e[0]=(e[0]-e[1]*10<<16)+r[o];r[o]=e[1]=e[0]/10,e[0]=e[0]-e[1]*10,t=`${e[0]}${t}`}while(s[0]||s[1]||s[2]||s[3]);return t||"0"}class Ze{constructor(t,e){return Ze.new(t,e)}static new(t,e){switch(e){case!0:return new Me(t);case!1:return new Ce(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Je:return new Me(t)}return t.byteLength===16?new mn(t):new Ce(t)}static signed(t){return new Me(t)}static unsigned(t){return new Ce(t)}static decimal(t){return new mn(t)}}class se extends fe{setValue(t,e){this._values.set(t,e)}}class yl extends se{}class bl extends se{}class ml extends se{}class gl extends se{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(or)),super(t),this._values=new yo(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(or(t))}}class vl extends se{}class wl extends se{}class _l extends se{}class Sl extends se{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(or)),super(t),this._values=new yo(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(or(t))}}const or=(n=>t=>(ArrayBuffer.isView(t)&&(n.buffer=t.buffer,n.byteOffset=t.byteOffset,n.byteLength=t.byteLength,t=sr(n),n.buffer=null),t))({BigIntArray:Je});class Dn extends fe{}class Il extends Dn{}class Bl extends Dn{}class Tl extends Dn{}class Al extends Dn{}class On extends fe{}class Dl extends On{}class Ol extends On{}class Fl extends On{}class xl extends On{}class Ai extends fe{}class Ll extends Ai{}class El extends Ai{}class vo extends vr{constructor(t){super(t),this._values=new Tn(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,V(e))}_flushPending(t,e){const r=this._offsets,s=this._values.reserve(e).buffer;let o=0,i=0,a=0,c;for([o,c]of t)c===void 0?r.set(o,0):(i=c.length,s.set(c,a),r.set(o,i),a+=i)}}class Di extends vr{constructor(t){super(t),this._values=new Tn(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,pr(e))}_flushPending(t,e){}}Di.prototype._flushPending=vo.prototype._flushPending;class wo{get length(){return this._values.length}get(t){return this._values[t]}clear(){return this._values=null,this}bind(t){return t instanceof P?t:(this._values=t,this)}}const ht=Symbol.for("parent"),Ne=Symbol.for("rowIndex"),Bt=Symbol.for("keyToIdx"),It=Symbol.for("idxToVal"),ii=Symbol.for("nodejs.util.inspect.custom");class ee{constructor(t,e){this[ht]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return this.get(t)!==void 0}get(t){let e;if(t!=null){const r=this[Bt]||(this[Bt]=new Map);let s=r.get(t);if(s!==void 0){const o=this[It]||(this[It]=new Array(this.size));(e=o[s])!==void 0||(o[s]=e=this.getValue(s))}else if((s=this.getIndex(t))>-1){r.set(t,s);const o=this[It]||(this[It]=new Array(this.size));(e=o[s])!==void 0||(o[s]=e=this.getValue(s))}}return e}set(t,e){if(t!=null){const r=this[Bt]||(this[Bt]=new Map);let s=r.get(t);if(s===void 0&&r.set(t,s=this.getIndex(t)),s>-1){const o=this[It]||(this[It]=new Array(this.size));o[s]=this.setValue(s,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),r=this[Bt]||(this[Bt]=new Map),s=this[It]||(this[It]=new Array(this.size));for(let o,i,a=0,c,l;!((c=t.next()).done||(l=e.next()).done);++a)o=c.value,i=l.value,s[a]=i,r.has(o)||r.set(o,a),yield[o,i]}forEach(t,e){const r=this.keys(),s=this.values(),o=e===void 0?t:(c,l,u)=>t.call(e,c,l,u),i=this[Bt]||(this[Bt]=new Map),a=this[It]||(this[It]=new Array(this.size));for(let c,l,u=0,p,b;!((p=r.next()).done||(b=s.next()).done);++u)c=p.value,l=b.value,a[u]=l,i.has(c)||i.set(c,u),o(l,c,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach((e,r)=>t[r]=e),t}inspect(){return this.toString()}[ii](){return this.toString()}toString(){const t=[];return this.forEach((e,r)=>{r=an(r),e=an(e),t.push(`${r}: ${e}`)}),`{ ${t.join(", ")} }`}}ee[Symbol.toStringTag]=(n=>(Object.defineProperties(n,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[ht]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ne]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),n[Symbol.toStringTag]="Row"))(ee.prototype);class _o extends ee{constructor(t){return super(t,t.length),Ml(this)}keys(){return this[ht].getChildAt(0)[Symbol.iterator]()}values(){return this[ht].getChildAt(1)[Symbol.iterator]()}getKey(t){return this[ht].getChildAt(0).get(t)}getIndex(t){return this[ht].getChildAt(0).indexOf(t)}getValue(t){return this[ht].getChildAt(1).get(t)}setValue(t,e){this[ht].getChildAt(1).set(t,e)}}class So extends ee{constructor(t){return super(t,t.type.children.length),Io(this)}*keys(){for(const t of this[ht].type.children)yield t.name}*values(){for(const t of this[ht].type.children)yield this[t.name]}getKey(t){return this[ht].type.children[t].name}getIndex(t){return this[ht].type.children.findIndex(e=>e.name===t)}getValue(t){return this[ht].getChildAt(t).get(this[Ne])}setValue(t,e){return this[ht].getChildAt(t).set(this[Ne],e)}}Object.setPrototypeOf(ee.prototype,Map.prototype);const Io=(()=>{const n={enumerable:!0,configurable:!1,get:null,set:null};return t=>{let e=-1,r=t[Bt]||(t[Bt]=new Map);const s=i=>function(){return this.get(i)},o=i=>function(a){return this.set(i,a)};for(const i of t.keys())r.set(i,++e),n.get=s(i),n.set=o(i),t.hasOwnProperty(i)||(n.enumerable=!0,Object.defineProperty(t,i,n)),t.hasOwnProperty(e)||(n.enumerable=!1,Object.defineProperty(t,e,n));return n.get=n.set=null,t}})(),Ml=(()=>{if(typeof Proxy>"u")return Io;const n=ee.prototype.has,t=ee.prototype.get,e=ee.prototype.set,r=ee.prototype.getKey,s={isExtensible(){return!1},deleteProperty(){return!1},preventExtensions(){return!0},ownKeys(o){return[...o.keys()].map(i=>`${i}`)},has(o,i){switch(i){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case ht:case Ne:case It:case Bt:case ii:return!0}return typeof i=="number"&&!o.has(i)&&(i=o.getKey(i)),o.has(i)},get(o,i,a){switch(i){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case ht:case Ne:case It:case Bt:case ii:return Reflect.get(o,i,a)}return typeof i=="number"&&!n.call(a,i)&&(i=r.call(a,i)),t.call(a,i)},set(o,i,a,c){switch(i){case ht:case Ne:case It:case Bt:return Reflect.set(o,i,a,c);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return typeof i=="number"&&!n.call(c,i)&&(i=r.call(c,i)),n.call(c,i)?!!e.call(c,i,a):!1}};return o=>new Proxy(o,s)})();let Ss;function Bo(n,t,e,r){let{length:s=0}=n,o=typeof t!="number"?0:t,i=typeof e!="number"?s:e;return o<0&&(o=(o%s+s)%s),i<0&&(i=(i%s+s)%s),i<o&&(Ss=o,o=i,i=Ss),i>s&&(i=s),r?r(n,o,i):[o,i]}const Cl=yr?_c(0):0,Is=n=>n!==n;function Xe(n){let t=typeof n;if(t!=="object"||n===null)return Is(n)?Is:t!=="bigint"?e=>e===n:e=>Cl+e===n;if(n instanceof Date){const e=n.valueOf();return r=>r instanceof Date?r.valueOf()===e:!1}return ArrayBuffer.isView(n)?e=>e?Ec(n,e):!1:n instanceof Map?Ul(n):Array.isArray(n)?Nl(n):n instanceof P?Rl(n):kl(n)}function Nl(n){const t=[];for(let e=-1,r=n.length;++e<r;)t[e]=Xe(n[e]);return _r(t)}function Ul(n){let t=-1;const e=[];return n.forEach(r=>e[++t]=Xe(r)),_r(e)}function Rl(n){const t=[];for(let e=-1,r=n.length;++e<r;)t[e]=Xe(n.get(e));return _r(t)}function kl(n){const t=Object.keys(n);if(t.length===0)return()=>!1;const e=[];for(let r=-1,s=t.length;++r<s;)e[r]=Xe(n[t[r]]);return _r(e,t)}function _r(n,t){return e=>{if(!e||typeof e!="object")return!1;switch(e.constructor){case Array:return Vl(n,e);case Map:case _o:case So:return Bs(n,e,e.keys());case Object:case void 0:return Bs(n,e,t||Object.keys(e))}return e instanceof P?Pl(n,e):!1}}function Vl(n,t){const e=n.length;if(t.length!==e)return!1;for(let r=-1;++r<e;)if(!n[r](t[r]))return!1;return!0}function Pl(n,t){const e=n.length;if(t.length!==e)return!1;for(let r=-1;++r<e;)if(!n[r](t.get(r)))return!1;return!0}function Bs(n,t,e){const r=e[Symbol.iterator](),s=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let i=0,a=n.length,c=o.next(),l=r.next(),u=s.next();for(;i<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!n[i](c.value));++i,l=r.next(),u=s.next(),c=o.next());return i===a&&l.done&&u.done&&c.done?!0:(r.return&&r.return(),s.return&&s.return(),o.return&&o.return(),!1)}class dt extends P{constructor(t,e=[],r=zl(e)){super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=r,this._length=r[r.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...t){return Yl(P,t)}static concat(...t){const e=dt.flatten(...t);return new dt(e[0].type,e)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce((t,e)=>t+e.byteLength,0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce((e,{nullCount:r})=>e+r,0)),t}get indices(){if(C.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=t.length===1?t[0].indices:dt.concat(...t.map(e=>e.indices))}return this._indices}return null}get dictionary(){return C.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(const t of this._chunks)yield*t}clone(t=this._chunks){return new dt(this._type,t)}concat(...t){return this.clone(dt.flatten(this,...t))}slice(t,e){return Bo(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;let e=this._children||(this._children=[]),r,s,o;return(r=e[t])?r:(s=(this._type.children||[])[t])&&(o=this._chunks.map(i=>i.getChildAt(t)).filter(i=>i!=null),o.length>0)?e[t]=new dt(s.type,o):null}search(t,e){let r=t,s=this._chunkOffsets,o=s.length-1;if(r<0||r>=s[o])return null;if(o<=1)return e?e(this,0,r):[0,r];let i=0,a=0,c=0;do{if(i+1===o)return e?e(this,i,r-a):[i,r-a];c=i+(o-i)/2|0,r>=s[c]?i=c:o=c}while(r<s[o]&&r>=(a=s[i]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,({chunks:r},s,o)=>r[s].set(o,e))}indexOf(t,e){return e&&typeof e=="number"?this.search(e,(r,s,o)=>this.indexOfInternal(r,s,o,t)):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let r=this._type.ArrayType;if(e<=0)return new r(0);if(e<=1)return t[0].toArray();let s=0,o=new Array(e);for(let c=-1;++c<e;)s+=(o[c]=t[c].toArray()).length;r!==o[0].constructor&&(r=o[0].constructor);let i=new r(s),a=r===Array?$l:jl;for(let c=-1,l=0;++c<e;)l=a(o[c],i,l);return i}getInternal({_chunks:t},e,r){return t[e].get(r)}isValidInternal({_chunks:t},e,r){return t[e].isValid(r)}indexOfInternal({_chunks:t},e,r,s){let o=e-1,i=t.length,a=r,c=0,l=-1;for(;++o<i;){if(~(l=t[o].indexOf(s,a)))return c+l;a=0,c+=t[o].length}return-1}_sliceInternal(t,e,r){const s=[],{chunks:o,_chunkOffsets:i}=t;for(let a=-1,c=o.length;++a<c;){const l=o[a],u=l.length,p=i[a];if(p>=r)break;if(e>=p+u)continue;if(p>=e&&p+u<=r){s.push(l);continue}const b=Math.max(0,e-p),g=Math.min(r-p,u);s.push(l.slice(b,g))}return t.clone(s)}}function zl(n){let t=new Uint32Array((n||[]).length+1),e=t[0]=0,r=t.length;for(let s=0;++s<r;)t[s]=e+=n[s-1].length;return t}const jl=(n,t,e)=>(t.set(n,e),e+n.length),$l=(n,t,e)=>{let r=e;for(let s=-1,o=n.length;++s<o;)t[r++]=n[s];return r};class Ct extends dt{constructor(t,e=[],r){if(e=dt.flatten(...e),super(t.type,e,r),this._field=t,e.length===1&&!(this instanceof Ts))return new Ts(t,e[0],this._chunkOffsets)}static new(t,e,...r){const s=dt.flatten(Array.isArray(e)?[...e,...r]:e instanceof P?[e,...r]:[P.new(e,...r)]);if(typeof t=="string"){const o=s[0].data.type;t=new z(t,o,!0)}else!t.nullable&&s.some(({nullCount:o})=>o>0)&&(t=t.clone({nullable:!0}));return new Ct(t,s)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(t=this._chunks){return new Ct(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e=this._children||(this._children=[]),r,s,o;return(r=e[t])?r:(s=(this.type.children||[])[t])&&(o=this._chunks.map(i=>i.getChildAt(t)).filter(i=>i!=null),o.length>0)?e[t]=new Ct(s,o):null}}class Ts extends Ct{constructor(t,e,r){super(t,[e],r),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}const ge=Array.isArray,To=(n,t)=>Oi(n,t,[],0),Wl=n=>{const[t,e]=Fi(n,[[],[]]);return e.map((r,s)=>r instanceof Ct?Ct.new(r.field.clone(t[s]),r):r instanceof P?Ct.new(t[s],r):Ct.new(t[s],[]))},Ao=n=>Fi(n,[[],[]]),Yl=(n,t)=>si(n,t,[],0),Hl=(n,t)=>Do(n,t,[],0);function Oi(n,t,e,r){let s,o=r,i=-1,a=t.length;for(;++i<a;)ge(s=t[i])?o=Oi(n,s,e,o).length:s instanceof n&&(e[o++]=s);return e}function si(n,t,e,r){let s,o=r,i=-1,a=t.length;for(;++i<a;)ge(s=t[i])?o=si(n,s,e,o).length:s instanceof dt?o=si(n,s.chunks,e,o).length:s instanceof n&&(e[o++]=s);return e}function Do(n,t,e,r){let s,o=r,i=-1,a=t.length;for(;++i<a;)ge(s=t[i])?o=Do(n,s,e,o).length:s instanceof n?o=Oi(P,s.schema.fields.map((c,l)=>s.getChildAt(l)),e,o).length:s instanceof P&&(e[o++]=s);return e}const ql=(n,[t,e],r)=>(n[0][r]=t,n[1][r]=e,n);function Fi(n,t){let e,r;switch(r=n.length){case 0:return t;case 1:if(e=t[0],!n[0])return t;if(ge(n[0]))return Fi(n[0],t);n[0]instanceof _||n[0]instanceof P||n[0]instanceof C||([e,n]=Object.entries(n[0]).reduce(ql,t));break;default:ge(e=n[r-1])?n=ge(n[0])?n[0]:n.slice(0,r-1):(n=ge(n[0])?n[0]:n,e=[])}let s=-1,o=-1,i=-1,a=n.length,c,l,[u,p]=t;for(;++i<a;)l=n[i],l instanceof Ct&&(p[++o]=l)?u[++s]=l.field.clone(e[i],l.type,!0):({[i]:c=i}=e,l instanceof C&&(p[++o]=l)?u[++s]=z.new(c,l,!0):l&&l.type&&(p[++o]=l)&&(l instanceof _&&(p[o]=l=P.new(l)),u[++s]=z.new(c,l.type,!0)));return t}class Q{constructor(t=[],e,r){this.fields=t||[],this.metadata=e||new Map,r||(r=oi(t)),this.dictionaries=r}static from(...t){return Q.new(t[0],t[1])}static new(...t){return new Q(Ao(t)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}compareTo(t){return At.compareSchemas(this,t)}select(...t){const e=t.reduce((r,s)=>(r[s]=!0)&&r,Object.create(null));return new Q(this.fields.filter(r=>e[r.name]),this.metadata)}selectAt(...t){return new Q(t.map(e=>this.fields[e]).filter(Boolean),this.metadata)}assign(...t){const e=t[0]instanceof Q?t[0]:new Q(To(z,t)),r=[...this.fields],s=Un(Un(new Map,this.metadata),e.metadata),o=e.fields.filter(a=>{const c=r.findIndex(l=>l.name===a.name);return~c?(r[c]=a.clone({metadata:Un(Un(new Map,r[c].metadata),a.metadata)}))&&!1:!0}),i=oi(o,new Map);return new Q([...r,...o],s,new Map([...this.dictionaries,...i]))}}class z{constructor(t,e,r=!1,s){this.name=t,this.type=e,this.nullable=r,this.metadata=s||new Map}static new(...t){let[e,r,s,o]=t;return t[0]&&typeof t[0]=="object"&&({name:e}=t[0],r===void 0&&(r=t[0].type),s===void 0&&(s=t[0].nullable),o===void 0&&(o=t[0].metadata)),new z(`${e}`,r,s,o)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(t){return At.compareField(this,t)}clone(...t){let[e,r,s,o]=t;return!t[0]||typeof t[0]!="object"?[e=this.name,r=this.type,s=this.nullable,o=this.metadata]=t:{name:e=this.name,type:r=this.type,nullable:s=this.nullable,metadata:o=this.metadata}=t[0],z.new(e,r,s,o)}}function Un(n,t){return new Map([...n||new Map,...t||new Map])}function oi(n,t=new Map){for(let e=-1,r=n.length;++e<r;){const o=n[e].type;if(C.isDictionary(o)){if(!t.has(o.id))t.set(o.id,o.dictionary);else if(t.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&oi(o.children,t)}return t}Q.prototype.fields=null;Q.prototype.metadata=null;Q.prototype.dictionaries=null;z.prototype.type=null;z.prototype.name=null;z.prototype.nullable=null;z.prototype.metadata=null;class Gl extends vr{constructor(t){super(t),this._run=new wo,this._offsets=new po}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new qe(new z(e,t.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(t){const e=this._run,r=this._offsets,s=this._setValue;let o=0,i;for([o,i]of t)i===void 0?r.set(o,0):(r.set(o,i.length),s(this,o,e.bind(i)))}}class Kl extends st{constructor(){super(...arguments),this._run=new wo}setValue(t,e){super.setValue(t,this._run.bind(e))}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new yn(this.type.listSize,new z(e,t.type,!0)),r}clear(){return this._run.clear(),super.clear()}}class Jl extends vr{set(t,e){return super.set(t,e)}setValue(t,e){e=e instanceof Map?e:new Map(Object.entries(e));const r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=e.size,r.set(t,e)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new bn(new z(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,r=this._setValue;t.forEach((s,o)=>{s===void 0?e.set(o,0):(e.set(o,s.size),r(this,o,s))})}}class Zl extends st{addChild(t,e=`${this.numChildren}`){const r=this.children.push(t);return this.type=new kt([...this.type.children,new z(e,t.type,!0)]),r}}class xi extends st{constructor(t){super(t),this._typeIds=new An(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,r){return r===void 0&&(r=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,r),this}setValue(t,e,r){this._typeIds.set(t,r),super.setValue(t,e)}addChild(t,e=`${this.children.length}`){const r=this.children.push(t),{type:{children:s,mode:o,typeIds:i}}=this,a=[...s,new z(e,t.type)];return this.type=new pn(o,[...i,r],a),r}_valueToChildTypeId(t,e,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Xl extends xi{}class Ql extends xi{constructor(t){super(t),this._offsets=new An(new Int32Array(0))}setValue(t,e,r){const s=this.type.typeIdToChildIndex[r];return this._offsets.set(t,this.getChildAt(s).length),super.setValue(t,e,r)}}class F extends k{}const tu=(n,t,e)=>{n[t]=e/864e5|0},Li=(n,t,e)=>{n[t]=e%4294967296|0,n[t+1]=e/4294967296|0},eu=(n,t,e)=>{n[t]=e*1e3%4294967296|0,n[t+1]=e*1e3/4294967296|0},nu=(n,t,e)=>{n[t]=e*1e6%4294967296|0,n[t+1]=e*1e6/4294967296|0},Oo=(n,t,e,r)=>{const{[e]:s,[e+1]:o}=t;s!=null&&o!=null&&n.set(r.subarray(0,o-s),s)},ru=({offset:n,values:t},e,r)=>{const s=n+e;r?t[s>>3]|=1<<s%8:t[s>>3]&=~(1<<s%8)},Fo=({values:n},t,e)=>{tu(n,t,e.valueOf())},xo=({values:n},t,e)=>{Li(n,t*2,e.valueOf())},Gt=({stride:n,values:t},e,r)=>{t[n*e]=r},Lo=({stride:n,values:t},e,r)=>{t[n*e]=mo(r)},Ei=(n,t,e)=>{switch(typeof e){case"bigint":n.values64[t]=e;break;case"number":n.values[t*n.stride]=e;break;default:const r=e,{stride:s,ArrayType:o}=n,i=K(o,r);n.values.set(i.subarray(0,s),s*t)}},iu=({stride:n,values:t},e,r)=>{t.set(r.subarray(0,n),n*e)},su=({values:n,valueOffsets:t},e,r)=>Oo(n,t,e,r),ou=({values:n,valueOffsets:t},e,r)=>{Oo(n,t,e,pr(r))},au=(n,t,e)=>{n.type.bitWidth<64?Gt(n,t,e):Ei(n,t,e)},cu=(n,t,e)=>{n.type.precision!==xt.HALF?Gt(n,t,e):Lo(n,t,e)},lu=(n,t,e)=>{n.type.unit===Ht.DAY?Fo(n,t,e):xo(n,t,e)},Eo=({values:n},t,e)=>Li(n,t*2,e/1e3),Mo=({values:n},t,e)=>Li(n,t*2,e),Co=({values:n},t,e)=>eu(n,t*2,e),No=({values:n},t,e)=>nu(n,t*2,e),uu=(n,t,e)=>{switch(n.type.unit){case X.SECOND:return Eo(n,t,e);case X.MILLISECOND:return Mo(n,t,e);case X.MICROSECOND:return Co(n,t,e);case X.NANOSECOND:return No(n,t,e)}},Uo=({values:n,stride:t},e,r)=>{n[t*e]=r},Ro=({values:n,stride:t},e,r)=>{n[t*e]=r},ko=({values:n},t,e)=>{n.set(e.subarray(0,2),2*t)},Vo=({values:n},t,e)=>{n.set(e.subarray(0,2),2*t)},hu=(n,t,e)=>{switch(n.type.unit){case X.SECOND:return Uo(n,t,e);case X.MILLISECOND:return Ro(n,t,e);case X.MICROSECOND:return ko(n,t,e);case X.NANOSECOND:return Vo(n,t,e)}},du=({values:n},t,e)=>{n.set(e.subarray(0,4),4*t)},fu=(n,t,e)=>{const r=n.getChildAt(0),s=n.valueOffsets;for(let o=-1,i=s[t],a=s[t+1];i<a;)r.set(i++,e.get(++o))},pu=(n,t,e)=>{const r=n.getChildAt(0),s=n.valueOffsets,o=e instanceof Map?[...e]:Object.entries(e);for(let i=-1,a=s[t],c=s[t+1];a<c;)r.set(a++,o[++i])},yu=(n,t)=>(e,r,s)=>e&&e.set(n,t[s]),bu=(n,t)=>(e,r,s)=>e&&e.set(n,t.get(s)),mu=(n,t)=>(e,r,s)=>e&&e.set(n,t.get(r.name)),gu=(n,t)=>(e,r,s)=>e&&e.set(n,t[r.name]),vu=(n,t,e)=>{const r=e instanceof Map?mu(t,e):e instanceof P?bu(t,e):Array.isArray(e)?yu(t,e):gu(t,e);n.type.children.forEach((s,o)=>r(n.getChildAt(o),s,o))},wu=(n,t,e)=>{n.type.mode===ne.Dense?Po(n,t,e):zo(n,t,e)},Po=(n,t,e)=>{const r=n.typeIdToChildIndex[n.typeIds[t]],s=n.getChildAt(r);s&&s.set(n.valueOffsets[t],e)},zo=(n,t,e)=>{const r=n.typeIdToChildIndex[n.typeIds[t]],s=n.getChildAt(r);s&&s.set(t,e)},_u=(n,t,e)=>{const r=n.getKey(t);r!==null&&n.setValue(r,e)},Su=(n,t,e)=>{n.type.unit===ze.DAY_TIME?jo(n,t,e):$o(n,t,e)},jo=({values:n},t,e)=>{n.set(e.subarray(0,2),2*t)},$o=({values:n},t,e)=>{n[t]=e[0]*12+e[1]%12},Iu=(n,t,e)=>{const r=n.getChildAt(0),{stride:s}=n;for(let o=-1,i=t*s;++o<s;)r.set(i+o,e.get(o))};F.prototype.visitBool=ru;F.prototype.visitInt=au;F.prototype.visitInt8=Gt;F.prototype.visitInt16=Gt;F.prototype.visitInt32=Gt;F.prototype.visitInt64=Ei;F.prototype.visitUint8=Gt;F.prototype.visitUint16=Gt;F.prototype.visitUint32=Gt;F.prototype.visitUint64=Ei;F.prototype.visitFloat=cu;F.prototype.visitFloat16=Lo;F.prototype.visitFloat32=Gt;F.prototype.visitFloat64=Gt;F.prototype.visitUtf8=ou;F.prototype.visitBinary=su;F.prototype.visitFixedSizeBinary=iu;F.prototype.visitDate=lu;F.prototype.visitDateDay=Fo;F.prototype.visitDateMillisecond=xo;F.prototype.visitTimestamp=uu;F.prototype.visitTimestampSecond=Eo;F.prototype.visitTimestampMillisecond=Mo;F.prototype.visitTimestampMicrosecond=Co;F.prototype.visitTimestampNanosecond=No;F.prototype.visitTime=hu;F.prototype.visitTimeSecond=Uo;F.prototype.visitTimeMillisecond=Ro;F.prototype.visitTimeMicrosecond=ko;F.prototype.visitTimeNanosecond=Vo;F.prototype.visitDecimal=du;F.prototype.visitList=fu;F.prototype.visitStruct=vu;F.prototype.visitUnion=wu;F.prototype.visitDenseUnion=Po;F.prototype.visitSparseUnion=zo;F.prototype.visitDictionary=_u;F.prototype.visitInterval=Su;F.prototype.visitIntervalDayTime=jo;F.prototype.visitIntervalYearMonth=$o;F.prototype.visitFixedSizeList=Iu;F.prototype.visitMap=pu;const Sr=new F;class Bu extends k{visitNull(){return il}visitBool(){return rl}visitInt(){return se}visitInt8(){return yl}visitInt16(){return bl}visitInt32(){return ml}visitInt64(){return gl}visitUint8(){return vl}visitUint16(){return wl}visitUint32(){return _l}visitUint64(){return Sl}visitFloat(){return wr}visitFloat16(){return hl}visitFloat32(){return dl}visitFloat64(){return fl}visitUtf8(){return Di}visitBinary(){return vo}visitFixedSizeBinary(){return ll}visitDate(){return Ti}visitDateDay(){return sl}visitDateMillisecond(){return ol}visitTimestamp(){return On}visitTimestampSecond(){return Dl}visitTimestampMillisecond(){return Ol}visitTimestampMicrosecond(){return Fl}visitTimestampNanosecond(){return xl}visitTime(){return Dn}visitTimeSecond(){return Il}visitTimeMillisecond(){return Bl}visitTimeMicrosecond(){return Tl}visitTimeNanosecond(){return Al}visitDecimal(){return al}visitList(){return Gl}visitStruct(){return Zl}visitUnion(){return xi}visitDenseUnion(){return Ql}visitSparseUnion(){return Xl}visitDictionary(){return cl}visitInterval(){return Ai}visitIntervalDayTime(){return Ll}visitIntervalYearMonth(){return El}visitFixedSizeList(){return Kl}visitMap(){return Jl}}const Wo=new Bu;st.new=Yo;function Yo(n){const t=n.type,e=new(Wo.getVisitFn(t)())(n);if(t.children&&t.children.length>0){const r=n.children||[],s={nullValues:n.nullValues},o=Array.isArray(r)?((i,a)=>r[a]||s):(({name:i})=>r[i]||s);t.children.forEach((i,a)=>{const{type:c}=i,l=o(i,a);e.children.push(Yo({...l,type:c}))})}return e}Object.keys(h).map(n=>h[n]).filter(n=>typeof n=="number"&&n!==h.NONE).forEach(n=>{const t=Wo.visit(n);t.prototype._setValue=Sr.getVisitFn(n)});Di.prototype._setValue=Sr.visitBinary;var Ge;(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}static getRootAsFooter(i,a){return(a||new s).__init(i.readInt32(i.position())+i.position(),i)}version(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt16(this.bb_pos+i):y.apache.arrow.flatbuf.MetadataVersion.V1}schema(i){let a=this.bb.__offset(this.bb_pos,6);return a?(i||new y.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}dictionaries(i,a){let c=this.bb.__offset(this.bb_pos,8);return c?(a||new n.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+c)+i*24,this.bb):null}dictionariesLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}recordBatches(i,a){let c=this.bb.__offset(this.bb_pos,10);return c?(a||new n.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+c)+i*24,this.bb):null}recordBatchesLength(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__vector_len(this.bb_pos+i):0}static startFooter(i){i.startObject(4)}static addVersion(i,a){i.addFieldInt16(0,a,y.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(i,a){i.addFieldOffset(1,a,0)}static addDictionaries(i,a){i.addFieldOffset(2,a,0)}static startDictionariesVector(i,a){i.startVector(24,a,8)}static addRecordBatches(i,a){i.addFieldOffset(3,a,0)}static startRecordBatchesVector(i,a){i.startVector(24,a,8)}static endFooter(i){return i.endObject()}static finishFooterBuffer(i,a){i.finish(a)}static createFooter(i,a,c,l,u){return s.startFooter(i),s.addVersion(i,a),s.addSchema(i,c),s.addDictionaries(i,l),s.addRecordBatches(i,u),s.endFooter(i)}}r.Footer=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(Ge||(Ge={}));(function(n){(function(t){(function(e){(function(r){class s{constructor(){this.bb=null,this.bb_pos=0}__init(i,a){return this.bb_pos=i,this.bb=a,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(i,a,c,l){return i.prep(8,24),i.writeInt64(l),i.pad(4),i.writeInt32(c),i.writeInt64(a),i.offset()}}r.Block=s})(e.flatbuf||(e.flatbuf={}))})(t.arrow||(t.arrow={}))})(n.apache||(n.apache={}))})(Ge||(Ge={}));var As=f.Long,Tu=f.Builder,Au=f.ByteBuffer,Du=Ge.apache.arrow.flatbuf.Block,zt=Ge.apache.arrow.flatbuf.Footer;class gn{constructor(t,e=Mt.V4,r,s){this.schema=t,this.version=e,r&&(this._recordBatches=r),s&&(this._dictionaryBatches=s)}static decode(t){t=new Au(V(t));const e=zt.getRootAsFooter(t),r=Q.decode(e.schema());return new Ou(r,e)}static encode(t){const e=new Tu,r=Q.encode(e,t.schema);zt.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach(i=>de.encode(e,i));const s=e.endVector();zt.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach(i=>de.encode(e,i));const o=e.endVector();return zt.startFooter(e),zt.addSchema(e,r),zt.addVersion(e,Mt.V4),zt.addRecordBatches(e,s),zt.addDictionaries(e,o),zt.finishFooterBuffer(e,zt.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,r=this.numRecordBatches;++e<r;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,r=this.numDictionaries;++e<r;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Ou extends gn{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return de.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return de.decode(e)}return null}}class de{static decode(t){return new de(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:r}=e,s=new As(e.offset,0),o=new As(e.bodyLength,0);return Du.createBlock(t,s,r,o)}constructor(t,e,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof e=="number"?e:e.low}}class cn extends wc{write(t){if((t=V(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?ti(this.toUint8Array(!0)):this.toUint8Array(!1).then(ti)}toUint8Array(t=!1){return t?Yt(this._values)[0]:(async()=>{let e=[],r=0;for await(const s of this)e.push(s),r+=s.byteLength;return Yt(e,r)[0]})()}}class ar{constructor(t){t&&(this.source=new Fu(Tt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Se{constructor(t){t instanceof Se?this.source=t.source:t instanceof cn?this.source=new be(Tt.fromAsyncIterable(t)):ao(t)?this.source=new be(Tt.fromNodeStream(t)):hi(t)?this.source=new be(Tt.fromDOMStream(t)):oo(t)?this.source=new be(Tt.fromDOMStream(t.body)):Rt(t)?this.source=new be(Tt.fromIterable(t)):ue(t)?this.source=new be(Tt.fromAsyncIterable(t)):re(t)&&(this.source=new be(Tt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Fu{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||it)}return(t){return Object.create(this.source.return&&this.source.return(t)||it)}}class be{constructor(t){this.source=t,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}async cancel(t){await this.return(t)}get closed(){return this._closedPromise}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}async next(t,e="read"){return await this.source.next({cmd:e,size:t})}async throw(t){const e=this.source.throw&&await this.source.throw(t)||it;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}async return(t){const e=this.source.return&&await this.source.return(t)||it;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}}class Ds extends ar{constructor(t,e){super(),this.position=0,this.buffer=V(t),this.size=typeof e>"u"?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:r}=this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:r,position:s}=this;return e&&s<r?(typeof t!="number"&&(t=1/0),this.position=Math.min(r,s+Math.min(r-s,t)),e.subarray(s,this.position)):null}readAt(t,e){const r=this.buffer,s=Math.min(this.size,t+e);return r?r.subarray(t,s):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class cr extends Se{constructor(t,e){super(),this.position=0,this._handle=t,typeof e=="number"?this.size=e:this._pending=(async()=>{this.size=(await t.stat()).size,delete this._pending})()}async readInt32(t){const{buffer:e,byteOffset:r}=await this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}async seek(t){return this._pending&&await this._pending,this.position=Math.min(t,this.size),t<this.size}async read(t){this._pending&&await this._pending;const{_handle:e,size:r,position:s}=this;if(e&&s<r){typeof t!="number"&&(t=1/0);let o=s,i=0,a=0,c=Math.min(r,o+Math.min(r-o,t)),l=new Uint8Array(Math.max(0,(this.position=c)-o));for(;(o+=a)<c&&(i+=a)<l.byteLength;)({bytesRead:a}=await e.read(l,i,l.byteLength-i,o));return l}return null}async readAt(t,e){this._pending&&await this._pending;const{_handle:r,size:s}=this;if(r&&t+e<s){const o=Math.min(s,t+e),i=new Uint8Array(o-t);return(await r.read(i,0,e,t)).buffer}return new Uint8Array(e)}async close(){const t=this._handle;this._handle=null,t&&await t.close()}async throw(t){return await this.close(),{done:!0,value:t}}async return(t){return await this.close(),{done:!0,value:t}}}const xu=65536;function Ee(n){return n<0&&(n=4294967295+n+1),`0x${n.toString(16)}`}const Ke=8,Mi=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Ho{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let s=e[3]*r[3];this.buffer[0]=s&65535;let o=s>>>16;return s=e[2]*r[3],o+=s,s=e[3]*r[2]>>>0,o+=s,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<s?xu:0,this.buffer[1]+=o>>>16,this.buffer[1]+=e[1]*r[3]+e[2]*r[2]+e[3]*r[1],this.buffer[1]+=e[0]*r[3]+e[1]*r[2]+e[2]*r[1]+e[3]*r[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Ee(this.buffer[1])} ${Ee(this.buffer[0])}`}}class Z extends Ho{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return Z.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return Z.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.length;let s=new Z(e);for(let o=0;o<r;){const i=Ke<r-o?Ke:r-o,a=new Z(new Uint32Array([parseInt(t.substr(o,i),10),0])),c=new Z(new Uint32Array([Mi[i],0]));s.times(c),s.plus(a),o+=i}return s}static convertArray(t){const e=new Uint32Array(t.length*2);for(let r=-1,s=t.length;++r<s;)Z.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new Z(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Z(new Uint32Array(t.buffer)).plus(e)}}class gt extends Ho{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,r=t.buffer[1]<<0;return e<r||e===r&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return gt.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return gt.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.startsWith("-"),s=t.length;let o=new gt(e);for(let i=r?1:0;i<s;){const a=Ke<s-i?Ke:s-i,c=new gt(new Uint32Array([parseInt(t.substr(i,a),10),0])),l=new gt(new Uint32Array([Mi[a],0]));o.times(l),o.plus(c),i+=a}return r?o.negate():o}static convertArray(t){const e=new Uint32Array(t.length*2);for(let r=-1,s=t.length;++r<s;)gt.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new gt(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new gt(new Uint32Array(t.buffer)).plus(e)}}class $t{constructor(t){this.buffer=t}high(){return new gt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new gt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const e=new Z(new Uint32Array([this.buffer[3],0])),r=new Z(new Uint32Array([this.buffer[2],0])),s=new Z(new Uint32Array([this.buffer[1],0])),o=new Z(new Uint32Array([this.buffer[0],0])),i=new Z(new Uint32Array([t.buffer[3],0])),a=new Z(new Uint32Array([t.buffer[2],0])),c=new Z(new Uint32Array([t.buffer[1],0])),l=new Z(new Uint32Array([t.buffer[0],0]));let u=Z.multiply(o,l);this.buffer[0]=u.low();let p=new Z(new Uint32Array([u.high(),0]));return u=Z.multiply(s,l),p.plus(u),u=Z.multiply(o,c),p.plus(u),this.buffer[1]=p.low(),this.buffer[3]=p.lessThan(u)?1:0,this.buffer[2]=p.high(),new Z(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Z.multiply(r,l)).plus(Z.multiply(s,c)).plus(Z.multiply(o,a)),this.buffer[3]+=Z.multiply(e,l).plus(Z.multiply(r,c)).plus(Z.multiply(s,a)).plus(Z.multiply(o,i)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${Ee(this.buffer[3])} ${Ee(this.buffer[2])} ${Ee(this.buffer[1])} ${Ee(this.buffer[0])}`}static multiply(t,e){return new $t(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new $t(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return $t.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return $t.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const r=t.startsWith("-"),s=t.length;let o=new $t(e);for(let i=r?1:0;i<s;){const a=Ke<s-i?Ke:s-i,c=new $t(new Uint32Array([parseInt(t.substr(i,a),10),0,0,0])),l=new $t(new Uint32Array([Mi[a],0,0,0]));o.times(l),o.plus(c),i+=a}return r?o.negate():o}static convertArray(t){const e=new Uint32Array(t.length*4);for(let r=-1,s=t.length;++r<s;)$t.from(t[r],new Uint32Array(e.buffer,e.byteOffset+16*r,4));return e}}class qo extends k{constructor(t,e,r,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=r,this.dictionaries=s}visit(t){return super.visit(t instanceof z?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return _.Null(t,0,e)}visitBool(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Bool(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitInt(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Int(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFloat(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Float(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitUtf8(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Utf8(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Binary(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.FixedSizeBinary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDate(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Date(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTimestamp(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Timestamp(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTime(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Time(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDecimal(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Decimal(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitList(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.List(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Struct(t,0,e,r,this.readNullBitmap(t,r),this.visitMany(t.children))}visitUnion(t){return t.mode===ne.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Dictionary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t.indices),this.readDictionary(t))}visitInterval(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Interval(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFixedSizeList(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.FixedSizeList(t,0,e,r,this.readNullBitmap(t,r),this.visit(t.children[0]))}visitMap(t,{length:e,nullCount:r}=this.nextFieldNode()){return _.Map(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,r=this.nextBufferRange()){return e>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Lu extends qo{constructor(t,e,r,s){super(new Uint8Array(0),e,r,s),this.sources=t}readNullBitmap(t,e,{offset:r}=this.nextBufferRange()){return e<=0?new Uint8Array(0):Qn(this.sources[r])}readOffsets(t,{offset:e}=this.nextBufferRange()){return K(Uint8Array,K(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return K(Uint8Array,K(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:r}=this;return C.isTimestamp(t)||(C.isInt(t)||C.isTime(t))&&t.bitWidth===64||C.isDate(t)&&t.unit===Ht.MILLISECOND?K(Uint8Array,gt.convertArray(r[e])):C.isDecimal(t)?K(Uint8Array,$t.convertArray(r[e])):C.isBinary(t)||C.isFixedSizeBinary(t)?Eu(r[e]):C.isBool(t)?Qn(r[e]):C.isUtf8(t)?pr(r[e].join("")):K(Uint8Array,K(t.ArrayType,r[e].map(s=>+s)))}}function Eu(n){const t=n.join(""),e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r>>1]=parseInt(t.substr(r,2),16);return e}var Mu=f.Long,Os=y.apache.arrow.flatbuf.Null,Rn=y.apache.arrow.flatbuf.Int,$r=y.apache.arrow.flatbuf.FloatingPoint,Fs=y.apache.arrow.flatbuf.Binary,xs=y.apache.arrow.flatbuf.Bool,Ls=y.apache.arrow.flatbuf.Utf8,kn=y.apache.arrow.flatbuf.Decimal,Wr=y.apache.arrow.flatbuf.Date,Vn=y.apache.arrow.flatbuf.Time,Pn=y.apache.arrow.flatbuf.Timestamp,Yr=y.apache.arrow.flatbuf.Interval,Es=y.apache.arrow.flatbuf.List,Ms=y.apache.arrow.flatbuf.Struct_,Fe=y.apache.arrow.flatbuf.Union,en=y.apache.arrow.flatbuf.DictionaryEncoding,Hr=y.apache.arrow.flatbuf.FixedSizeBinary,qr=y.apache.arrow.flatbuf.FixedSizeList,Gr=y.apache.arrow.flatbuf.Map;class Cu extends k{visit(t,e){return t==null||e==null?void 0:super.visit(t,e)}visitNull(t,e){return Os.startNull(e),Os.endNull(e)}visitInt(t,e){return Rn.startInt(e),Rn.addBitWidth(e,t.bitWidth),Rn.addIsSigned(e,t.isSigned),Rn.endInt(e)}visitFloat(t,e){return $r.startFloatingPoint(e),$r.addPrecision(e,t.precision),$r.endFloatingPoint(e)}visitBinary(t,e){return Fs.startBinary(e),Fs.endBinary(e)}visitBool(t,e){return xs.startBool(e),xs.endBool(e)}visitUtf8(t,e){return Ls.startUtf8(e),Ls.endUtf8(e)}visitDecimal(t,e){return kn.startDecimal(e),kn.addScale(e,t.scale),kn.addPrecision(e,t.precision),kn.endDecimal(e)}visitDate(t,e){return Wr.startDate(e),Wr.addUnit(e,t.unit),Wr.endDate(e)}visitTime(t,e){return Vn.startTime(e),Vn.addUnit(e,t.unit),Vn.addBitWidth(e,t.bitWidth),Vn.endTime(e)}visitTimestamp(t,e){const r=t.timezone&&e.createString(t.timezone)||void 0;return Pn.startTimestamp(e),Pn.addUnit(e,t.unit),r!==void 0&&Pn.addTimezone(e,r),Pn.endTimestamp(e)}visitInterval(t,e){return Yr.startInterval(e),Yr.addUnit(e,t.unit),Yr.endInterval(e)}visitList(t,e){return Es.startList(e),Es.endList(e)}visitStruct(t,e){return Ms.startStruct_(e),Ms.endStruct_(e)}visitUnion(t,e){Fe.startTypeIdsVector(e,t.typeIds.length);const r=Fe.createTypeIdsVector(e,t.typeIds);return Fe.startUnion(e),Fe.addMode(e,t.mode),Fe.addTypeIds(e,r),Fe.endUnion(e)}visitDictionary(t,e){const r=this.visit(t.indices,e);return en.startDictionaryEncoding(e),en.addId(e,new Mu(t.id,0)),en.addIsOrdered(e,t.isOrdered),r!==void 0&&en.addIndexType(e,r),en.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Hr.startFixedSizeBinary(e),Hr.addByteWidth(e,t.byteWidth),Hr.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return qr.startFixedSizeList(e),qr.addListSize(e,t.listSize),qr.endFixedSizeList(e)}visitMap(t,e){return Gr.startMap(e),Gr.addKeysSorted(e,t.keysSorted),Gr.endMap(e)}}const Kr=new Cu;function Nu(n,t=new Map){return new Q(Ru(n,t),Wn(n.customMetadata),t)}function Go(n){return new Ot(n.count,Ko(n.columns),Jo(n.columns))}function Uu(n){return new qt(Go(n.data),n.id,n.isDelta)}function Ru(n,t){return(n.fields||[]).filter(Boolean).map(e=>z.fromJSON(e,t))}function Cs(n,t){return(n.children||[]).filter(Boolean).map(e=>z.fromJSON(e,t))}function Ko(n){return(n||[]).reduce((t,e)=>[...t,new De(e.count,ku(e.VALIDITY)),...Ko(e.children)],[])}function Jo(n,t=[]){for(let e=-1,r=(n||[]).length;++e<r;){const s=n[e];s.VALIDITY&&t.push(new Wt(t.length,s.VALIDITY.length)),s.TYPE&&t.push(new Wt(t.length,s.TYPE.length)),s.OFFSET&&t.push(new Wt(t.length,s.OFFSET.length)),s.DATA&&t.push(new Wt(t.length,s.DATA.length)),t=Jo(s.children,t)}return t}function ku(n){return(n||[]).reduce((t,e)=>t+ +(e===0),0)}function Vu(n,t){let e,r,s,o,i,a;return!t||!(o=n.dictionary)?(i=Us(n,Cs(n,t)),s=new z(n.name,i,n.nullable,Wn(n.customMetadata))):t.has(e=o.id)?(r=(r=o.indexType)?Ns(r):new we,a=new he(t.get(e),r,e,o.isOrdered),s=new z(n.name,a,n.nullable,Wn(n.customMetadata))):(r=(r=o.indexType)?Ns(r):new we,t.set(e,i=Us(n,Cs(n,t))),a=new he(i,r,e,o.isOrdered),s=new z(n.name,a,n.nullable,Wn(n.customMetadata))),s||null}function Wn(n){return new Map(Object.entries(n||{}))}function Ns(n){return new wt(n.isSigned,n.bitWidth)}function Us(n,t){const e=n.type.name;switch(e){case"NONE":return new je;case"null":return new je;case"binary":return new dn;case"utf8":return new Ye;case"bool":return new fn;case"list":return new qe((t||[])[0]);case"struct":return new kt(t||[]);case"struct_":return new kt(t||[])}switch(e){case"int":{const r=n.type;return new wt(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=n.type;return new _e(xt[r.precision])}case"decimal":{const r=n.type;return new tr(r.scale,r.precision)}case"date":{const r=n.type;return new He(Ht[r.unit])}case"time":{const r=n.type;return new er(X[r.unit],r.bitWidth)}case"timestamp":{const r=n.type;return new nr(X[r.unit],r.timezone)}case"interval":{const r=n.type;return new rr(ze[r.unit])}case"union":{const r=n.type;return new pn(ne[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=n.type;return new ir(r.byteWidth)}case"fixedsizelist":{const r=n.type;return new yn(r.listSize,(t||[])[0])}case"map":{const r=n.type;return new bn((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${e}"`)}var Ie=f.Long,Pu=f.Builder,zu=f.ByteBuffer,ct=y.apache.arrow.flatbuf.Type,Et=y.apache.arrow.flatbuf.Field,Qt=y.apache.arrow.flatbuf.Schema,ju=y.apache.arrow.flatbuf.Buffer,oe=ft.apache.arrow.flatbuf.Message,ce=y.apache.arrow.flatbuf.KeyValue,$u=ft.apache.arrow.flatbuf.FieldNode,Rs=y.apache.arrow.flatbuf.Endianness,ae=ft.apache.arrow.flatbuf.RecordBatch,Le=ft.apache.arrow.flatbuf.DictionaryBatch;class yt{constructor(t,e,r,s){this._version=e,this._headerType=r,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,e){const r=new yt(0,Mt.V4,e);return r._createHeader=Wu(t,e),r}static decode(t){t=new zu(V(t));const e=oe.getRootAsMessage(t),r=e.bodyLength(),s=e.version(),o=e.headerType(),i=new yt(r,s,o);return i._createHeader=Yu(e,o),i}static encode(t){let e=new Pu,r=-1;return t.isSchema()?r=Q.encode(e,t.header()):t.isRecordBatch()?r=Ot.encode(e,t.header()):t.isDictionaryBatch()&&(r=qt.encode(e,t.header())),oe.startMessage(e),oe.addVersion(e,Mt.V4),oe.addHeader(e,r),oe.addHeaderType(e,t.headerType),oe.addBodyLength(e,new Ie(t.bodyLength,0)),oe.finishMessageBuffer(e,oe.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof Q)return new yt(0,Mt.V4,tt.Schema,t);if(t instanceof Ot)return new yt(e,Mt.V4,tt.RecordBatch,t);if(t instanceof qt)return new yt(e,Mt.V4,tt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===tt.Schema}isRecordBatch(){return this.headerType===tt.RecordBatch}isDictionaryBatch(){return this.headerType===tt.DictionaryBatch}}let Ot=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,e,r){this._nodes=e,this._buffers=r,this._length=typeof t=="number"?t:t.low}};class qt{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,e,r=!1){this._data=t,this._isDelta=r,this._id=typeof e=="number"?e:e.low}}class Wt{constructor(t,e){this.offset=typeof t=="number"?t:t.low,this.length=typeof e=="number"?e:e.low}}class De{constructor(t,e){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof e=="number"?e:e.low}}function Wu(n,t){return(()=>{switch(t){case tt.Schema:return Q.fromJSON(n);case tt.RecordBatch:return Ot.fromJSON(n);case tt.DictionaryBatch:return qt.fromJSON(n)}throw new Error(`Unrecognized Message type: { name: ${tt[t]}, type: ${t} }`)})}function Yu(n,t){return(()=>{switch(t){case tt.Schema:return Q.decode(n.header(new Qt));case tt.RecordBatch:return Ot.decode(n.header(new ae),n.version());case tt.DictionaryBatch:return qt.decode(n.header(new Le),n.version())}throw new Error(`Unrecognized Message type: { name: ${tt[t]}, type: ${t} }`)})}z.encode=nh;z.decode=th;z.fromJSON=Vu;Q.encode=eh;Q.decode=Hu;Q.fromJSON=Nu;Ot.encode=rh;Ot.decode=qu;Ot.fromJSON=Go;qt.encode=ih;qt.decode=Gu;qt.fromJSON=Uu;De.encode=sh;De.decode=Ju;Wt.encode=oh;Wt.decode=Ku;function Hu(n,t=new Map){const e=Qu(n,t);return new Q(e,Yn(n),t)}function qu(n,t=Mt.V4){return new Ot(n.length(),Zu(n),Xu(n,t))}function Gu(n,t=Mt.V4){return new qt(Ot.decode(n.data(),t),n.id(),n.isDelta())}function Ku(n){return new Wt(n.offset(),n.length())}function Ju(n){return new De(n.length(),n.nullCount())}function Zu(n){const t=[];for(let e,r=-1,s=-1,o=n.nodesLength();++r<o;)(e=n.nodes(r))&&(t[++s]=De.decode(e));return t}function Xu(n,t){const e=[];for(let r,s=-1,o=-1,i=n.buffersLength();++s<i;)(r=n.buffers(s))&&(t<Mt.V4&&(r.bb_pos+=8*(s+1)),e[++o]=Wt.decode(r));return e}function Qu(n,t){const e=[];for(let r,s=-1,o=-1,i=n.fieldsLength();++s<i;)(r=n.fields(s))&&(e[++o]=z.decode(r,t));return e}function ks(n,t){const e=[];for(let r,s=-1,o=-1,i=n.childrenLength();++s<i;)(r=n.children(s))&&(e[++o]=z.decode(r,t));return e}function th(n,t){let e,r,s,o,i,a;return!t||!(a=n.dictionary())?(s=Ps(n,ks(n,t)),r=new z(n.name(),s,n.nullable(),Yn(n))):t.has(e=a.id().low)?(o=(o=a.indexType())?Vs(o):new we,i=new he(t.get(e),o,e,a.isOrdered()),r=new z(n.name(),i,n.nullable(),Yn(n))):(o=(o=a.indexType())?Vs(o):new we,t.set(e,s=Ps(n,ks(n,t))),i=new he(s,o,e,a.isOrdered()),r=new z(n.name(),i,n.nullable(),Yn(n))),r||null}function Yn(n){const t=new Map;if(n)for(let e,r,s=-1,o=n.customMetadataLength()|0;++s<o;)(e=n.customMetadata(s))&&(r=e.key())!=null&&t.set(r,e.value());return t}function Vs(n){return new wt(n.isSigned(),n.bitWidth())}function Ps(n,t){const e=n.typeType();switch(e){case ct.NONE:return new je;case ct.Null:return new je;case ct.Binary:return new dn;case ct.Utf8:return new Ye;case ct.Bool:return new fn;case ct.List:return new qe((t||[])[0]);case ct.Struct_:return new kt(t||[])}switch(e){case ct.Int:{const r=n.type(new y.apache.arrow.flatbuf.Int);return new wt(r.isSigned(),r.bitWidth())}case ct.FloatingPoint:{const r=n.type(new y.apache.arrow.flatbuf.FloatingPoint);return new _e(r.precision())}case ct.Decimal:{const r=n.type(new y.apache.arrow.flatbuf.Decimal);return new tr(r.scale(),r.precision())}case ct.Date:{const r=n.type(new y.apache.arrow.flatbuf.Date);return new He(r.unit())}case ct.Time:{const r=n.type(new y.apache.arrow.flatbuf.Time);return new er(r.unit(),r.bitWidth())}case ct.Timestamp:{const r=n.type(new y.apache.arrow.flatbuf.Timestamp);return new nr(r.unit(),r.timezone())}case ct.Interval:{const r=n.type(new y.apache.arrow.flatbuf.Interval);return new rr(r.unit())}case ct.Union:{const r=n.type(new y.apache.arrow.flatbuf.Union);return new pn(r.mode(),r.typeIdsArray()||[],t||[])}case ct.FixedSizeBinary:{const r=n.type(new y.apache.arrow.flatbuf.FixedSizeBinary);return new ir(r.byteWidth())}case ct.FixedSizeList:{const r=n.type(new y.apache.arrow.flatbuf.FixedSizeList);return new yn(r.listSize(),(t||[])[0])}case ct.Map:{const r=n.type(new y.apache.arrow.flatbuf.Map);return new bn((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ct[e]}" (${e})`)}function eh(n,t){const e=t.fields.map(o=>z.encode(n,o));Qt.startFieldsVector(n,e.length);const r=Qt.createFieldsVector(n,e),s=t.metadata&&t.metadata.size>0?Qt.createCustomMetadataVector(n,[...t.metadata].map(([o,i])=>{const a=n.createString(`${o}`),c=n.createString(`${i}`);return ce.startKeyValue(n),ce.addKey(n,a),ce.addValue(n,c),ce.endKeyValue(n)})):-1;return Qt.startSchema(n),Qt.addFields(n,r),Qt.addEndianness(n,ah?Rs.Little:Rs.Big),s!==-1&&Qt.addCustomMetadata(n,s),Qt.endSchema(n)}function nh(n,t){let e=-1,r=-1,s=-1,o=t.type,i=t.typeId;C.isDictionary(o)?(i=o.dictionary.typeId,s=Kr.visit(o,n),r=Kr.visit(o.dictionary,n)):r=Kr.visit(o,n);const a=(o.children||[]).map(u=>z.encode(n,u)),c=Et.createChildrenVector(n,a),l=t.metadata&&t.metadata.size>0?Et.createCustomMetadataVector(n,[...t.metadata].map(([u,p])=>{const b=n.createString(`${u}`),g=n.createString(`${p}`);return ce.startKeyValue(n),ce.addKey(n,b),ce.addValue(n,g),ce.endKeyValue(n)})):-1;return t.name&&(e=n.createString(t.name)),Et.startField(n),Et.addType(n,r),Et.addTypeType(n,i),Et.addChildren(n,c),Et.addNullable(n,!!t.nullable),e!==-1&&Et.addName(n,e),s!==-1&&Et.addDictionary(n,s),l!==-1&&Et.addCustomMetadata(n,l),Et.endField(n)}function rh(n,t){const e=t.nodes||[],r=t.buffers||[];ae.startNodesVector(n,e.length),e.slice().reverse().forEach(i=>De.encode(n,i));const s=n.endVector();ae.startBuffersVector(n,r.length),r.slice().reverse().forEach(i=>Wt.encode(n,i));const o=n.endVector();return ae.startRecordBatch(n),ae.addLength(n,new Ie(t.length,0)),ae.addNodes(n,s),ae.addBuffers(n,o),ae.endRecordBatch(n)}function ih(n,t){const e=Ot.encode(n,t.data);return Le.startDictionaryBatch(n),Le.addId(n,new Ie(t.id,0)),Le.addIsDelta(n,t.isDelta),Le.addData(n,e),Le.endDictionaryBatch(n)}function sh(n,t){return $u.createFieldNode(n,new Ie(t.length,0),new Ie(t.nullCount,0))}function oh(n,t){return ju.createBuffer(n,new Ie(t.offset,0),new Ie(t.length,0))}const ah=(function(){const n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256})();var Zo=f.ByteBuffer;const Ci=n=>`Expected ${tt[n]} Message in stream, but was null or length 0.`,Ni=n=>`Header pointer of flatbuffer-encoded ${tt[n]} Message is null or length 0.`,Xo=(n,t)=>`Expected to read ${n} metadata bytes, but only read ${t}.`,Qo=(n,t)=>`Expected to read ${n} bytes for message body, but only read ${t}.`;class ta{constructor(t){this.source=t instanceof ar?t:new ar(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?it:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(Ci(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=V(this.source.read(t));if(e.byteLength<t)throw new Error(Qo(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=tt.Schema,r=this.readMessage(e),s=r&&r.header();if(t&&!s)throw new Error(Ni(e));return s}readMetadataLength(){const t=this.source.read(Ir),e=t&&new Zo(t),r=e&&e.readInt32(0)||0;return{done:r===0,value:r}}readMetadata(t){const e=this.source.read(t);if(!e)return it;if(e.byteLength<t)throw new Error(Xo(t,e.byteLength));return{done:!1,value:yt.decode(e)}}}class ch{constructor(t,e){this.source=t instanceof Se?t:so(t)?new cr(t,e):new Se(t)}[Symbol.asyncIterator](){return this}async next(){let t;return(t=await this.readMetadataLength()).done||t.value===-1&&(t=await this.readMetadataLength()).done||(t=await this.readMetadata(t.value)).done?it:t}async throw(t){return await this.source.throw(t)}async return(t){return await this.source.return(t)}async readMessage(t){let e;if((e=await this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(Ci(t));return e.value}async readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=V(await this.source.read(t));if(e.byteLength<t)throw new Error(Qo(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}async readSchema(t=!1){const e=tt.Schema,r=await this.readMessage(e),s=r&&r.header();if(t&&!s)throw new Error(Ni(e));return s}async readMetadataLength(){const t=await this.source.read(Ir),e=t&&new Zo(t),r=e&&e.readInt32(0)||0;return{done:r===0,value:r}}async readMetadata(t){const e=await this.source.read(t);if(!e)return it;if(e.byteLength<t)throw new Error(Xo(t,e.byteLength));return{done:!1,value:yt.decode(e)}}}class lh extends ta{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof ws?t:new ws(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:yt.fromJSON(t.schema,tt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];return this._body=e.data.columns,{done:!1,value:yt.fromJSON(e,tt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];return this._body=e.columns,{done:!1,value:yt.fromJSON(e,tt.RecordBatch)}}return this._body=[],it}readMessageBody(t){return e(this._body);function e(r){return(r||[]).reduce((s,o)=>[...s,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE&&[o.TYPE]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...e(o.children)],[])}}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(Ci(t));return e.value}readSchema(){const t=tt.Schema,e=this.readMessage(t),r=e&&e.header();if(!e||!r)throw new Error(Ni(t));return r}}const Ir=4,ai="ARROW1",vn=new Uint8Array(ai.length);for(let n=0;n<ai.length;n+=1)vn[n]=ai.charCodeAt(n);function Ui(n,t=0){for(let e=-1,r=vn.length;++e<r;)if(vn[e]!==n[t+e])return!1;return!0}const Fn=vn.length,ea=Fn+Ir,uh=Fn*2+Ir;class ot extends k{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=new ot,r=Hl(vt,t),[s=e]=e.visitMany(r);return s}visit(t){if(!C.isDictionary(t.type)){const{data:e,length:r,nullCount:s}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");C.isNull(t.type)||Nt.call(this,s<=0?new Uint8Array(0):pi(e.offset,r,e.nullBitmap)),this.nodes.push(new De(r,s))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Nt(n){const t=n.byteLength+7&-8;return this.buffers.push(n),this.bufferRegions.push(new Wt(this._byteLength,t)),this._byteLength+=t,this}function hh(n){const{type:t,length:e,typeIds:r,valueOffsets:s}=n;if(Nt.call(this,r),t.mode===ne.Sparse)return ci.call(this,n);if(t.mode===ne.Dense){if(n.offset<=0)return Nt.call(this,s),ci.call(this,n);{const o=r.reduce((u,p)=>Math.max(u,p),r[0]),i=new Int32Array(o+1),a=new Int32Array(o+1).fill(-1),c=new Int32Array(e),l=fi(-s[0],e,s);for(let u,p,b=-1;++b<e;)(p=a[u=r[b]])===-1&&(p=a[u]=l[u]),c[b]=l[b]-p,++i[u];Nt.call(this,c);for(let u,p=-1,b=t.children.length;++p<b;)if(u=n.getChildAt(p)){const g=t.typeIds[p],v=Math.min(e,i[g]);this.visit(u.slice(a[g],v))}}}return this}function dh(n){let t;return n.nullCount>=n.length?Nt.call(this,new Uint8Array(0)):(t=n.values)instanceof Uint8Array?Nt.call(this,pi(n.offset,n.length,t)):Nt.call(this,Qn(n))}function pe(n){return Nt.call(this,n.values.subarray(0,n.length*n.stride))}function na(n){const{length:t,values:e,valueOffsets:r}=n,s=r[0],o=r[t],i=Math.min(o-s,e.byteLength-s);return Nt.call(this,fi(-r[0],t,r)),Nt.call(this,e.subarray(s,s+i)),this}function Ri(n){const{length:t,valueOffsets:e}=n;return e&&Nt.call(this,fi(e[0],t,e)),this.visit(n.getChildAt(0))}function ci(n){return this.visitMany(n.type.children.map((t,e)=>n.getChildAt(e)).filter(Boolean))[0]}ot.prototype.visitBool=dh;ot.prototype.visitInt=pe;ot.prototype.visitFloat=pe;ot.prototype.visitUtf8=na;ot.prototype.visitBinary=na;ot.prototype.visitFixedSizeBinary=pe;ot.prototype.visitDate=pe;ot.prototype.visitTimestamp=pe;ot.prototype.visitTime=pe;ot.prototype.visitDecimal=pe;ot.prototype.visitList=Ri;ot.prototype.visitStruct=ci;ot.prototype.visitUnion=hh;ot.prototype.visitInterval=pe;ot.prototype.visitFixedSizeList=Ri;ot.prototype.visitMap=Ri;class ki extends Ae{constructor(t){super(),this._position=0,this._started=!1,this._sink=new cn,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Dt(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return ue(t)?t.then(e=>this.writeAll(e)):re(t)?ji(this,t):zi(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){return t===this._sink||t instanceof cn?this._sink=t:(this._sink=new cn,t&&Ic(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Bc(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!e||!e.compareTo(this._schema))&&(e===null?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Y&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof vt&&!(e=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof vt?t instanceof Dr||this._writeRecordBatch(t):t instanceof Y?this.writeAll(t.chunks):Rt(t)&&this.writeAll(t)}_writeMessage(t,e=8){const r=e-1,s=yt.encode(t),o=s.byteLength,i=this._writeLegacyIpcFormat?4:8,a=o+i+r&~r,c=a-o-i;return t.headerType===tt.RecordBatch?this._recordBatchBlocks.push(new de(a,t.bodyLength,this._position)):t.headerType===tt.DictionaryBatch&&this._dictionaryBlocks.push(new de(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-i)),o>0&&this._write(s),this._writePadding(c)}_write(t){if(this._started){const e=V(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(yt.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(vn)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:r,bufferRegions:s,buffers:o}=ot.assemble(t),i=new Ot(t.length,r,s),a=yt.from(i,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(o)}_writeDictionaryBatch(t,e,r=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:s,nodes:o,bufferRegions:i,buffers:a}=ot.assemble(t),c=new Ot(t.length,o,i),l=new qt(c,e,r),u=yt.from(l,s);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,r,s;for(let o=-1,i=t.length;++o<i;)(e=t[o])&&(r=e.byteLength)>0&&(this._write(e),(s=(r+7&-8)-r)>0&&this._writePadding(s));return this}_writeDictionaries(t){for(let[e,r]of t.dictionaries){let s=this._dictionaryDeltaOffsets.get(e)||0;if(s===0||(r=r.slice(s)).length>0){const o="chunks"in r?r.chunks:[r];for(const i of o)this._writeDictionaryBatch(i,e,s>0),s+=i.length}}return this}}class Vi extends ki{static writeAll(t,e){const r=new Vi(e);return ue(t)?t.then(s=>r.writeAll(s)):re(t)?ji(r,t):zi(r,t)}}class Pi extends ki{constructor(){super(),this._autoDestroy=!0}static writeAll(t){const e=new Pi;return ue(t)?t.then(r=>e.writeAll(r)):re(t)?ji(e,t):zi(e,t)}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=gn.encode(new gn(t,Mt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function zi(n,t){let e=t;t instanceof Y&&(e=t.chunks,n.reset(void 0,t.schema));for(const r of e)n.write(r);return n.finish()}async function ji(n,t){for await(const e of t)n.write(e);return n.finish()}const Jr=new Uint8Array(0),ra=n=>[Jr,Jr,new Uint8Array(n),Jr];function fh(n,t,e=t.reduce((r,s)=>Math.max(r,s.length),0)){let r,s,o=-1,i=t.length;const a=[...n.fields],c=[],l=(e+63&-64)>>3;for(;++o<i;)(r=t[o])&&r.length===e?c[o]=r:((s=a[o]).nullable||(a[o]=a[o].clone({nullable:!0})),c[o]=r?r._changeLengthAndBackfillNullBitmap(e):_.new(s.type,0,e,e,ra(l)));return[new Q(a),e,c]}function ph(n){return ia(new Q(n.map(({field:t})=>t)),n)}function ia(n,t){return yh(n,t.map(e=>e instanceof dt?e.chunks.map(r=>r.data):[e.data]))}function yh(n,t){const e=[...n.fields],r=[],s={numBatches:t.reduce((p,b)=>Math.max(p,b.length),0)};let o=0,i=0,a=-1,c=t.length,l,u=[];for(;s.numBatches-- >0;){for(i=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),i=Math.min(i,l?l.length:i);isFinite(i)&&(u=bh(e,i,u,t,s),i>0&&(r[o++]=[i,u.slice()]))}return[n=new Q(e,n.metadata),r.map(p=>new vt(n,...p))]}function bh(n,t,e,r,s){let o,i,a=0,c=-1,l=r.length;const u=(t+63&-64)>>3;for(;++c<l;)(o=e[c])&&(a=o.length)>=t?a===t?e[c]=o:(e[c]=o.slice(0,t),o=o.slice(t,a-t),s.numBatches=Math.max(s.numBatches,r[c].unshift(o))):((i=n[c]).nullable||(n[c]=i.clone({nullable:!0})),e[c]=o?o._changeLengthAndBackfillNullBitmap(t):_.new(i.type,0,t,t,ra(u)));return e}class et extends P{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return`${h[this.typeId]}Vector`}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t,e=this._children){return P.new(t,e)}concat(...t){return dt.concat(this,...t)}slice(t,e){return Bo(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t;return(this.nullBitmap[e>>3]&1<<e%8)!==0}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=P.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,r){return t.clone(t.data.slice(e,r-e),null)}_bindDataAccessors(t){}}et.prototype[Symbol.isConcatSpreadable]=!0;class mh extends et{asUtf8(){return P.new(this.data.clone(new Ye))}}class gh extends et{static from(t){return Be(()=>new fn,t)}}class $i extends et{static from(...t){return t.length===2?Be(()=>t[1]===Ht.DAY?new Gc:new _s,t[0]):Be(()=>new _s,t[0])}}class vh extends $i{}class wh extends $i{}class _h extends et{}class Wi extends et{constructor(t){super(t),this.indices=P.new(t.clone(this.type.indices))}static from(...t){if(t.length===3){const[e,r,s]=t,o=new he(e.type,r,null,null);return P.new(_.Dictionary(o,0,s.length,0,null,s,e))}return Be(()=>t[0].type,t[0])}get dictionary(){return this.data.dictionary}reverseLookup(t){return this.dictionary.indexOf(t)}getKey(t){return this.indices.get(t)}getValue(t){return this.dictionary.get(t)}setKey(t,e){return this.indices.set(t,e)}setValue(t,e){return this.dictionary.set(t,e)}}Wi.prototype.indices=null;class Sh extends et{}class Ih extends et{}class Br extends et{static from(t){let e=Ah(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let r=Th(t.constructor)||e;if(e===null&&(e=r),e&&e===r){let s=new e,o=t.byteLength/s.ArrayType.BYTES_PER_ELEMENT;if(!Bh(e,t.constructor))return P.new(_.Float(s,0,o,0,null,t))}}if(e)return Be(()=>new e,t);throw t instanceof DataView||t instanceof ArrayBuffer?new TypeError(`Cannot infer float type from instance of ${t.constructor.name}`):new TypeError("Unrecognized FloatVector input")}}class sa extends Br{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}class oa extends Br{}class aa extends Br{}const Bh=(n,t)=>n===gr&&t!==Uint16Array,Th=n=>{switch(n){case Uint16Array:return gr;case Float32Array:return Ii;case Float64Array:return Bi;default:return null}},Ah=n=>{switch(n){case sa:return gr;case oa:return Ii;case aa:return Bi;default:return null}};class Yi extends et{}class Dh extends Yi{}class Oh extends Yi{}class Pt extends et{static from(...t){let[e,r=!1]=t,s=Lh(this,r);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){let o=xh(e.constructor,r)||s;if(s===null&&(s=o),s&&s===o){let i=new s,a=e.byteLength/i.ArrayType.BYTES_PER_ELEMENT;return Fh(s,e.constructor)&&(a*=.5),P.new(_.Int(i,0,a,0,null,e))}}if(s)return Be(()=>new s,e);throw e instanceof DataView||e instanceof ArrayBuffer?new TypeError(`Cannot infer integer type from instance of ${e.constructor.name}`):new TypeError("Unrecognized IntVector input")}}class ca extends Pt{}class la extends Pt{}class ua extends Pt{}class ha extends Pt{toBigInt64Array(){return Dc(this.values)}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}class da extends Pt{}class fa extends Pt{}class pa extends Pt{}class ya extends Pt{toBigUint64Array(){return Oc(this.values)}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const Fh=(n,t)=>(n===$e||n===We)&&(t===Int32Array||t===Uint32Array),xh=(n,t)=>{switch(n){case Int8Array:return gi;case Int16Array:return vi;case Int32Array:return t?$e:we;case Je:return $e;case Uint8Array:return wi;case Uint16Array:return _i;case Uint32Array:return t?We:Si;case _n:return We;default:return null}},Lh=(n,t)=>{switch(n){case ca:return gi;case la:return vi;case ua:return t?$e:we;case ha:return $e;case da:return wi;case fa:return _i;case pa:return t?We:Si;case ya:return We;default:return null}};class Eh extends et{}class Mh extends et{asList(){const t=this.type.children[0];return P.new(this.data.clone(new qe(t)))}bind(t){const e=this.getChildAt(0),{[t]:r,[t+1]:s}=this.valueOffsets;return new _o(e.slice(r,s))}}class Ch extends et{}const Nh=Symbol.for("rowIndex");class Tr extends et{bind(t){const e=this._row||(this._row=new So(this)),r=Object.create(e);return r[Nh]=t,r}}class xn extends et{}class Uh extends xn{}class Rh extends xn{}class kh extends xn{}class Vh extends xn{}class Ln extends et{}class Ph extends Ln{}class zh extends Ln{}class jh extends Ln{}class $h extends Ln{}class Hi extends et{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class Wh extends Hi{get valueOffsets(){return this.data.valueOffsets}}class Yh extends Hi{}class Hh extends et{static from(t){return Be(()=>new Ye,t)}asBinary(){return P.new(this.data.clone(new dn))}}function zs(n){return function(){return n(this)}}function qh(n){return function(t){return n(this,t)}}function js(n){return function(t,e){return n(this,t,e)}}class T extends k{}const Gh=(n,t)=>864e5*n[t],qi=(n,t)=>4294967296*n[t+1]+(n[t]>>>0),Kh=(n,t)=>4294967296*(n[t+1]/1e3)+(n[t]>>>0)/1e3,Jh=(n,t)=>4294967296*(n[t+1]/1e6)+(n[t]>>>0)/1e6,ba=n=>new Date(n),Zh=(n,t)=>ba(Gh(n,t)),Xh=(n,t)=>ba(qi(n,t)),Qh=(n,t)=>null,ma=(n,t,e)=>{const{[e]:r,[e+1]:s}=t;return r!=null&&s!=null?n.subarray(r,s):null},td=({offset:n,values:t},e)=>{const r=n+e;return(t[r>>3]&1<<r%8)!==0},ga=({values:n},t)=>Zh(n,t),va=({values:n},t)=>Xh(n,t*2),Kt=({stride:n,values:t},e)=>t[n*e],wa=({stride:n,values:t},e)=>ul(t[n*e]),Gi=({stride:n,values:t,type:e},r)=>Ze.new(t.subarray(n*r,n*(r+1)),e.isSigned),ed=({stride:n,values:t},e)=>t.subarray(n*e,n*(e+1)),nd=({values:n,valueOffsets:t},e)=>ma(n,t,e),rd=({values:n,valueOffsets:t},e)=>{const r=ma(n,t,e);return r!==null?ti(r):null},id=(n,t)=>n.type.bitWidth<64?Kt(n,t):Gi(n,t),sd=(n,t)=>n.type.precision!==xt.HALF?Kt(n,t):wa(n,t),od=(n,t)=>n.type.unit===Ht.DAY?ga(n,t):va(n,t),_a=({values:n},t)=>1e3*qi(n,t*2),Sa=({values:n},t)=>qi(n,t*2),Ia=({values:n},t)=>Kh(n,t*2),Ba=({values:n},t)=>Jh(n,t*2),ad=(n,t)=>{switch(n.type.unit){case X.SECOND:return _a(n,t);case X.MILLISECOND:return Sa(n,t);case X.MICROSECOND:return Ia(n,t);case X.NANOSECOND:return Ba(n,t)}},Ta=({values:n,stride:t},e)=>n[t*e],Aa=({values:n,stride:t},e)=>n[t*e],Da=({values:n},t)=>Ze.signed(n.subarray(2*t,2*(t+1))),Oa=({values:n},t)=>Ze.signed(n.subarray(2*t,2*(t+1))),cd=(n,t)=>{switch(n.type.unit){case X.SECOND:return Ta(n,t);case X.MILLISECOND:return Aa(n,t);case X.MICROSECOND:return Da(n,t);case X.NANOSECOND:return Oa(n,t)}},ld=({values:n},t)=>Ze.decimal(n.subarray(4*t,4*(t+1))),ud=(n,t)=>{const e=n.getChildAt(0),{valueOffsets:r,stride:s}=n;return e.slice(r[t*s],r[t*s+1])},hd=(n,t)=>n.bind(t),dd=(n,t)=>n.bind(t),fd=(n,t)=>n.type.mode===ne.Dense?Fa(n,t):xa(n,t),Fa=(n,t)=>{const e=n.typeIdToChildIndex[n.typeIds[t]],r=n.getChildAt(e);return r?r.get(n.valueOffsets[t]):null},xa=(n,t)=>{const e=n.typeIdToChildIndex[n.typeIds[t]],r=n.getChildAt(e);return r?r.get(t):null},pd=(n,t)=>n.getValue(n.getKey(t)),yd=(n,t)=>n.type.unit===ze.DAY_TIME?La(n,t):Ea(n,t),La=({values:n},t)=>n.subarray(2*t,2*(t+1)),Ea=({values:n},t)=>{const e=n[t],r=new Int32Array(2);return r[0]=e/12|0,r[1]=e%12|0,r},bd=(n,t)=>{const e=n.getChildAt(0),{stride:r}=n;return e.slice(t*r,(t+1)*r)};T.prototype.visitNull=Qh;T.prototype.visitBool=td;T.prototype.visitInt=id;T.prototype.visitInt8=Kt;T.prototype.visitInt16=Kt;T.prototype.visitInt32=Kt;T.prototype.visitInt64=Gi;T.prototype.visitUint8=Kt;T.prototype.visitUint16=Kt;T.prototype.visitUint32=Kt;T.prototype.visitUint64=Gi;T.prototype.visitFloat=sd;T.prototype.visitFloat16=wa;T.prototype.visitFloat32=Kt;T.prototype.visitFloat64=Kt;T.prototype.visitUtf8=rd;T.prototype.visitBinary=nd;T.prototype.visitFixedSizeBinary=ed;T.prototype.visitDate=od;T.prototype.visitDateDay=ga;T.prototype.visitDateMillisecond=va;T.prototype.visitTimestamp=ad;T.prototype.visitTimestampSecond=_a;T.prototype.visitTimestampMillisecond=Sa;T.prototype.visitTimestampMicrosecond=Ia;T.prototype.visitTimestampNanosecond=Ba;T.prototype.visitTime=cd;T.prototype.visitTimeSecond=Ta;T.prototype.visitTimeMillisecond=Aa;T.prototype.visitTimeMicrosecond=Da;T.prototype.visitTimeNanosecond=Oa;T.prototype.visitDecimal=ld;T.prototype.visitList=ud;T.prototype.visitStruct=dd;T.prototype.visitUnion=fd;T.prototype.visitDenseUnion=Fa;T.prototype.visitSparseUnion=xa;T.prototype.visitDictionary=pd;T.prototype.visitInterval=yd;T.prototype.visitIntervalDayTime=La;T.prototype.visitIntervalYearMonth=Ea;T.prototype.visitFixedSizeList=bd;T.prototype.visitMap=hd;const Ar=new T;class A extends k{}function md(n,t){return t===null&&n.length>0?0:-1}function gd(n,t){const{nullBitmap:e}=n;if(!e||n.nullCount<=0)return-1;let r=0;for(const s of br(e,n.data.offset+(t||0),n.length,e,uo)){if(!s)return r;++r}return-1}function U(n,t,e){if(t===void 0)return-1;if(t===null)return gd(n,e);const r=Xe(t);for(let s=(e||0)-1,o=n.length;++s<o;)if(r(n.get(s)))return s;return-1}function Ma(n,t,e){const r=Xe(t);for(let s=(e||0)-1,o=n.length;++s<o;)if(r(n.get(s)))return s;return-1}A.prototype.visitNull=md;A.prototype.visitBool=U;A.prototype.visitInt=U;A.prototype.visitInt8=U;A.prototype.visitInt16=U;A.prototype.visitInt32=U;A.prototype.visitInt64=U;A.prototype.visitUint8=U;A.prototype.visitUint16=U;A.prototype.visitUint32=U;A.prototype.visitUint64=U;A.prototype.visitFloat=U;A.prototype.visitFloat16=U;A.prototype.visitFloat32=U;A.prototype.visitFloat64=U;A.prototype.visitUtf8=U;A.prototype.visitBinary=U;A.prototype.visitFixedSizeBinary=U;A.prototype.visitDate=U;A.prototype.visitDateDay=U;A.prototype.visitDateMillisecond=U;A.prototype.visitTimestamp=U;A.prototype.visitTimestampSecond=U;A.prototype.visitTimestampMillisecond=U;A.prototype.visitTimestampMicrosecond=U;A.prototype.visitTimestampNanosecond=U;A.prototype.visitTime=U;A.prototype.visitTimeSecond=U;A.prototype.visitTimeMillisecond=U;A.prototype.visitTimeMicrosecond=U;A.prototype.visitTimeNanosecond=U;A.prototype.visitDecimal=U;A.prototype.visitList=U;A.prototype.visitStruct=U;A.prototype.visitUnion=U;A.prototype.visitDenseUnion=Ma;A.prototype.visitSparseUnion=Ma;A.prototype.visitDictionary=U;A.prototype.visitInterval=U;A.prototype.visitIntervalDayTime=U;A.prototype.visitIntervalYearMonth=U;A.prototype.visitFixedSizeList=U;A.prototype.visitMap=U;const Ca=new A;class D extends k{}function vd(n){const t=Ar.getVisitFn(n);return br(n.nullBitmap,n.offset,n.length,n,(e,r,s,o)=>(s&1<<o)!==0?t(e,r):null)}function x(n){if(n.nullCount>0)return vd(n);const{type:t,typeId:e,length:r}=n;return n.stride===1&&(e===h.Timestamp||e===h.Int&&t.bitWidth!==64||e===h.Time&&t.bitWidth!==64||e===h.Float&&t.precision>0)?n.values.subarray(0,r)[Symbol.iterator]():(function*(s){for(let o=-1;++o<r;)yield s(n,o)})(Ar.getVisitFn(n))}D.prototype.visitNull=x;D.prototype.visitBool=x;D.prototype.visitInt=x;D.prototype.visitInt8=x;D.prototype.visitInt16=x;D.prototype.visitInt32=x;D.prototype.visitInt64=x;D.prototype.visitUint8=x;D.prototype.visitUint16=x;D.prototype.visitUint32=x;D.prototype.visitUint64=x;D.prototype.visitFloat=x;D.prototype.visitFloat16=x;D.prototype.visitFloat32=x;D.prototype.visitFloat64=x;D.prototype.visitUtf8=x;D.prototype.visitBinary=x;D.prototype.visitFixedSizeBinary=x;D.prototype.visitDate=x;D.prototype.visitDateDay=x;D.prototype.visitDateMillisecond=x;D.prototype.visitTimestamp=x;D.prototype.visitTimestampSecond=x;D.prototype.visitTimestampMillisecond=x;D.prototype.visitTimestampMicrosecond=x;D.prototype.visitTimestampNanosecond=x;D.prototype.visitTime=x;D.prototype.visitTimeSecond=x;D.prototype.visitTimeMillisecond=x;D.prototype.visitTimeMicrosecond=x;D.prototype.visitTimeNanosecond=x;D.prototype.visitDecimal=x;D.prototype.visitList=x;D.prototype.visitStruct=x;D.prototype.visitUnion=x;D.prototype.visitDenseUnion=x;D.prototype.visitSparseUnion=x;D.prototype.visitDictionary=x;D.prototype.visitInterval=x;D.prototype.visitIntervalDayTime=x;D.prototype.visitIntervalYearMonth=x;D.prototype.visitFixedSizeList=x;D.prototype.visitMap=x;const Ki=new D;class O extends k{}function L(n){const{type:t,length:e,stride:r}=n;switch(t.typeId){case h.Int:case h.Float:case h.Decimal:case h.Time:case h.Timestamp:return n.values.subarray(0,e*r)}return[...Ki.visit(n)]}O.prototype.visitNull=L;O.prototype.visitBool=L;O.prototype.visitInt=L;O.prototype.visitInt8=L;O.prototype.visitInt16=L;O.prototype.visitInt32=L;O.prototype.visitInt64=L;O.prototype.visitUint8=L;O.prototype.visitUint16=L;O.prototype.visitUint32=L;O.prototype.visitUint64=L;O.prototype.visitFloat=L;O.prototype.visitFloat16=L;O.prototype.visitFloat32=L;O.prototype.visitFloat64=L;O.prototype.visitUtf8=L;O.prototype.visitBinary=L;O.prototype.visitFixedSizeBinary=L;O.prototype.visitDate=L;O.prototype.visitDateDay=L;O.prototype.visitDateMillisecond=L;O.prototype.visitTimestamp=L;O.prototype.visitTimestampSecond=L;O.prototype.visitTimestampMillisecond=L;O.prototype.visitTimestampMicrosecond=L;O.prototype.visitTimestampNanosecond=L;O.prototype.visitTime=L;O.prototype.visitTimeSecond=L;O.prototype.visitTimeMillisecond=L;O.prototype.visitTimeMicrosecond=L;O.prototype.visitTimeNanosecond=L;O.prototype.visitDecimal=L;O.prototype.visitList=L;O.prototype.visitStruct=L;O.prototype.visitUnion=L;O.prototype.visitDenseUnion=L;O.prototype.visitSparseUnion=L;O.prototype.visitDictionary=L;O.prototype.visitInterval=L;O.prototype.visitIntervalDayTime=L;O.prototype.visitIntervalYearMonth=L;O.prototype.visitFixedSizeList=L;O.prototype.visitMap=L;const Na=new O,nn=(n,t)=>n+t,Zr=n=>`Cannot compute the byte width of variable-width column ${n}`;class wd extends k{visitNull(t){return 0}visitInt(t){return t.bitWidth/8}visitFloat(t){return t.ArrayType.BYTES_PER_ELEMENT}visitBinary(t){throw new Error(Zr(t))}visitUtf8(t){throw new Error(Zr(t))}visitBool(t){return 1/8}visitDecimal(t){return 16}visitDate(t){return(t.unit+1)*4}visitTime(t){return t.bitWidth/8}visitTimestamp(t){return t.unit===X.SECOND?4:8}visitInterval(t){return(t.unit+1)*4}visitList(t){throw new Error(Zr(t))}visitStruct(t){return this.visitFields(t.children).reduce(nn,0)}visitUnion(t){return this.visitFields(t.children).reduce(nn,0)}visitFixedSizeBinary(t){return t.byteWidth}visitFixedSizeList(t){return t.listSize*this.visitFields(t.children).reduce(nn,0)}visitMap(t){return this.visitFields(t.children).reduce(nn,0)}visitDictionary(t){return this.visit(t.indices)}visitFields(t){return(t||[]).map(e=>this.visit(e.type))}visitSchema(t){return this.visitFields(t.fields).reduce(nn,0)}}const Ua=new wd;class _d extends k{visitNull(){return Ch}visitBool(){return gh}visitInt(){return Pt}visitInt8(){return ca}visitInt16(){return la}visitInt32(){return ua}visitInt64(){return ha}visitUint8(){return da}visitUint16(){return fa}visitUint32(){return pa}visitUint64(){return ya}visitFloat(){return Br}visitFloat16(){return sa}visitFloat32(){return oa}visitFloat64(){return aa}visitUtf8(){return Hh}visitBinary(){return mh}visitFixedSizeBinary(){return Sh}visitDate(){return $i}visitDateDay(){return vh}visitDateMillisecond(){return wh}visitTimestamp(){return xn}visitTimestampSecond(){return Uh}visitTimestampMillisecond(){return Rh}visitTimestampMicrosecond(){return kh}visitTimestampNanosecond(){return Vh}visitTime(){return Ln}visitTimeSecond(){return Ph}visitTimeMillisecond(){return zh}visitTimeMicrosecond(){return jh}visitTimeNanosecond(){return $h}visitDecimal(){return _h}visitList(){return Eh}visitStruct(){return Tr}visitUnion(){return Hi}visitDenseUnion(){return Wh}visitSparseUnion(){return Yh}visitDictionary(){return Wi}visitInterval(){return Yi}visitIntervalDayTime(){return Dh}visitIntervalYearMonth(){return Oh}visitFixedSizeList(){return Ih}visitMap(){return Mh}}const Ra=new _d;P.new=Sd;P.from=Id;function Sd(n,...t){return new(Ra.getVisitFn(n)())(n,...t)}function Be(n,t){if(Rt(t))return P.from({nullValues:[null,void 0],type:n(),values:t});if(re(t))return P.from({nullValues:[null,void 0],type:n(),values:t});const{values:e=[],type:r=n(),nullValues:s=[null,void 0]}={...t};return Rt(e)?P.from({nullValues:s,...t,type:r}):P.from({nullValues:s,...t,type:r})}function Id(n){const{values:t=[],...e}={nullValues:[null,void 0],...n};if(Rt(t)){const r=[...st.throughIterable(e)(t)];return r.length===1?r[0]:dt.concat(r)}return(async r=>{const s=st.throughAsyncIterable(e);for await(const o of s(t))r.push(o);return r.length===1?r[0]:dt.concat(r)})([])}et.prototype.get=function(t){return Ar.visit(this,t)};et.prototype.set=function(t,e){return Sr.visit(this,t,e)};et.prototype.indexOf=function(t,e){return Ca.visit(this,t,e)};et.prototype.toArray=function(){return Na.visit(this)};et.prototype.getByteWidth=function(){return Ua.visit(this.type)};et.prototype[Symbol.iterator]=function(){return Ki.visit(this)};et.prototype._bindDataAccessors=Dd;Object.keys(h).map(n=>h[n]).filter(n=>typeof n=="number").filter(n=>n!==h.NONE).forEach(n=>{const t=Ra.visit(n);t.prototype.get=qh(Ar.getVisitFn(n)),t.prototype.set=js(Sr.getVisitFn(n)),t.prototype.indexOf=js(Ca.getVisitFn(n)),t.prototype.toArray=zs(Na.getVisitFn(n)),t.prototype.getByteWidth=Bd(Ua.getVisitFn(n)),t.prototype[Symbol.iterator]=zs(Ki.getVisitFn(n))});function Bd(n){return function(){return n(this.type)}}function Td(n){return function(t){return this.isValid(t)?n.call(this,t):null}}function Ad(n){return function(t,e){Vc(this.nullBitmap,this.offset+t,e!=null)&&n.call(this,t,e)}}function Dd(){const n=this.nullBitmap;n&&n.byteLength>0&&(this.get=Td(this.get),this.set=Ad(this.set))}class Y extends dt{constructor(...t){let e=null;t[0]instanceof Q&&(e=t.shift());let r=To(vt,t);if(!e&&!(e=r[0]&&r[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");r[0]||(r[0]=new Dr(e)),super(new kt(e.fields),r),this._schema=e,this._chunks=r}static empty(t=new Q([])){return new Y(t,[])}static from(t){if(!t)return Y.empty();if(typeof t=="object"){let r=Rt(t.values)?Od(t):re(t.values)?Fd(t):null;if(r!==null)return r}let e=Ut.from(t);return ue(e)?(async()=>await Y.from(await e))():e.isSync()&&(e=e.open())?e.schema?new Y(e.schema,[...e]):Y.empty():(async r=>{const s=await r,o=s.schema,i=[];if(o){for await(let a of s)i.push(a);return new Y(o,i)}return Y.empty()})(e.open())}static async fromAsync(t){return await Y.from(t)}static fromStruct(t){return Y.new(t.data.childData,t.type.children)}static new(...t){return new Y(...ph(Wl(t)))}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(t=this._chunks){return new Y(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex(e=>e.name===t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r;const s=this._schema.fields,o=this._children||(this._children=[]);if(r=o[t])return r;if(e=s[t]){const i=this._chunks.map(a=>a.getChildAt(t)).filter(a=>a!=null);if(i.length>0)return o[t]=new Ct(e,i)}return null}serialize(t="binary",e=!0){return(e?Vi:Pi).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...t){const e=this._schema.fields.reduce((r,s,o)=>r.set(s.name,o),new Map);return this.selectAt(...t.map(r=>e.get(r)).filter(r=>r>-1))}selectAt(...t){const e=this._schema.selectAt(...t);return new Y(e,this._chunks.map(({length:r,data:{childData:s}})=>new vt(e,r,t.map(o=>s[o]).filter(Boolean))))}assign(t){const e=this._schema.fields,[r,s]=t.schema.fields.reduce((a,c,l)=>{const[u,p]=a,b=e.findIndex(g=>g.name===c.name);return~b?p[b]=l:u.push(l),a},[[],[]]),o=this._schema.assign(t.schema),i=[...e.map((a,c,l,u=s[c])=>u===void 0?this.getColumnAt(c):t.getColumnAt(u)),...r.map(a=>t.getColumnAt(a))].filter(Boolean);return new Y(...ia(o,i))}}function Od(n){const{type:t}=n;return t instanceof kt?Y.fromStruct(Tr.from(n)):null}function Fd(n){const{type:t}=n;return t instanceof kt?Tr.from(n).then(e=>Y.fromStruct(e)):null}class vt extends Tr{constructor(...t){let e,r=t[0],s;if(t[1]instanceof _)[,e,s]=t;else{const o=r.fields,[,i,a]=t;e=_.Struct(new kt(o),0,i,0,null,a)}super(e,s),this._schema=r}static from(t){return Rt(t.values),Y.from(t)}static new(...t){const[e,r]=Ao(t),s=r.filter(o=>o instanceof P);return new vt(...fh(new Q(e),s.map(o=>o.data)))}clone(t,e=this._children){return new vt(this._schema,t,e)}concat(...t){const e=this._schema,r=dt.flatten(this,...t);return new Y(e,r.map(({data:s})=>new vt(e,s)))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=Ji.collect(this))}select(...t){const e=this._schema.fields.reduce((r,s,o)=>r.set(s.name,o),new Map);return this.selectAt(...t.map(r=>e.get(r)).filter(r=>r>-1))}selectAt(...t){const e=this._schema.selectAt(...t),r=t.map(s=>this.data.childData[s]).filter(Boolean);return new vt(e,this.length,r)}}class Dr extends vt{constructor(t){super(t,0,t.fields.map(e=>_.new(e.type,0,0,0)))}}class Ji extends k{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return new Ji().visit(t.data,new kt(t.schema.fields)).dictionaries}visit(t,e){return C.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach((r,s)=>this.visit(r,e.children[s].type)),this)}visitDictionary(t,e){const r=t.dictionary;return r&&r.length>0&&this.dictionaries.set(e.id,r),this}}class Ut extends Ae{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return ue(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Tt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Tt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ut?t:ei(t)?Md(t):so(t)?Ud(t):ue(t)?(async()=>await Ut.from(await t))():oo(t)||hi(t)||ao(t)||re(t)?Nd(new Se(t)):Cd(new ar(t))}static readAll(t){return t instanceof Ut?t.isSync()?$s(t):Ws(t):ei(t)||ArrayBuffer.isView(t)||Rt(t)||io(t)?$s(t):Ws(t)}}class lr extends Ut{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async*[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}class ur extends Ut{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class ka extends lr{constructor(t){super(t),this._impl=t}}class xd extends ur{constructor(t){super(t),this._impl=t}}class Va{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new vt(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:r,isDelta:s,data:o}=t,{dictionaries:i,schema:a}=this,c=i.get(r);if(s||!c){const l=a.dictionaries.get(r);return c&&s?c.concat(P.new(this._loadVectors(o,e,[l])[0])):P.new(this._loadVectors(o,e,[l])[0])}return c}_loadVectors(t,e,r){return new qo(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}class hr extends Va{constructor(t,e){super(e),this._reader=ei(t)?new lh(this._handle=t):new ta(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=za(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):it}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):it}next(){if(this.closed)return it;let t,{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),s=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),s=e.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(r,s);this.dictionaries.set(r.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Dr(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class dr extends Va{constructor(t,e){super(e),this._reader=new ch(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(t){return this.closed||(this.autoDestroy=za(this,t),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(t):it}async return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(t):it}async next(){if(this.closed)return it;let t,{_reader:e}=this;for(;t=await this._readNextMessageAndValidate();)if(t.isSchema())await this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),s=await e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),s=await e.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(r,s);this.dictionaries.set(r.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Dr(this.schema)}):await this.return()}async _readNextMessageAndValidate(t){return await this._reader.readMessage(t)}}class Pa extends hr{constructor(t,e){super(t instanceof Ds?t:new Ds(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const r=this._reader.readMessage(tt.RecordBatch);if(r&&r.isRecordBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const r=this._reader.readMessage(tt.DictionaryBatch);if(r&&r.isDictionaryBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength),i=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-ea,r=t.readInt32(e),s=t.readAt(e-r,r);return gn.decode(s)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class Ld extends dr{constructor(t,...e){const r=typeof e[0]!="number"?e.shift():void 0,s=e[0]instanceof Map?e.shift():void 0;super(t instanceof cr?t:new cr(t,r),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=await this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&await this._readDictionaryBatch(this._dictionaryIndex++)}return await super.open(t)}async readRecordBatch(t){if(this.closed)return null;this._footer||await this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&await this._handle.seek(e.offset)){const r=await this._reader.readMessage(tt.RecordBatch);if(r&&r.isRecordBatch()){const s=r.header(),o=await this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null}async _readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&await this._handle.seek(e.offset)){const r=await this._reader.readMessage(tt.DictionaryBatch);if(r&&r.isDictionaryBatch()){const s=r.header(),o=await this._reader.readMessageBody(r.bodyLength),i=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,i)}}}async _readFooter(){const{_handle:t}=this;t._pending&&await t._pending;const e=t.size-ea,r=await t.readInt32(e),s=await t.readAt(e-r,r);return gn.decode(s)}async _readNextMessageAndValidate(t){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&await this._handle.seek(e.offset))return await this._reader.readMessage(t)}return null}}class Ed extends hr{constructor(t,e){super(t,e)}_loadVectors(t,e,r){return new Lu(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}function za(n,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:n.autoDestroy}function*$s(n){const t=Ut.from(n);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}async function*Ws(n){const t=await Ut.from(n);try{if(!(await t.open({autoDestroy:!1})).closed)do yield t;while(!(await t.reset().open()).closed)}finally{await t.cancel()}}function Md(n){return new lr(new Ed(n))}function Cd(n){const t=n.peek(Fn+7&-8);return t&&t.byteLength>=4?Ui(t)?new ka(new Pa(n.read())):new lr(new hr(n)):new lr(new hr((function*(){})()))}async function Nd(n){const t=await n.peek(Fn+7&-8);return t&&t.byteLength>=4?Ui(t)?new ka(new Pa(await n.read())):new ur(new dr(n)):new ur(new dr((async function*(){})()))}async function Ud(n){const{size:t}=await n.stat(),e=new cr(n,t);return t>=uh&&Ui(await e.readAt(0,Fn+7&-8))?new xd(new Ld(e)):new ur(new dr(e))}function Rd(n,t){if(re(n))return Vd(n,t);if(Rt(n))return kd(n,t);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function kd(n,t){let e=null;const r=t&&t.type==="bytes"||!1,s=t&&t.highWaterMark||2**24;return new ReadableStream({...t,start(i){o(i,e||(e=n[Symbol.iterator]()))},pull(i){e?o(i,e):i.close()},cancel(){(e&&e.return&&e.return()||!0)&&(e=null)}},{highWaterMark:r?s:void 0,...t});function o(i,a){let c,l=null,u=i.desiredSize||null;for(;!(l=a.next(r?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=V(l.value))&&(u!=null&&r&&(u=u-c.byteLength+1),l.value=c),i.enqueue(l.value),u!=null&&--u<=0)return;i.close()}}function Vd(n,t){let e=null;const r=t&&t.type==="bytes"||!1,s=t&&t.highWaterMark||2**24;return new ReadableStream({...t,async start(i){await o(i,e||(e=n[Symbol.asyncIterator]()))},async pull(i){e?await o(i,e):i.close()},async cancel(){(e&&e.return&&await e.return()||!0)&&(e=null)}},{highWaterMark:r?s:void 0,...t});async function o(i,a){let c,l=null,u=i.desiredSize||null;for(;!(l=await a.next(r?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=V(l.value))&&(u!=null&&r&&(u=u-c.byteLength+1),l.value=c),i.enqueue(l.value),u!=null&&--u<=0)return;i.close()}}function Pd(n){return new zd(n)}class zd{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:e,["writableStrategy"]:r,["queueingStrategy"]:s="count",...o}=t;this._controller=null,this._builder=st.new(o),this._getSize=s!=="bytes"?Ys:Hs;const{["highWaterMark"]:i=s==="bytes"?2**14:1e3}={...e},{["highWaterMark"]:a=s==="bytes"?2**14:1e3}={...r};this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:c=>{this._maybeFlush(this._builder,this._controller=c)},start:c=>{this._maybeFlush(this._builder,this._controller=c)}},{highWaterMark:i,size:s!=="bytes"?Ys:Hs}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:c=>this._writeValueAndReturnChunkSize(c)})}_writeValueAndReturnChunkSize(t){const e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){e!==null&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,e===null?t.close():t.enqueue(e)}}const Ys=n=>n.length,Hs=n=>n.byteLength;function jd(n,t){const e=new cn;let r=null;const s=new ReadableStream({async cancel(){await e.close()},async start(a){await i(a,r||(r=await o()))},async pull(a){r?await i(a,r):a.close()}});return{writable:new WritableStream(e,{highWaterMark:2**14,...n}),readable:s};async function o(){return await(await Ut.from(e)).open(t)}async function i(a,c){let l=a.desiredSize,u=null;for(;!(u=await c.next()).done;)if(a.enqueue(u.value),l!=null&&--l<=0)return;a.close()}}function $d(n,t){const e=new this(n),r=new Se(e),s=new ReadableStream({type:"bytes",async cancel(){await r.cancel()},async pull(i){await o(i)},async start(i){await o(i)}},{highWaterMark:2**14,...t});return{writable:new WritableStream(e,n),readable:s};async function o(i){let a=null,c=i.desiredSize;for(;a=await r.read(c||null);)if(i.enqueue(a),c!=null&&(c-=a.byteLength)<=0)return;i.close()}}class Ue{eq(t){return t instanceof Ue||(t=new Re(t)),new Wd(this,t)}le(t){return t instanceof Ue||(t=new Re(t)),new Yd(this,t)}ge(t){return t instanceof Ue||(t=new Re(t)),new Hd(this,t)}lt(t){return new Hn(this.ge(t))}gt(t){return new Hn(this.le(t))}ne(t){return new Hn(this.eq(t))}}class Re extends Ue{constructor(t){super(),this.v=t}}class ja extends Ue{constructor(t){super(),this.name=t}bind(t){if(!this.colidx){this.colidx=-1;const r=t.schema.fields;for(let s=-1;++s<r.length;)if(r[s].name===this.name){this.colidx=s;break}if(this.colidx<0)throw new Error(`Failed to bind Col "${this.name}"`)}const e=this.vector=t.getChildAt(this.colidx);return r=>e.get(r)}}class Zi{and(...t){return new ts(this,...t)}or(...t){return new es(this,...t)}not(){return new Hn(this)}}class Xi extends Zi{constructor(t,e){super(),this.left=t,this.right=e}bind(t){return this.left instanceof Re?this.right instanceof Re?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof Re?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)}}class Qi extends Zi{constructor(...t){super(),this.children=t}}Qi.prototype.children=Object.freeze([]);class ts extends Qi{constructor(...t){t=t.reduce((e,r)=>e.concat(r instanceof ts?r.children:r),[]),super(...t)}bind(t){const e=this.children.map(r=>r.bind(t));return(r,s)=>e.every(o=>o(r,s))}}class es extends Qi{constructor(...t){t=t.reduce((e,r)=>e.concat(r instanceof es?r.children:r),[]),super(...t)}bind(t){const e=this.children.map(r=>r.bind(t));return(r,s)=>e.some(o=>o(r,s))}}class Wd extends Xi{_bindLitLit(t,e,r){const s=e.v==r.v;return()=>s}_bindColCol(t,e,r){const s=e.bind(t),o=r.bind(t);return(i,a)=>s(i,a)==o(i,a)}_bindColLit(t,e,r){const s=e.bind(t);if(e.vector instanceof Wi){let o;const i=e.vector;return i.dictionary!==this.lastDictionary?(o=i.reverseLookup(r.v),this.lastDictionary=i.dictionary,this.lastKey=o):o=this.lastKey,o===-1?()=>!1:a=>i.getKey(a)===o}else return(o,i)=>s(o,i)==r.v}_bindLitCol(t,e,r){return this._bindColLit(t,r,e)}}class Yd extends Xi{_bindLitLit(t,e,r){const s=e.v<=r.v;return()=>s}_bindColCol(t,e,r){const s=e.bind(t),o=r.bind(t);return(i,a)=>s(i,a)<=o(i,a)}_bindColLit(t,e,r){const s=e.bind(t);return(o,i)=>s(o,i)<=r.v}_bindLitCol(t,e,r){const s=r.bind(t);return(o,i)=>e.v<=s(o,i)}}class Hd extends Xi{_bindLitLit(t,e,r){const s=e.v>=r.v;return()=>s}_bindColCol(t,e,r){const s=e.bind(t),o=r.bind(t);return(i,a)=>s(i,a)>=o(i,a)}_bindColLit(t,e,r){const s=e.bind(t);return(o,i)=>s(o,i)>=r.v}_bindLitCol(t,e,r){const s=r.bind(t);return(o,i)=>e.v>=s(o,i)}}class Hn extends Zi{constructor(t){super(),this.child=t}bind(t){const e=this.child.bind(t);return(r,s)=>!e(r,s)}}Y.prototype.countBy=function(n){return new En(this.chunks).countBy(n)};Y.prototype.scan=function(n,t){return new En(this.chunks).scan(n,t)};Y.prototype.scanReverse=function(n,t){return new En(this.chunks).scanReverse(n,t)};Y.prototype.filter=function(n){return new En(this.chunks).filter(n)};class En extends Y{filter(t){return new ns(this.chunks,t)}scan(t,e){const r=this.chunks,s=r.length;for(let o=-1;++o<s;){const i=r[o];e&&e(i);for(let a=-1,c=i.length;++a<c;)t(a,i)}}scanReverse(t,e){const r=this.chunks,s=r.length;for(let o=s;--o>=0;){const i=r[o];e&&e(i);for(let a=i.length;--a>=0;)t(a,i)}}countBy(t){const e=this.chunks,r=e.length,s=typeof t=="string"?new ja(t):t;s.bind(e[r-1]);const o=s.vector;if(!C.isDictionary(o.type))throw new Error("countBy currently only supports dictionary-encoded columns");const i=Math.ceil(Math.log(o.length)/Math.log(256)),a=i==4?Uint32Array:i>=2?Uint16Array:Uint8Array,c=new a(o.dictionary.length);for(let l=-1;++l<r;){const u=e[l];s.bind(u);const p=s.vector.indices;for(let b=-1,g=u.length;++b<g;){let v=p.get(b);v!==null&&c[v]++}}return new $a(o.dictionary,Pt.from(c))}}class $a extends Y{constructor(t,e){const r=new Q([new z("values",t.type),new z("counts",e.type)]);super(new vt(r,e.length,[t,e]))}toJSON(){const t=this.getColumnAt(0),e=this.getColumnAt(1),r={};for(let s=-1;++s<this.length;)r[t.get(s)]=e.get(s);return r}}class ns extends En{constructor(t,e){super(t),this._predicate=e}scan(t,e){const r=this._chunks,s=r.length;for(let o=-1;++o<s;){const i=r[o],a=this._predicate.bind(i);let c=!1;for(let l=-1,u=i.length;++l<u;)a(l,i)&&(e&&!c&&(e(i),c=!0),t(l,i))}}scanReverse(t,e){const r=this._chunks,s=r.length;for(let o=s;--o>=0;){const i=r[o],a=this._predicate.bind(i);let c=!1;for(let l=i.length;--l>=0;)a(l,i)&&(e&&!c&&(e(i),c=!0),t(l,i))}}count(){let t=0;const e=this._chunks,r=e.length;for(let s=-1;++s<r;){const o=e[s],i=this._predicate.bind(o);for(let a=-1,c=o.length;++a<c;)i(a,o)&&++t}return t}*[Symbol.iterator](){const t=this._chunks,e=t.length;for(let r=-1;++r<e;){const s=t[r],o=this._predicate.bind(s);for(let i=-1,a=s.length;++i<a;)o(i,s)&&(yield s.get(i))}}filter(t){return new ns(this._chunks,this._predicate.and(t))}countBy(t){const e=this._chunks,r=e.length,s=typeof t=="string"?new ja(t):t;s.bind(e[r-1]);const o=s.vector;if(!C.isDictionary(o.type))throw new Error("countBy currently only supports dictionary-encoded columns");const i=Math.ceil(Math.log(o.length)/Math.log(256)),a=i==4?Uint32Array:i>=2?Uint16Array:Uint8Array,c=new a(o.dictionary.length);for(let l=-1;++l<r;){const u=e[l],p=this._predicate.bind(u);s.bind(u);const b=s.vector.indices;for(let g=-1,v=u.length;++g<v;){let R=b.get(g);R!==null&&p(g,u)&&c[R]++}}return new $a(o.dictionary,Pt.from(c))}}Tt.toDOMStream=Rd;st.throughDOM=Pd;Ut.throughDOM=jd;ki.throughDOM=$d;/**
 * @license
 * Copyright 2018-2021 Streamlit Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qs=(function(){function n(t,e,r,s){var o=this;this.getCell=function(i,a){var c=i<o.headerRows&&a<o.headerColumns,l=i>=o.headerRows&&a<o.headerColumns,u=i<o.headerRows&&a>=o.headerColumns;if(c){var p=["blank"];return a>0&&p.push("level"+i),{type:"blank",classNames:p.join(" "),content:""}}else if(u){var b=a-o.headerColumns,p=["col_heading","level"+i,"col"+b];return{type:"columns",classNames:p.join(" "),content:o.getContent(o.columnsTable,b,i)}}else if(l){var g=i-o.headerRows,p=["row_heading","level"+a,"row"+g];return{type:"index",id:"T_"+o.uuid+"level"+a+"_row"+g,classNames:p.join(" "),content:o.getContent(o.indexTable,g,a)}}else{var g=i-o.headerRows,b=a-o.headerColumns,p=["data","row"+g,"col"+b],v=o.styler?o.getContent(o.styler.displayValuesTable,g,b):o.getContent(o.dataTable,g,b);return{type:"data",id:"T_"+o.uuid+"row"+g+"_col"+b,classNames:p.join(" "),content:v}}},this.getContent=function(i,a,c){var l=i.getColumnAt(c);if(l===null)return"";var u=o.getColumnTypeId(i,c);switch(u){case h.Timestamp:return o.nanosToDate(l.get(a));default:return l.get(a)}},this.dataTable=Y.from(t),this.indexTable=Y.from(e),this.columnsTable=Y.from(r),this.styler=s?{caption:s.caption,displayValuesTable:Y.from(s.displayValues),styles:s.styles,uuid:s.uuid}:void 0}return Object.defineProperty(n.prototype,"rows",{get:function(){return this.indexTable.length+this.columnsTable.numCols},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataRows",{get:function(){return this.dataTable.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"table",{get:function(){return this.dataTable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.indexTable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!0,configurable:!0}),n.prototype.serialize=function(){return{data:this.dataTable.serialize(),index:this.indexTable.serialize(),columns:this.columnsTable.serialize()}},n.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},n.prototype.nanosToDate=function(t){return new Date(t/1e6)},n})();/**
 * @license
 * Copyright 2018-2021 Streamlit Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln=function(){return ln=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ln.apply(this,arguments)},un;(function(n){n.COMPONENT_READY="streamlit:componentReady",n.SET_COMPONENT_VALUE="streamlit:setComponentValue",n.SET_FRAME_HEIGHT="streamlit:setFrameHeight"})(un||(un={}));var Te=(function(){function n(){}return n.API_VERSION=1,n.RENDER_EVENT="streamlit:render",n.events=new le,n.registeredMessageListener=!1,n.setComponentReady=function(){n.registeredMessageListener||(window.addEventListener("message",n.onMessageEvent),n.registeredMessageListener=!0),n.sendBackMsg(un.COMPONENT_READY,{apiVersion:n.API_VERSION})},n.setFrameHeight=function(t){t===void 0&&(t=document.body.scrollHeight),t!==n.lastFrameHeight&&(n.lastFrameHeight=t,n.sendBackMsg(un.SET_FRAME_HEIGHT,{height:t}))},n.setComponentValue=function(t){var e;t instanceof qs?(e="dataframe",t=t.serialize()):Gd(t)?(e="bytes",t=new Uint8Array(t.buffer)):t instanceof ArrayBuffer?(e="bytes",t=new Uint8Array(t)):e="json",n.sendBackMsg(un.SET_COMPONENT_VALUE,{value:t,dataType:e})},n.onMessageEvent=function(t){var e=t.data.type;switch(e){case n.RENDER_EVENT:n.onRenderMessage(t.data);break}},n.onRenderMessage=function(t){var e=t.args;e==null&&(console.error("Got null args in onRenderMessage. This should never happen"),e={});var r=t.dfs&&t.dfs.length>0?n.argsDataframeToObject(t.dfs):{};e=ln(ln({},e),r);var s=!!t.disabled,o=t.theme;o&&qd(o);var i={disabled:s,args:e,theme:o},a=new CustomEvent(n.RENDER_EVENT,{detail:i});n.events.dispatchEvent(a)},n.argsDataframeToObject=function(t){var e=t.map(function(r){var s=r.key,o=r.value;return[s,n.toArrowTable(o)]});return Object.fromEntries(e)},n.toArrowTable=function(t){var e=t.data,r=e.data,s=e.index,o=e.columns,i=e.styler;return new qs(r,s,o,i)},n.sendBackMsg=function(t,e){window.parent.postMessage(ln({isStreamlitMessage:!0,type:t},e),"*")},n})(),qd=function(n){var t=document.createElement("style");document.head.appendChild(t),t.innerHTML=`
    :root {
      --primary-color: `+n.primaryColor+`;
      --background-color: `+n.backgroundColor+`;
      --secondary-background-color: `+n.secondaryBackgroundColor+`;
      --text-color: `+n.textColor+`;
      --font: `+n.font+`;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
    }
  `};function Gd(n){var t=!1;try{t=n instanceof BigInt64Array||n instanceof BigUint64Array}catch{}return n instanceof Int8Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array||t}/**
 * @license
 * Copyright 2018-2021 Streamlit Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kd=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){Kd(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.componentDidMount=function(){Te.setFrameHeight()},t.prototype.componentDidUpdate=function(){Te.setFrameHeight()},t})(ac.PureComponent);let me=null,xe=null,jt=null,rs=!1,Gs="",rn=0;function Xt(n){const t=Math.max(0,Math.floor(n||0)),e=Math.floor(t/60),r=t%60;return`${e}:${String(r).padStart(2,"0")}`}function Xr(n){rs&&Te.setFrameHeight(Math.max(220,Math.ceil(n)+8))}function Jd(n){const t=n.args||{},e=t.audioUrl,r=t.initStart??0,s=t.initEnd??5,o=JSON.stringify({len:typeof e=="string"?e.length:0,s:Math.round(r*1e3),e:Math.round(s*1e3)});if(o===Gs){const v=document.getElementById("rootwrap");v&&Xr(v.getBoundingClientRect().height);return}Gs=o;const i=++rn;try{me?.destroy()}catch{}me=null,jt=null,document.body.innerHTML=`
    <div id="rootwrap" class="wrap">
      <div style="font-weight:600;margin-bottom:6px">Selecione um trecho (arraste no waveform ou ajuste as bordas)</div>
      <div id="wave"></div>
      <div class="row">
        <button id="play"> Play/Pause</button>
        <button id="apply"> Usar esta seleo</button>
        <span id="lbl"></span>
      </div>
    </div>
  `;const a=document.getElementById("rootwrap"),c=document.getElementById("wave"),l=document.getElementById("lbl"),u=document.getElementById("play"),p=document.getElementById("apply");let b=-1;new ResizeObserver(()=>{const v=Math.ceil(a.getBoundingClientRect().height);v!==b&&(b=v,Xr(v))}).observe(a),xe=li.create();try{me=hn.create({container:c,url:e,height:96,waveColor:"#90a4ae",progressColor:"#26a69a",cursorColor:"#111",normalize:!0,backend:"MediaElement",plugins:[xe]})}catch(v){console.warn("WaveSurfer create error:",v);return}me.on("error",v=>{if(String(v?.name||v).includes("Abort")){console.debug("WaveSurfer load aborted (likely rerender).");return}console.error("WaveSurfer error:",v)}),me.on("ready",()=>{if(i!==rn)return;const v=me.getDuration(),R=Math.min(r,Math.max(0,v-.001)),I=Math.min(s,v);jt=xe.addRegion({start:R,end:I,color:"rgba(255,165,0,0.25)",drag:!0,resize:!0}),l.textContent=`Seleo: ${Xt(R)}  ${Xt(I)} (dur: ${Xt(Math.max(0,I-R))})`,Xr(a.getBoundingClientRect().height)}),xe.enableDragSelection({color:"rgba(255,0,0,0.12)"}),xe.on("region-created",v=>{i===rn&&(jt&&jt!==v&&jt.remove(),jt=v,l.textContent=`Seleo: ${Xt(v.start)}  ${Xt(v.end)} (dur: ${Xt(Math.max(0,v.end-v.start))})`)}),xe.on("region-updated",v=>{i===rn&&jt===v&&(l.textContent=`Seleo: ${Xt(v.start)}  ${Xt(v.end)} (dur: ${Xt(Math.max(0,v.end-v.start))})`)}),u.addEventListener("click",()=>me?.playPause()),p.addEventListener("click",()=>{if(i!==rn||!jt)return;const v=Math.max(0,Math.round(jt.start*1e3)/1e3),R=Math.max(v+.001,Math.round(jt.end*1e3)/1e3);rs&&Te.setComponentValue({start:v,end:R,forceRerun:!0})})}function Zd(n){rs=!0;const t=n.detail;Jd(t)}Te.events.addEventListener(Te.RENDER_EVENT,Zd);Te.setComponentReady();
